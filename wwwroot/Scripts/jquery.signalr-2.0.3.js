/* jquery.signalR.core.js */ /*global window:false */ /*!
 * ASP.NET SignalR JavaScript Library v2.0.3
 * http://signalr.net/
 *
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *
 */ /// <reference path="Scripts/jquery-1.6.4.js" />
"use strict";(function($,window,undefined){"use strict";var resources={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting."};if(typeof $ !== "function"){ // no jQuery!
throw new Error(resources.nojQuery);}var signalR,_connection,_pageLoaded=window.document.readyState === "complete",_pageWindow=$(window),_negotiateAbortText="__Negotiate Aborted__",events={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},ajaxDefaults={processData:true,timeout:null,async:true,global:false,cache:false},_log=function _log(msg,logging){if(logging === false){return;}var m;if(typeof window.console === "undefined"){return;}m = "[" + new Date().toTimeString() + "] SignalR: " + msg;if(window.console.debug){window.console.debug(m);}else if(window.console.log){window.console.log(m);}},changeState=function changeState(connection,expectedState,newState){if(expectedState === connection.state){connection.state = newState;$(connection).triggerHandler(events.onStateChanged,[{oldState:expectedState,newState:newState}]);return true;}return false;},isDisconnecting=function isDisconnecting(connection){return connection.state === signalR.connectionState.disconnected;},configureStopReconnectingTimeout=function configureStopReconnectingTimeout(connection){var stopReconnectingTimeout,onReconnectTimeout; // Check if this connection has already been configured to stop reconnecting after a specified timeout.
// Without this check if a connection is stopped then started events will be bound multiple times.
if(!connection._.configuredStopReconnectingTimeout){onReconnectTimeout = function(connection){connection.log("Couldn't reconnect within the configured timeout (" + connection.disconnectTimeout + "ms), disconnecting.");connection.stop( /* async */false, /* notifyServer */false);};connection.reconnecting(function(){var connection=this; // Guard against state changing in a previous user defined even handler
if(connection.state === signalR.connectionState.reconnecting){stopReconnectingTimeout = window.setTimeout(function(){onReconnectTimeout(connection);},connection.disconnectTimeout);}});connection.stateChanged(function(data){if(data.oldState === signalR.connectionState.reconnecting){ // Clear the pending reconnect timeout check
window.clearTimeout(stopReconnectingTimeout);}});connection._.configuredStopReconnectingTimeout = true;}};signalR = function(url,qs,logging){ /// <summary>Creates a new SignalR connection for the given url</summary>
/// <param name="url" type="String">The URL of the long polling endpoint</param>
/// <param name="qs" type="Object">
///     [Optional] Custom querystring parameters to add to the connection URL.
///     If an object, every non-function member will be added to the querystring.
///     If a string, it's added to the QS as specified.
/// </param>
/// <param name="logging" type="Boolean">
///     [Optional] A flag indicating whether connection logging is enabled to the browser
///     console/log. Defaults to false.
/// </param>
return new signalR.fn.init(url,qs,logging);};signalR._ = {defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:(function(){var version,matches;if(window.navigator.appName === 'Microsoft Internet Explorer'){ // Check if the user agent has the pattern "MSIE (one or more numbers).(one or more numbers)";
matches = /MSIE ([0-9]+\.[0-9]+)/.exec(window.navigator.userAgent);if(matches){version = window.parseFloat(matches[1]);}} // undefined value means not IE
return version;})(),error:function error(message,source,context){var e=new Error(message);e.source = source;if(typeof context !== "undefined"){e.context = context;}return e;},transportError:function transportError(message,transport,source,context){var e=this.error(message,source,context);e.transport = transport?transport.name:undefined;return e;},format:function format(){ /// <summary>Usage: format("Hi {0}, you are {1}!", "Foo", 100) </summary>
var s=arguments[0];for(var i=0;i < arguments.length - 1;i++) {s = s.replace("{" + i + "}",arguments[i + 1]);}return s;},firefoxMajorVersion:function firefoxMajorVersion(userAgent){ // Firefox user agents: http://useragentstring.com/pages/Firefox/
var matches=userAgent.match(/Firefox\/(\d+)/);if(!matches || !matches.length || matches.length < 2){return 0;}return parseInt(matches[1],10 /* radix */);},configurePingInterval:function configurePingInterval(connection){var config=connection._.config,onFail=function onFail(error){$(connection).triggerHandler(events.onError,[error]);};if(config && !connection._.pingIntervalId && config.pingInterval){connection._.pingIntervalId = window.setInterval(function(){signalR.transports._logic.pingServer(connection).fail(onFail);},config.pingInterval);}}};signalR.events = events;signalR.resources = resources;signalR.ajaxDefaults = ajaxDefaults;signalR.changeState = changeState;signalR.isDisconnecting = isDisconnecting;signalR.connectionState = {connecting:0,connected:1,reconnecting:2,disconnected:4};signalR.hub = {start:function start(){ // This will get replaced with the real hub connection start method when hubs is referenced correctly
throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.");}};_pageWindow.load(function(){_pageLoaded = true;});function validateTransport(requestedTransport,connection){ /// <summary>Validates the requested transport by cross checking it with the pre-defined signalR.transports</summary>
/// <param name="requestedTransport" type="Object">The designated transports that the user has specified.</param>
/// <param name="connection" type="signalR">The connection that will be using the requested transports.  Used for logging purposes.</param>
/// <returns type="Object" />
if($.isArray(requestedTransport)){ // Go through transport array and remove an "invalid" tranports
for(var i=requestedTransport.length - 1;i >= 0;i--) {var transport=requestedTransport[i];if($.type(transport) !== "string" || !signalR.transports[transport]){connection.log("Invalid transport: " + transport + ", removing it from the transports list.");requestedTransport.splice(i,1);}} // Verify we still have transports left, if we dont then we have invalid transports
if(requestedTransport.length === 0){connection.log("No transports remain within the specified transport array.");requestedTransport = null;}}else if(!signalR.transports[requestedTransport] && requestedTransport !== "auto"){connection.log("Invalid transport: " + requestedTransport.toString() + ".");requestedTransport = null;}else if(requestedTransport === "auto" && signalR._.ieVersion <= 8){ // If we're doing an auto transport and we're IE8 then force longPolling, #1764
return ["longPolling"];}return requestedTransport;}function getDefaultPort(protocol){if(protocol === "http:"){return 80;}else if(protocol === "https:"){return 443;}}function addDefaultPort(protocol,url){ // Remove ports  from url.  We have to check if there's a / or end of line
// following the port in order to avoid removing ports such as 8080.
if(url.match(/:\d+$/)){return url;}else {return url + ":" + getDefaultPort(protocol);}}function ConnectingMessageBuffer(connection,drainCallback){var that=this,buffer=[];that.tryBuffer = function(message){if(connection.state === $.signalR.connectionState.connecting){buffer.push(message);return true;}return false;};that.drain = function(){ // Ensure that the connection is connected when we drain (do not want to drain while a connection is not active)
if(connection.state === $.signalR.connectionState.connected){while(buffer.length > 0) {drainCallback(buffer.shift());}}};that.clear = function(){buffer = [];};}signalR.fn = signalR.prototype = {init:function init(url,qs,logging){var $connection=$(this);this.url = url;this.qs = qs;this._ = {keepAliveData:{},connectingMessageBuffer:new ConnectingMessageBuffer(this,function(message){$connection.triggerHandler(events.onReceived,[message]);}),onFailedTimeoutHandle:null,lastMessageAt:new Date().getTime(),lastActiveAt:new Date().getTime(),beatInterval:5000, // Default value, will only be overridden if keep alive is enabled,
beatHandle:null,totalTransportConnectTimeout:0 // This will be the sum of the TransportConnectTimeout sent in response to negotiate and connection.transportConnectTimeout
};if(typeof logging === "boolean"){this.logging = logging;}},_parseResponse:function _parseResponse(response){var that=this;if(!response){return response;}else if(typeof response === "string"){return that.json.parse(response);}else {return response;}},json:window.JSON,isCrossDomain:function isCrossDomain(url,against){ /// <summary>Checks if url is cross domain</summary>
/// <param name="url" type="String">The base URL</param>
/// <param name="against" type="Object">
///     An optional argument to compare the URL against, if not specified it will be set to window.location.
///     If specified it must contain a protocol and a host property.
/// </param>
var link;url = $.trim(url);against = against || window.location;if(url.indexOf("http") !== 0){return false;} // Create an anchor tag.
link = window.document.createElement("a");link.href = url; // When checking for cross domain we have to special case port 80 because the window.location will remove the 
return link.protocol + addDefaultPort(link.protocol,link.host) !== against.protocol + addDefaultPort(against.protocol,against.host);},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:false,state:signalR.connectionState.disconnected,clientProtocol:"1.3",reconnectDelay:2000,transportConnectTimeout:0,disconnectTimeout:30000, // This should be set by the server in response to the negotiate request (30s default)
reconnectWindow:30000, // This should be set by the server in response to the negotiate request 
keepAliveWarnAt:2 / 3, // Warn user of slow connection if we breach the X% mark of the keep alive timeout
start:function start(options,callback){ /// <summary>Starts the connection</summary>
/// <param name="options" type="Object">Options map</param>
/// <param name="callback" type="Function">A callback function to execute when the connection has started</param>
var connection=this,config={pingInterval:300000,waitForPageLoad:true,transport:"auto",jsonp:false},initialize,deferred=connection._deferral || $.Deferred(), // Check to see if there is a pre-existing deferral that's being built on, if so we want to keep using it
parser=window.document.createElement("a"); // Persist the deferral so that if start is called multiple times the same deferral is used.
connection._deferral = deferred;if(!connection.json){ // no JSON!
throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");}if($.type(options) === "function"){ // Support calling with single callback parameter
callback = options;}else if($.type(options) === "object"){$.extend(config,options);if($.type(config.callback) === "function"){callback = config.callback;}}config.transport = validateTransport(config.transport,connection); // If the transport is invalid throw an error and abort start
if(!config.transport){throw new Error("SignalR: Invalid transport(s) specified, aborting start.");}connection._.config = config; // Check to see if start is being called prior to page load
// If waitForPageLoad is true we then want to re-direct function call to the window load event
if(!_pageLoaded && config.waitForPageLoad === true){connection._.deferredStartHandler = function(){connection.start(options,callback);};_pageWindow.bind("load",connection._.deferredStartHandler);return deferred.promise();} // If we're already connecting just return the same deferral as the original connection start
if(connection.state === signalR.connectionState.connecting){return deferred.promise();}else if(changeState(connection,signalR.connectionState.disconnected,signalR.connectionState.connecting) === false){ // We're not connecting so try and transition into connecting.
// If we fail to transition then we're either in connected or reconnecting.
deferred.resolve(connection);return deferred.promise();}configureStopReconnectingTimeout(connection); // Resolve the full url
parser.href = connection.url;if(!parser.protocol || parser.protocol === ":"){connection.protocol = window.document.location.protocol;connection.host = window.document.location.host;connection.baseUrl = connection.protocol + "//" + connection.host;}else {connection.protocol = parser.protocol;connection.host = parser.host;connection.baseUrl = parser.protocol + "//" + parser.host;} // Set the websocket protocol
connection.wsProtocol = connection.protocol === "https:"?"wss://":"ws://"; // If jsonp with no/auto transport is specified, then set the transport to long polling
// since that is the only transport for which jsonp really makes sense.
// Some developers might actually choose to specify jsonp for same origin requests
// as demonstrated by Issue #623.
if(config.transport === "auto" && config.jsonp === true){config.transport = "longPolling";} // If the url is protocol relative, prepend the current windows protocol to the url. 
if(connection.url.indexOf("//") === 0){connection.url = window.location.protocol + connection.url;connection.log("Protocol relative URL detected, normalizing it to '" + connection.url + "'.");}if(this.isCrossDomain(connection.url)){connection.log("Auto detected cross domain url.");if(config.transport === "auto"){ // TODO: Support XDM with foreverFrame
config.transport = ["webSockets","serverSentEvents","longPolling"];}if(typeof config.withCredentials === "undefined"){config.withCredentials = true;} // Determine if jsonp is the only choice for negotiation, ajaxSend and ajaxAbort.
// i.e. if the browser doesn't supports CORS
// If it is, ignore any preference to the contrary, and switch to jsonp.
if(!config.jsonp){config.jsonp = !$.support.cors;if(config.jsonp){connection.log("Using jsonp because this browser doesn't support CORS.");}}connection.contentType = signalR._.defaultContentType;}connection.withCredentials = config.withCredentials;connection.ajaxDataType = config.jsonp?"jsonp":"text";$(connection).bind(events.onStart,function(e,data){if($.type(callback) === "function"){callback.call(connection);}deferred.resolve(connection);});initialize = function(transports,index){var noTransportError=signalR._.error(resources.noTransportOnInit);index = index || 0;if(index >= transports.length){ // No transport initialized successfully
$(connection).triggerHandler(events.onError,[noTransportError]);deferred.reject(noTransportError); // Stop the connection if it has connected and move it into the disconnected state
connection.stop();return;} // The connection was aborted
if(connection.state === signalR.connectionState.disconnected){return;}var transportName=transports[index],transport=signalR.transports[transportName],initializationComplete=false,onFailed=function onFailed(){ // Check if we've already triggered onFailed, onStart
if(!initializationComplete){initializationComplete = true;window.clearTimeout(connection._.onFailedTimeoutHandle);transport.stop(connection);initialize(transports,index + 1);}};connection.transport = transport;try{connection._.onFailedTimeoutHandle = window.setTimeout(function(){connection.log(transport.name + " timed out when trying to connect.");onFailed();},connection._.totalTransportConnectTimeout);transport.start(connection,function(){ // success
// Firefox 11+ doesn't allow sync XHR withCredentials: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#withCredentials
var isFirefox11OrGreater=signalR._.firefoxMajorVersion(window.navigator.userAgent) >= 11,asyncAbort=!!connection.withCredentials && isFirefox11OrGreater; // The connection was aborted while initializing transports
if(connection.state === signalR.connectionState.disconnected){return;}if(!initializationComplete){initializationComplete = true;window.clearTimeout(connection._.onFailedTimeoutHandle);if(transport.supportsKeepAlive && connection._.keepAliveData.activated){signalR.transports._logic.monitorKeepAlive(connection);}signalR.transports._logic.startHeartbeat(connection); // Used to ensure low activity clients maintain their authentication.
// Must be configured once a transport has been decided to perform valid ping requests.
signalR._.configurePingInterval(connection);changeState(connection,signalR.connectionState.connecting,signalR.connectionState.connected); // Drain any incoming buffered messages (messages that came in prior to connect)
connection._.connectingMessageBuffer.drain();$(connection).triggerHandler(events.onStart); // wire the stop handler for when the user leaves the page
_pageWindow.bind("unload",function(){connection.log("Window unloading, stopping the connection.");connection.stop(asyncAbort);});if(isFirefox11OrGreater){ // Firefox does not fire cross-domain XHRs in the normal unload handler on tab close.
// #2400
_pageWindow.bind("beforeunload",function(){ // If connection.stop() runs runs in beforeunload and fails, it will also fail
// in unload unless connection.stop() runs after a timeout.
window.setTimeout(function(){connection.stop(asyncAbort);},0);});}}},onFailed);}catch(error) {connection.log(transport.name + " transport threw '" + error.message + "' when attempting to start.");onFailed();}};var url=connection.url + "/negotiate",onFailed=function onFailed(error,connection){var err=signalR._.error(resources.errorOnNegotiate,error,connection._.negotiateRequest);$(connection).triggerHandler(events.onError,err);deferred.reject(err); // Stop the connection if negotiate failed
connection.stop();};$(connection).triggerHandler(events.onStarting);url = signalR.transports._logic.prepareQueryString(connection,url); // Add the client version to the negotiate request.  We utilize the same addQs method here
// so that it can append the clientVersion appropriately to the URL
url = signalR.transports._logic.addQs(url,{clientProtocol:connection.clientProtocol});connection.log("Negotiating with '" + url + "'."); // Save the ajax negotiate request object so we can abort it if stop is called while the request is in flight.
connection._.negotiateRequest = $.ajax($.extend({},$.signalR.ajaxDefaults,{xhrFields:{withCredentials:connection.withCredentials},url:url,type:"GET",contentType:connection.contentType,data:{},dataType:connection.ajaxDataType,error:function error(_error,statusText){ // We don't want to cause any errors if we're aborting our own negotiate request.
if(statusText !== _negotiateAbortText){onFailed(_error,connection);}else { // This rejection will noop if the deferred has already been resolved or rejected.
deferred.reject(signalR._.error(resources.stoppedWhileNegotiating,null, /* error */connection._.negotiateRequest));}},success:function success(result){var res,keepAliveData,protocolError,transports=[],supportedTransports=[];try{res = connection._parseResponse(result);}catch(error) {onFailed(signalR._.error(resources.errorParsingNegotiateResponse,error),connection);return;}keepAliveData = connection._.keepAliveData;connection.appRelativeUrl = res.Url;connection.id = res.ConnectionId;connection.token = res.ConnectionToken;connection.webSocketServerUrl = res.WebSocketServerUrl; // Once the server has labeled the PersistentConnection as Disconnected, we should stop attempting to reconnect
// after res.DisconnectTimeout seconds.
connection.disconnectTimeout = res.DisconnectTimeout * 1000; // in ms
// Add the TransportConnectTimeout from the response to the transportConnectTimeout from the client to calculate the total timeout
connection._.totalTransportConnectTimeout = connection.transportConnectTimeout + res.TransportConnectTimeout * 1000; // If we have a keep alive
if(res.KeepAliveTimeout){ // Register the keep alive data as activated
keepAliveData.activated = true; // Timeout to designate when to force the connection into reconnecting converted to milliseconds
keepAliveData.timeout = res.KeepAliveTimeout * 1000; // Timeout to designate when to warn the developer that the connection may be dead or is not responding.
keepAliveData.timeoutWarning = keepAliveData.timeout * connection.keepAliveWarnAt; // Instantiate the frequency in which we check the keep alive.  It must be short in order to not miss/pick up any changes
connection._.beatInterval = (keepAliveData.timeout - keepAliveData.timeoutWarning) / 3;}else {keepAliveData.activated = false;}connection.reconnectWindow = connection.disconnectTimeout + (keepAliveData.timeout || 0);if(!res.ProtocolVersion || res.ProtocolVersion !== connection.clientProtocol){protocolError = signalR._.error(signalR._.format(resources.protocolIncompatible,connection.clientProtocol,res.ProtocolVersion));$(connection).triggerHandler(events.onError,[protocolError]);deferred.reject(protocolError);return;}$.each(signalR.transports,function(key){if(key.indexOf("_") === 0 || key === "webSockets" && !res.TryWebSockets){return true;}supportedTransports.push(key);});if($.isArray(config.transport)){$.each(config.transport,function(_,transport){if($.inArray(transport,supportedTransports) >= 0){transports.push(transport);}});}else if(config.transport === "auto"){transports = supportedTransports;}else if($.inArray(config.transport,supportedTransports) >= 0){transports.push(config.transport);}initialize(transports);}}));return deferred.promise();},starting:function starting(callback){ /// <summary>Adds a callback that will be invoked before anything is sent over the connection</summary>
/// <param name="callback" type="Function">A callback function to execute before the connection is fully instantiated.</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onStarting,function(e,data){callback.call(connection);});return connection;},send:function send(data){ /// <summary>Sends data over the connection</summary>
/// <param name="data" type="String">The data to send over the connection</param>
/// <returns type="signalR" />
var connection=this;if(connection.state === signalR.connectionState.disconnected){ // Connection hasn't been started yet
throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");}if(connection.state === signalR.connectionState.connecting){ // Connection hasn't been started yet
throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");}connection.transport.send(connection,data); // REVIEW: Should we return deferred here?
return connection;},received:function received(callback){ /// <summary>Adds a callback that will be invoked after anything is received over the connection</summary>
/// <param name="callback" type="Function">A callback function to execute when any data is received on the connection</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onReceived,function(e,data){callback.call(connection,data);});return connection;},stateChanged:function stateChanged(callback){ /// <summary>Adds a callback that will be invoked when the connection state changes</summary>
/// <param name="callback" type="Function">A callback function to execute when the connection state changes</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onStateChanged,function(e,data){callback.call(connection,data);});return connection;},error:function error(callback){ /// <summary>Adds a callback that will be invoked after an error occurs with the connection</summary>
/// <param name="callback" type="Function">A callback function to execute when an error occurs on the connection</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onError,function(e,errorData,sendData){ // In practice 'errorData' is the SignalR built error object.
// In practice 'sendData' is undefined for all error events except those triggered by
// 'ajaxSend' and 'webSockets.send'.'sendData' is the original send payload.
callback.call(connection,errorData,sendData);});return connection;},disconnected:function disconnected(callback){ /// <summary>Adds a callback that will be invoked when the client disconnects</summary>
/// <param name="callback" type="Function">A callback function to execute when the connection is broken</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onDisconnect,function(e,data){callback.call(connection);});return connection;},connectionSlow:function connectionSlow(callback){ /// <summary>Adds a callback that will be invoked when the client detects a slow connection</summary>
/// <param name="callback" type="Function">A callback function to execute when the connection is slow</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onConnectionSlow,function(e,data){callback.call(connection);});return connection;},reconnecting:function reconnecting(callback){ /// <summary>Adds a callback that will be invoked when the underlying transport begins reconnecting</summary>
/// <param name="callback" type="Function">A callback function to execute when the connection enters a reconnecting state</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onReconnecting,function(e,data){callback.call(connection);});return connection;},reconnected:function reconnected(callback){ /// <summary>Adds a callback that will be invoked when the underlying transport reconnects</summary>
/// <param name="callback" type="Function">A callback function to execute when the connection is restored</param>
/// <returns type="signalR" />
var connection=this;$(connection).bind(events.onReconnect,function(e,data){callback.call(connection);});return connection;},stop:function stop(async,notifyServer){ /// <summary>Stops listening</summary>
/// <param name="async" type="Boolean">Whether or not to asynchronously abort the connection</param>
/// <param name="notifyServer" type="Boolean">Whether we want to notify the server that we are aborting the connection</param>
/// <returns type="signalR" />
var connection=this, // Save deferral because this is always cleaned up
deferral=connection._deferral; // Verify that we've bound a load event.
if(connection._.deferredStartHandler){ // Unbind the event.
_pageWindow.unbind("load",connection._.deferredStartHandler);} // Always clean up private non-timeout based state.
delete connection._deferral;delete connection._.config;delete connection._.deferredStartHandler; // This needs to be checked despite the connection state because a connection start can be deferred until page load.
// If we've deferred the start due to a page load we need to unbind the "onLoad" -> start event.
if(!_pageLoaded && (!connection._.config || connection._.config.waitForPageLoad === true)){connection.log("Stopping connection prior to negotiate."); // If we have a deferral we should reject it
if(deferral){deferral.reject(signalR._.error(resources.stoppedWhileLoading));} // Short-circuit because the start has not been fully started.
return;}if(connection.state === signalR.connectionState.disconnected){return;}connection.log("Stopping connection.");changeState(connection,connection.state,signalR.connectionState.disconnected); // Clear this no matter what
window.clearTimeout(connection._.beatHandle);window.clearTimeout(connection._.onFailedTimeoutHandle);window.clearInterval(connection._.pingIntervalId);if(connection.transport){connection.transport.stop(connection);if(notifyServer !== false){connection.transport.abort(connection,async);}if(connection.transport.supportsKeepAlive && connection._.keepAliveData.activated){signalR.transports._logic.stopMonitoringKeepAlive(connection);}connection.transport = null;}if(connection._.negotiateRequest){ // If the negotiation request has already completed this will noop.
connection._.negotiateRequest.abort(_negotiateAbortText);delete connection._.negotiateRequest;} // Trigger the disconnect event
$(connection).triggerHandler(events.onDisconnect);delete connection.messageId;delete connection.groupsToken;delete connection.id;delete connection._.pingIntervalId;delete connection._.lastMessageAt;delete connection._.lastActiveAt; // Clear out our message buffer
connection._.connectingMessageBuffer.clear();return connection;},log:function log(msg){_log(msg,this.logging);}};signalR.fn.init.prototype = signalR.fn;signalR.noConflict = function(){ /// <summary>Reinstates the original value of $.connection and returns the signalR object for manual assignment</summary>
/// <returns type="signalR" />
if($.connection === signalR){$.connection = _connection;}return signalR;};if($.connection){_connection = $.connection;}$.connection = $.signalR = signalR;})(window.jQuery,window); /* jquery.signalR.transports.common.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.core.js" />
(function($,window,undefined){"use strict";var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic;signalR.transports = {};function beat(connection){if(connection._.keepAliveData.monitoring){checkIfAlive(connection);} // Ensure that we successfully marked active before continuing the heartbeat.
if(transportLogic.markActive(connection)){connection._.beatHandle = window.setTimeout(function(){beat(connection);},connection._.beatInterval);}}function checkIfAlive(connection){var keepAliveData=connection._.keepAliveData,timeElapsed; // Only check if we're connected
if(connection.state === signalR.connectionState.connected){timeElapsed = new Date().getTime() - connection._.lastMessageAt; // Check if the keep alive has completely timed out
if(timeElapsed >= keepAliveData.timeout){connection.log("Keep alive timed out.  Notifying transport that connection has been lost."); // Notify transport that the connection has been lost
connection.transport.lostConnection(connection);}else if(timeElapsed >= keepAliveData.timeoutWarning){ // This is to assure that the user only gets a single warning
if(!keepAliveData.userNotified){connection.log("Keep alive has been missed, connection may be dead/slow.");$(connection).triggerHandler(events.onConnectionSlow);keepAliveData.userNotified = true;}}else {keepAliveData.userNotified = false;}}}function addConnectionData(url,connectionData){var appender=url.indexOf("?") !== -1?"&":"?";if(connectionData){url += appender + "connectionData=" + window.encodeURIComponent(connectionData);}return url;}transportLogic = signalR.transports._logic = {pingServer:function pingServer(connection){ /// <summary>Pings the server</summary>
/// <param name="connection" type="signalr">Connection associated with the server ping</param>
/// <returns type="signalR" />
var url,deferral=$.Deferred(),xhr;if(connection.transport){url = connection.url + "/ping";url = transportLogic.addQs(url,connection.qs);xhr = $.ajax($.extend({},$.signalR.ajaxDefaults,{xhrFields:{withCredentials:connection.withCredentials},url:url,type:"GET",contentType:connection.contentType,data:{},dataType:connection.ajaxDataType,success:function success(result){var data;try{data = connection._parseResponse(result);}catch(error) {deferral.reject(signalR._.transportError(signalR.resources.pingServerFailedParse,connection.transport,error,xhr));connection.stop();return;}if(data.Response === "pong"){deferral.resolve();}else {deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedInvalidResponse,result.responseText),connection.transport,null, /* error */xhr));}},error:function error(_error2){if(_error2.status === 401 || _error2.status === 403){deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedStatusCode,_error2.status),connection.transport,_error2,xhr));connection.stop();}else {deferral.reject(signalR._.transportError(signalR.resources.pingServerFailed,connection.transport,_error2,xhr));}}}));}else {deferral.reject(signalR._.transportError(signalR.resources.noConnectionTransport,connection.transport));}return deferral.promise();},prepareQueryString:function prepareQueryString(connection,url){url = transportLogic.addQs(url,connection.qs);return addConnectionData(url,connection.data);},addQs:function addQs(url,qs){var appender=url.indexOf("?") !== -1?"&":"?",firstChar;if(!qs){return url;}if(typeof qs === "object"){return url + appender + $.param(qs);}if(typeof qs === "string"){firstChar = qs.charAt(0);if(firstChar === "?" || firstChar === "&"){appender = "";}return url + appender + qs;}throw new Error("Query string property must be either a string or object.");},getUrl:function getUrl(connection,transport,reconnecting,poll){ /// <summary>Gets the url for making a GET based connect request</summary>
var baseUrl=transport === "webSockets"?"":connection.baseUrl,url=baseUrl + connection.appRelativeUrl,qs="transport=" + transport + "&connectionToken=" + window.encodeURIComponent(connection.token);if(connection.groupsToken){qs += "&groupsToken=" + window.encodeURIComponent(connection.groupsToken);}if(!reconnecting){url += "/connect";}else {if(poll){ // longPolling transport specific
url += "/poll";}else {url += "/reconnect";}if(connection.messageId){qs += "&messageId=" + window.encodeURIComponent(connection.messageId);}}url += "?" + qs;url = transportLogic.prepareQueryString(connection,url);url += "&tid=" + Math.floor(Math.random() * 11);return url;},maximizePersistentResponse:function maximizePersistentResponse(minPersistentResponse){return {MessageId:minPersistentResponse.C,Messages:minPersistentResponse.M,Initialized:typeof minPersistentResponse.S !== "undefined"?true:false,Disconnect:typeof minPersistentResponse.D !== "undefined"?true:false,ShouldReconnect:typeof minPersistentResponse.T !== "undefined"?true:false,LongPollDelay:minPersistentResponse.L,GroupsToken:minPersistentResponse.G};},updateGroups:function updateGroups(connection,groupsToken){if(groupsToken){connection.groupsToken = groupsToken;}},stringifySend:function stringifySend(connection,message){if(typeof message === "string" || typeof message === "undefined" || message === null){return message;}return connection.json.stringify(message);},ajaxSend:function ajaxSend(connection,data){var payload=transportLogic.stringifySend(connection,data),url=connection.url + "/send" + "?transport=" + connection.transport.name + "&connectionToken=" + window.encodeURIComponent(connection.token),xhr,onFail=function onFail(error,connection){$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.sendFailed,connection.transport,error,xhr),data]);};url = transportLogic.prepareQueryString(connection,url);xhr = $.ajax($.extend({},$.signalR.ajaxDefaults,{xhrFields:{withCredentials:connection.withCredentials},url:url,type:connection.ajaxDataType === "jsonp"?"GET":"POST",contentType:signalR._.defaultContentType,dataType:connection.ajaxDataType,data:{data:payload},success:function success(result){var res;if(result){try{res = connection._parseResponse(result);}catch(error) {onFail(error,connection);connection.stop();return;}transportLogic.triggerReceived(connection,res);}},error:function error(_error3,textStatus){if(textStatus === "abort" || textStatus === "parsererror"){ // The parsererror happens for sends that don't return any data, and hence
// don't write the jsonp callback to the response. This is harder to fix on the server
// so just hack around it on the client for now.
return;}onFail(_error3,connection);}}));return xhr;},ajaxAbort:function ajaxAbort(connection,async){if(typeof connection.transport === "undefined"){return;} // Async by default unless explicitly overidden
async = typeof async === "undefined"?true:async;var url=connection.url + "/abort" + "?transport=" + connection.transport.name + "&connectionToken=" + window.encodeURIComponent(connection.token);url = transportLogic.prepareQueryString(connection,url);$.ajax($.extend({},$.signalR.ajaxDefaults,{xhrFields:{withCredentials:connection.withCredentials},url:url,async:async,timeout:1000,type:"POST",contentType:connection.contentType,dataType:connection.ajaxDataType,data:{}}));connection.log("Fired ajax abort async = " + async + ".");},tryInitialize:function tryInitialize(persistentResponse,onInitialized){if(persistentResponse.Initialized){onInitialized();}},triggerReceived:function triggerReceived(connection,data){if(!connection._.connectingMessageBuffer.tryBuffer(data)){$(connection).triggerHandler(events.onReceived,[data]);}},processMessages:function processMessages(connection,minData,onInitialized){var data; // Update the last message time stamp
transportLogic.markLastMessage(connection);if(minData){data = transportLogic.maximizePersistentResponse(minData);if(data.Disconnect){connection.log("Disconnect command received from server."); // Disconnected by the server
connection.stop(false,false);return;}transportLogic.updateGroups(connection,data.GroupsToken);if(data.MessageId){connection.messageId = data.MessageId;}if(data.Messages){$.each(data.Messages,function(index,message){transportLogic.triggerReceived(connection,message);});transportLogic.tryInitialize(data,onInitialized);}}},monitorKeepAlive:function monitorKeepAlive(connection){var keepAliveData=connection._.keepAliveData; // If we haven't initiated the keep alive timeouts then we need to
if(!keepAliveData.monitoring){keepAliveData.monitoring = true;transportLogic.markLastMessage(connection); // Save the function so we can unbind it on stop
connection._.keepAliveData.reconnectKeepAliveUpdate = function(){ // Mark a new message so that keep alive doesn't time out connections
transportLogic.markLastMessage(connection);}; // Update Keep alive on reconnect
$(connection).bind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate);connection.log("Now monitoring keep alive with a warning timeout of " + keepAliveData.timeoutWarning + " and a connection lost timeout of " + keepAliveData.timeout + ".");}else {connection.log("Tried to monitor keep alive but it's already being monitored.");}},stopMonitoringKeepAlive:function stopMonitoringKeepAlive(connection){var keepAliveData=connection._.keepAliveData; // Only attempt to stop the keep alive monitoring if its being monitored
if(keepAliveData.monitoring){ // Stop monitoring
keepAliveData.monitoring = false; // Remove the updateKeepAlive function from the reconnect event
$(connection).unbind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate); // Clear all the keep alive data
connection._.keepAliveData = {};connection.log("Stopping the monitoring of the keep alive.");}},startHeartbeat:function startHeartbeat(connection){connection._.lastActiveAt = new Date().getTime();beat(connection);},markLastMessage:function markLastMessage(connection){connection._.lastMessageAt = new Date().getTime();},markActive:function markActive(connection){if(transportLogic.verifyLastActive(connection)){connection._.lastActiveAt = new Date().getTime();return true;}return false;},isConnectedOrReconnecting:function isConnectedOrReconnecting(connection){return connection.state === signalR.connectionState.connected || connection.state === signalR.connectionState.reconnecting;},ensureReconnectingState:function ensureReconnectingState(connection){if(changeState(connection,signalR.connectionState.connected,signalR.connectionState.reconnecting) === true){$(connection).triggerHandler(events.onReconnecting);}return connection.state === signalR.connectionState.reconnecting;},clearReconnectTimeout:function clearReconnectTimeout(connection){if(connection && connection._.reconnectTimeout){window.clearTimeout(connection._.reconnectTimeout);delete connection._.reconnectTimeout;}},verifyLastActive:function verifyLastActive(connection){if(new Date().getTime() - connection._.lastActiveAt >= connection.reconnectWindow){connection.log("There has not been an active server connection for an extended period of time. Stopping connection.");connection.stop();return false;}return true;},reconnect:function reconnect(connection,transportName){var transport=signalR.transports[transportName]; // We should only set a reconnectTimeout if we are currently connected
// and a reconnectTimeout isn't already set.
if(transportLogic.isConnectedOrReconnecting(connection) && !connection._.reconnectTimeout){ // Need to verify before the setTimeout occurs because an application sleep could occur during the setTimeout duration.
if(!transportLogic.verifyLastActive(connection)){return;}connection._.reconnectTimeout = window.setTimeout(function(){if(!transportLogic.verifyLastActive(connection)){return;}transport.stop(connection);if(transportLogic.ensureReconnectingState(connection)){connection.log(transportName + " reconnecting.");transport.start(connection);}},connection.reconnectDelay);}},handleParseFailure:function handleParseFailure(connection,result,error,onFailed,context){ // If we're in the initialization phase trigger onFailed, otherwise stop the connection.
if(connection.state === signalR.connectionState.connecting){connection.log("Failed to parse server response while attempting to connect.");onFailed();}else {$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR._.format(signalR.resources.parseFailed,result),connection.transport,error,context)]);connection.stop();}},foreverFrame:{count:0,connections:{}}};})(window.jQuery,window); /* jquery.signalR.transports.webSockets.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.transports.common.js" />
(function($,window,undefined){"use strict";var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic;signalR.transports.webSockets = {name:"webSockets",supportsKeepAlive:true,send:function send(connection,data){var payload=transportLogic.stringifySend(connection,data);try{connection.socket.send(payload);}catch(ex) {$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.webSocketsInvalidState,connection.transport,ex,connection.socket),data]);}},start:function start(connection,onSuccess,onFailed){var url,opened=false,that=this,reconnecting=!onSuccess,$connection=$(connection);if(!window.WebSocket){onFailed();return;}if(!connection.socket){if(connection.webSocketServerUrl){url = connection.webSocketServerUrl;}else {url = connection.wsProtocol + connection.host;}url += transportLogic.getUrl(connection,this.name,reconnecting);connection.log("Connecting to websocket endpoint '" + url + "'.");connection.socket = new window.WebSocket(url);connection.socket.onopen = function(){opened = true;connection.log("Websocket opened.");transportLogic.clearReconnectTimeout(connection);if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected) === true){$connection.triggerHandler(events.onReconnect);}};connection.socket.onclose = function(event){ // Only handle a socket close if the close is from the current socket.
// Sometimes on disconnect the server will push down an onclose event
// to an expired socket.
if(this === connection.socket){if(!opened){if(onFailed){onFailed();}else if(reconnecting){that.reconnect(connection);}return;}else if(typeof event.wasClean !== "undefined" && event.wasClean === false){ // Ideally this would use the websocket.onerror handler (rather than checking wasClean in onclose) but
// I found in some circumstances Chrome won't call onerror. This implementation seems to work on all browsers.
$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.webSocketClosed,connection.transport,event)]);connection.log("Unclean disconnect from websocket: " + event.reason || "[no reason given].");}else {connection.log("Websocket closed.");}that.reconnect(connection);}};connection.socket.onmessage = function(event){var data;try{data = connection._parseResponse(event.data);}catch(error) {transportLogic.handleParseFailure(connection,event.data,error,onFailed,event);return;}if(data){ // data.M is PersistentResponse.Messages
if($.isEmptyObject(data) || data.M){transportLogic.processMessages(connection,data,onSuccess);}else { // For websockets we need to trigger onReceived
// for callbacks to outgoing hub calls.
transportLogic.triggerReceived(connection,data);}}};}},reconnect:function reconnect(connection){transportLogic.reconnect(connection,this.name);},lostConnection:function lostConnection(connection){this.reconnect(connection);},stop:function stop(connection){ // Don't trigger a reconnect after stopping
transportLogic.clearReconnectTimeout(connection);if(connection.socket){connection.log("Closing the Websocket.");connection.socket.close();connection.socket = null;}},abort:function abort(connection,async){transportLogic.ajaxAbort(connection,async);}};})(window.jQuery,window); /* jquery.signalR.transports.serverSentEvents.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.transports.common.js" />
(function($,window,undefined){"use strict";var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic;signalR.transports.serverSentEvents = {name:"serverSentEvents",supportsKeepAlive:true,timeOut:3000,start:function start(connection,onSuccess,onFailed){var that=this,opened=false,$connection=$(connection),reconnecting=!onSuccess,url,reconnectTimeout;if(connection.eventSource){connection.log("The connection already has an event source. Stopping it.");connection.stop();}if(!window.EventSource){if(onFailed){connection.log("This browser doesn't support SSE.");onFailed();}return;}url = transportLogic.getUrl(connection,this.name,reconnecting);try{connection.log("Attempting to connect to SSE endpoint '" + url + "'.");connection.eventSource = new window.EventSource(url,{withCredentials:connection.withCredentials});}catch(e) {connection.log("EventSource failed trying to connect with error " + e.Message + ".");if(onFailed){ // The connection failed, call the failed callback
onFailed();}else {$connection.triggerHandler(events.onError,[signalR._.transportError(signalR.resources.eventSourceFailedToConnect,connection.transport,e)]);if(reconnecting){ // If we were reconnecting, rather than doing initial connect, then try reconnect again
that.reconnect(connection);}}return;}if(reconnecting){reconnectTimeout = window.setTimeout(function(){if(opened === false){ // If we're reconnecting and the event source is attempting to connect,
// don't keep retrying. This causes duplicate connections to spawn.
if(connection.eventSource.readyState !== window.EventSource.OPEN){ // If we were reconnecting, rather than doing initial connect, then try reconnect again
that.reconnect(connection);}}},that.timeOut);}connection.eventSource.addEventListener("open",function(e){connection.log("EventSource connected.");if(reconnectTimeout){window.clearTimeout(reconnectTimeout);}transportLogic.clearReconnectTimeout(connection);if(opened === false){opened = true;if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected) === true){$connection.triggerHandler(events.onReconnect);}}},false);connection.eventSource.addEventListener("message",function(e){var res; // process messages
if(e.data === "initialized"){return;}try{res = connection._parseResponse(e.data);}catch(error) {transportLogic.handleParseFailure(connection,e.data,error,onFailed,e);return;}transportLogic.processMessages(connection,res,onSuccess);},false);connection.eventSource.addEventListener("error",function(e){ // Only handle an error if the error is from the current Event Source.
// Sometimes on disconnect the server will push down an error event
// to an expired Event Source.
if(this !== connection.eventSource){return;}if(!opened){if(onFailed){onFailed();}return;}connection.log("EventSource readyState: " + connection.eventSource.readyState + ".");if(e.eventPhase === window.EventSource.CLOSED){ // We don't use the EventSource's native reconnect function as it
// doesn't allow us to change the URL when reconnecting. We need
// to change the URL to not include the /connect suffix, and pass
// the last message id we received.
connection.log("EventSource reconnecting due to the server connection ending.");that.reconnect(connection);}else { // connection error
connection.log("EventSource error.");$connection.triggerHandler(events.onError,[signalR._.transportError(signalR.resources.eventSourceError,connection.transport,e)]);}},false);},reconnect:function reconnect(connection){transportLogic.reconnect(connection,this.name);},lostConnection:function lostConnection(connection){this.reconnect(connection);},send:function send(connection,data){transportLogic.ajaxSend(connection,data);},stop:function stop(connection){ // Don't trigger a reconnect after stopping
transportLogic.clearReconnectTimeout(connection);if(connection && connection.eventSource){connection.log("EventSource calling close().");connection.eventSource.close();connection.eventSource = null;delete connection.eventSource;}},abort:function abort(connection,async){transportLogic.ajaxAbort(connection,async);}};})(window.jQuery,window); /* jquery.signalR.transports.foreverFrame.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.transports.common.js" />
(function($,window,undefined){"use strict";var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic,createFrame=function createFrame(){var frame=window.document.createElement("iframe");frame.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;");return frame;}, // Used to prevent infinite loading icon spins in older versions of ie
// We build this object inside a closure so we don't pollute the rest of   
// the foreverFrame transport with unnecessary functions/utilities.
loadPreventer=(function(){var loadingFixIntervalId=null,loadingFixInterval=1000,attachedTo=0;return {prevent:function prevent(){ // Prevent additional iframe removal procedures from newer browsers
if(signalR._.ieVersion <= 8){ // We only ever want to set the interval one time, so on the first attachedTo
if(attachedTo === 0){ // Create and destroy iframe every 3 seconds to prevent loading icon, super hacky
loadingFixIntervalId = window.setInterval(function(){var tempFrame=createFrame();window.document.body.appendChild(tempFrame);window.document.body.removeChild(tempFrame);tempFrame = null;},loadingFixInterval);}attachedTo++;}},cancel:function cancel(){ // Only clear the interval if there's only one more object that the loadPreventer is attachedTo
if(attachedTo === 1){window.clearInterval(loadingFixIntervalId);}if(attachedTo > 0){attachedTo--;}}};})();signalR.transports.foreverFrame = {name:"foreverFrame",supportsKeepAlive:true, // Added as a value here so we can create tests to verify functionality
iframeClearThreshold:50,start:function start(connection,onSuccess,onFailed){var that=this,frameId=transportLogic.foreverFrame.count += 1,url,frame=createFrame(),frameLoadHandler=function frameLoadHandler(){connection.log("Forever frame iframe finished loading and is no longer receiving messages.");that.reconnect(connection);};if(window.EventSource){ // If the browser supports SSE, don't use Forever Frame
if(onFailed){connection.log("This browser supports SSE, skipping Forever Frame.");onFailed();}return;}frame.setAttribute("data-signalr-connection-id",connection.id); // Start preventing loading icon
// This will only perform work if the loadPreventer is not attached to another connection.
loadPreventer.prevent(); // Build the url
url = transportLogic.getUrl(connection,this.name);url += "&frameId=" + frameId; // Set body prior to setting URL to avoid caching issues.
window.document.body.appendChild(frame);connection.log("Binding to iframe's load event.");if(frame.addEventListener){frame.addEventListener("load",frameLoadHandler,false);}else if(frame.attachEvent){frame.attachEvent("onload",frameLoadHandler);}frame.src = url;transportLogic.foreverFrame.connections[frameId] = connection;connection.frame = frame;connection.frameId = frameId;if(onSuccess){connection.onSuccess = function(){connection.log("Iframe transport started.");onSuccess();};}},reconnect:function reconnect(connection){var that=this; // Need to verify connection state and verify before the setTimeout occurs because an application sleep could occur during the setTimeout duration.
if(transportLogic.isConnectedOrReconnecting(connection) && transportLogic.verifyLastActive(connection)){window.setTimeout(function(){ // Verify that we're ok to reconnect.
if(!transportLogic.verifyLastActive(connection)){return;}if(connection.frame && transportLogic.ensureReconnectingState(connection)){var frame=connection.frame,src=transportLogic.getUrl(connection,that.name,true) + "&frameId=" + connection.frameId;connection.log("Updating iframe src to '" + src + "'.");frame.src = src;}},connection.reconnectDelay);}},lostConnection:function lostConnection(connection){this.reconnect(connection);},send:function send(connection,data){transportLogic.ajaxSend(connection,data);},receive:function receive(connection,data){var cw,body;transportLogic.processMessages(connection,data,connection.onSuccess); // Protect against connection stopping from a callback trigger within the processMessages above.
if(connection.state === $.signalR.connectionState.connected){ // Delete the script & div elements
connection.frameMessageCount = (connection.frameMessageCount || 0) + 1;if(connection.frameMessageCount > signalR.transports.foreverFrame.iframeClearThreshold){connection.frameMessageCount = 0;cw = connection.frame.contentWindow || connection.frame.contentDocument;if(cw && cw.document && cw.document.body){body = cw.document.body; // Remove all the child elements from the iframe's body to conserver memory
while(body.firstChild) {body.removeChild(body.firstChild);}}}}},stop:function stop(connection){var cw=null; // Stop attempting to prevent loading icon
loadPreventer.cancel();if(connection.frame){if(connection.frame.stop){connection.frame.stop();}else {try{cw = connection.frame.contentWindow || connection.frame.contentDocument;if(cw.document && cw.document.execCommand){cw.document.execCommand("Stop");}}catch(e) {connection.log("Error occured when stopping foreverFrame transport. Message = " + e.message + ".");}} // Ensure the iframe is where we left it
if(connection.frame.parentNode === window.document.body){window.document.body.removeChild(connection.frame);}delete transportLogic.foreverFrame.connections[connection.frameId];connection.frame = null;connection.frameId = null;delete connection.frame;delete connection.frameId;delete connection.onSuccess;delete connection.frameMessageCount;connection.log("Stopping forever frame.");}},abort:function abort(connection,async){transportLogic.ajaxAbort(connection,async);},getConnection:function getConnection(id){return transportLogic.foreverFrame.connections[id];},started:function started(connection){if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected) === true){ // If there's no onSuccess handler we assume this is a reconnect
$(connection).triggerHandler(events.onReconnect);}}};})(window.jQuery,window); /* jquery.signalR.transports.longPolling.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.transports.common.js" />
(function($,window,undefined){"use strict";var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,isDisconnecting=$.signalR.isDisconnecting,transportLogic=signalR.transports._logic;signalR.transports.longPolling = {name:"longPolling",supportsKeepAlive:false,reconnectDelay:3000,start:function start(connection,onSuccess,onFailed){ /// <summary>Starts the long polling connection</summary>
/// <param name="connection" type="signalR">The SignalR connection to start</param>
var that=this,_fireConnect=function fireConnect(){_fireConnect = $.noop;connection.log("LongPolling connected.");onSuccess(); // Reset onFailed to null because it shouldn't be called again
onFailed = null;},tryFailConnect=function tryFailConnect(){if(onFailed){onFailed();onFailed = null;connection.log("LongPolling failed to connect.");return true;}return false;},privateData=connection._,reconnectErrors=0,fireReconnected=function fireReconnected(instance){window.clearTimeout(privateData.reconnectTimeoutId);privateData.reconnectTimeoutId = null;if(changeState(instance,signalR.connectionState.reconnecting,signalR.connectionState.connected) === true){ // Successfully reconnected!
instance.log("Raising the reconnect event");$(instance).triggerHandler(events.onReconnect);}}, // 1 hour
maxFireReconnectedTimeout=3600000;if(connection.pollXhr){connection.log("Polling xhr requests already exists, aborting.");connection.stop();}connection.messageId = null;privateData.reconnectTimeoutId = null;privateData.pollTimeoutId = window.setTimeout(function(){(function poll(instance,raiseReconnect){var messageId=instance.messageId,connect=messageId === null,reconnecting=!connect,polling=!raiseReconnect,url=transportLogic.getUrl(instance,that.name,reconnecting,polling); // If we've disconnected during the time we've tried to re-instantiate the poll then stop.
if(isDisconnecting(instance) === true){return;}connection.log("Opening long polling request to '" + url + "'.");instance.pollXhr = $.ajax($.extend({},$.signalR.ajaxDefaults,{xhrFields:{withCredentials:connection.withCredentials},url:url,type:"GET",dataType:connection.ajaxDataType,contentType:connection.contentType,success:function success(result){var minData,delay=0,data,shouldReconnect;connection.log("Long poll complete."); // Reset our reconnect errors so if we transition into a reconnecting state again we trigger
// reconnected quickly
reconnectErrors = 0;try{minData = connection._parseResponse(result);}catch(error) {transportLogic.handleParseFailure(instance,result,error,tryFailConnect,instance.pollXhr);return;} // If there's currently a timeout to trigger reconnect, fire it now before processing messages
if(privateData.reconnectTimeoutId !== null){fireReconnected(instance);}if(minData){data = transportLogic.maximizePersistentResponse(minData);}transportLogic.processMessages(instance,minData,_fireConnect);if(data && $.type(data.LongPollDelay) === "number"){delay = data.LongPollDelay;}if(data && data.Disconnect){return;}if(isDisconnecting(instance) === true){return;}shouldReconnect = data && data.ShouldReconnect;if(shouldReconnect){ // Transition into the reconnecting state
// If this fails then that means that the user transitioned the connection into a invalid state in processMessages.
if(!transportLogic.ensureReconnectingState(instance)){return;}} // We never want to pass a raiseReconnect flag after a successful poll.  This is handled via the error function
if(delay > 0){privateData.pollTimeoutId = window.setTimeout(function(){poll(instance,shouldReconnect);},delay);}else {poll(instance,shouldReconnect);}},error:function error(data,textStatus){ // Stop trying to trigger reconnect, connection is in an error state
// If we're not in the reconnect state this will noop
window.clearTimeout(privateData.reconnectTimeoutId);privateData.reconnectTimeoutId = null;if(textStatus === "abort"){connection.log("Aborted xhr request.");return;}if(!tryFailConnect()){ // Increment our reconnect errors, we assume all errors to be reconnect errors
// In the case that it's our first error this will cause Reconnect to be fired
// after 1 second due to reconnectErrors being = 1.
reconnectErrors++;if(connection.state !== signalR.connectionState.reconnecting){connection.log("An error occurred using longPolling. Status = " + textStatus + ".  Response = " + data.responseText + ".");$(instance).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.longPollFailed,connection.transport,data,instance.pollXhr)]);} // We check the state here to verify that we're not in an invalid state prior to verifying Reconnect.
// If we're not in connected or reconnecting then the next ensureReconnectingState check will fail and will return.
// Therefore we don't want to change that failure code path.
if((connection.state === signalR.connectionState.connected || connection.state === signalR.connectionState.reconnecting) && !transportLogic.verifyLastActive(connection)){return;} // Transition into the reconnecting state
// If this fails then that means that the user transitioned the connection into the disconnected or connecting state within the above error handler trigger.
if(!transportLogic.ensureReconnectingState(instance)){return;} // Call poll with the raiseReconnect flag as true after the reconnect delay
privateData.pollTimeoutId = window.setTimeout(function(){poll(instance,true);},that.reconnectDelay);}}})); // This will only ever pass after an error has occured via the poll ajax procedure.
if(reconnecting && raiseReconnect === true){ // We wait to reconnect depending on how many times we've failed to reconnect.
// This is essentially a heuristic that will exponentially increase in wait time before
// triggering reconnected.  This depends on the "error" handler of Poll to cancel this 
// timeout if it triggers before the Reconnected event fires.
// The Math.min at the end is to ensure that the reconnect timeout does not overflow.
privateData.reconnectTimeoutId = window.setTimeout(function(){fireReconnected(instance);},Math.min(1000 * (Math.pow(2,reconnectErrors) - 1),maxFireReconnectedTimeout));}})(connection);},250); // Have to delay initial poll so Chrome doesn't show loader spinner in tab
},lostConnection:function lostConnection(connection){throw new Error("Lost Connection not handled for LongPolling");},send:function send(connection,data){transportLogic.ajaxSend(connection,data);},stop:function stop(connection){ /// <summary>Stops the long polling connection</summary>
/// <param name="connection" type="signalR">The SignalR connection to stop</param>
window.clearTimeout(connection._.pollTimeoutId);window.clearTimeout(connection._.reconnectTimeoutId);delete connection._.pollTimeoutId;delete connection._.reconnectTimeoutId;if(connection.pollXhr){connection.pollXhr.abort();connection.pollXhr = null;delete connection.pollXhr;}},abort:function abort(connection,async){transportLogic.ajaxAbort(connection,async);}};})(window.jQuery,window); /* jquery.signalR.hubs.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.core.js" />
(function($,window,undefined){"use strict";var eventNamespace=".hubProxy",signalR=$.signalR;function makeEventName(event){return event + eventNamespace;} // Equivalent to Array.prototype.map
function map(arr,fun,thisp){var i,length=arr.length,result=[];for(i = 0;i < length;i += 1) {if(arr.hasOwnProperty(i)){result[i] = fun.call(thisp,arr[i],i,arr);}}return result;}function getArgValue(a){return $.isFunction(a)?null:$.type(a) === "undefined"?null:a;}function hasMembers(obj){for(var key in obj) { // If we have any properties in our callback map then we have callbacks and can exit the loop via return
if(obj.hasOwnProperty(key)){return true;}}return false;}function clearInvocationCallbacks(connection,error){ /// <param name="connection" type="hubConnection" />
var callbacks=connection._.invocationCallbacks,callback;if(hasMembers(callbacks)){connection.log("Clearing hub invocation callbacks with error: " + error + ".");} // Reset the callback cache now as we have a local var referencing it
connection._.invocationCallbackId = 0;delete connection._.invocationCallbacks;connection._.invocationCallbacks = {}; // Loop over the callbacks and invoke them.
// We do this using a local var reference and *after* we've cleared the cache
// so that if a fail callback itself tries to invoke another method we don't 
// end up with its callback in the list we're looping over.
for(var callbackId in callbacks) {callback = callbacks[callbackId];callback.method.call(callback.scope,{E:error});}} // hubProxy
function hubProxy(hubConnection,hubName){ /// <summary>
///     Creates a new proxy object for the given hub connection that can be used to invoke
///     methods on server hubs and handle client method invocation requests from the server.
/// </summary>
return new hubProxy.fn.init(hubConnection,hubName);}hubProxy.fn = hubProxy.prototype = {init:function init(connection,hubName){this.state = {};this.connection = connection;this.hubName = hubName;this._ = {callbackMap:{}};},hasSubscriptions:function hasSubscriptions(){return hasMembers(this._.callbackMap);},on:function on(eventName,callback){ /// <summary>Wires up a callback to be invoked when a invocation request is received from the server hub.</summary>
/// <param name="eventName" type="String">The name of the hub event to register the callback for.</param>
/// <param name="callback" type="Function">The callback to be invoked.</param>
var that=this,callbackMap=that._.callbackMap; // Normalize the event name to lowercase
eventName = eventName.toLowerCase(); // If there is not an event registered for this callback yet we want to create its event space in the callback map.
if(!callbackMap[eventName]){callbackMap[eventName] = {};} // Map the callback to our encompassed function
callbackMap[eventName][callback] = function(e,data){callback.apply(that,data);};$(that).bind(makeEventName(eventName),callbackMap[eventName][callback]);return that;},off:function off(eventName,callback){ /// <summary>Removes the callback invocation request from the server hub for the given event name.</summary>
/// <param name="eventName" type="String">The name of the hub event to unregister the callback for.</param>
/// <param name="callback" type="Function">The callback to be invoked.</param>
var that=this,callbackMap=that._.callbackMap,callbackSpace; // Normalize the event name to lowercase
eventName = eventName.toLowerCase();callbackSpace = callbackMap[eventName]; // Verify that there is an event space to unbind
if(callbackSpace){ // Only unbind if there's an event bound with eventName and a callback with the specified callback
if(callbackSpace[callback]){$(that).unbind(makeEventName(eventName),callbackSpace[callback]); // Remove the callback from the callback map
delete callbackSpace[callback]; // Check if there are any members left on the event, if not we need to destroy it.
if(!hasMembers(callbackSpace)){delete callbackMap[eventName];}}else if(!callback){ // Check if we're removing the whole event and we didn't error because of an invalid callback
$(that).unbind(makeEventName(eventName));delete callbackMap[eventName];}}return that;},invoke:function invoke(methodName){ /// <summary>Invokes a server hub method with the given arguments.</summary>
/// <param name="methodName" type="String">The name of the server hub method.</param>
var that=this,connection=that.connection,args=$.makeArray(arguments).slice(1),argValues=map(args,getArgValue),data={H:that.hubName,M:methodName,A:argValues,I:connection._.invocationCallbackId},d=$.Deferred(),callback=function callback(minResult){var result=that._maximizeHubResponse(minResult),source,error; // Update the hub state
$.extend(that.state,result.State);if(result.Error){ // Server hub method threw an exception, log it & reject the deferred
if(result.StackTrace){connection.log(result.Error + "\n" + result.StackTrace + ".");} // result.ErrorData is only set if a HubException was thrown
source = result.IsHubException?"HubException":"Exception";error = signalR._.error(result.Error,source);error.data = result.ErrorData;connection.log(that.hubName + "." + methodName + " failed to execute. Error: " + error.message);d.rejectWith(that,[error]);}else { // Server invocation succeeded, resolve the deferred
connection.log("Invoked " + that.hubName + "." + methodName);d.resolveWith(that,[result.Result]);}};connection._.invocationCallbacks[connection._.invocationCallbackId.toString()] = {scope:that,method:callback};connection._.invocationCallbackId += 1;if(!$.isEmptyObject(that.state)){data.S = that.state;}connection.log("Invoking " + that.hubName + "." + methodName);connection.send(data);return d.promise();},_maximizeHubResponse:function _maximizeHubResponse(minHubResponse){return {State:minHubResponse.S,Result:minHubResponse.R,Id:minHubResponse.I,IsHubException:minHubResponse.H,Error:minHubResponse.E,StackTrace:minHubResponse.T,ErrorData:minHubResponse.D};}};hubProxy.fn.init.prototype = hubProxy.fn; // hubConnection
function hubConnection(url,options){ /// <summary>Creates a new hub connection.</summary>
/// <param name="url" type="String">[Optional] The hub route url, defaults to "/signalr".</param>
/// <param name="options" type="Object">[Optional] Settings to use when creating the hubConnection.</param>
var settings={qs:null,logging:false,useDefaultPath:true};$.extend(settings,options);if(!url || settings.useDefaultPath){url = (url || "") + "/signalr";}return new hubConnection.fn.init(url,settings);}hubConnection.fn = hubConnection.prototype = $.connection();hubConnection.fn.init = function(url,options){var settings={qs:null,logging:false,useDefaultPath:true},connection=this;$.extend(settings,options); // Call the base constructor
$.signalR.fn.init.call(connection,url,settings.qs,settings.logging); // Object to store hub proxies for this connection
connection.proxies = {};connection._.invocationCallbackId = 0;connection._.invocationCallbacks = {}; // Wire up the received handler
connection.received(function(minData){var data,proxy,dataCallbackId,callback,hubName,eventName;if(!minData){return;}if(typeof minData.I !== "undefined"){ // We received the return value from a server method invocation, look up callback by id and call it
dataCallbackId = minData.I.toString();callback = connection._.invocationCallbacks[dataCallbackId];if(callback){ // Delete the callback from the proxy
connection._.invocationCallbacks[dataCallbackId] = null;delete connection._.invocationCallbacks[dataCallbackId]; // Invoke the callback
callback.method.call(callback.scope,minData);}}else {data = this._maximizeClientHubInvocation(minData); // We received a client invocation request, i.e. broadcast from server hub
connection.log("Triggering client hub event '" + data.Method + "' on hub '" + data.Hub + "'."); // Normalize the names to lowercase
hubName = data.Hub.toLowerCase();eventName = data.Method.toLowerCase(); // Trigger the local invocation event
proxy = this.proxies[hubName]; // Update the hub state
$.extend(proxy.state,data.State);$(proxy).triggerHandler(makeEventName(eventName),[data.Args]);}});connection.error(function(errData,origData){var callbackId,callback;if(!origData){ // No original data passed so this is not a send error
return;}callbackId = origData.I;callback = connection._.invocationCallbacks[callbackId]; // Verify that there is a callback bound (could have been cleared)
if(callback){ // Delete the callback
connection._.invocationCallbacks[callbackId] = null;delete connection._.invocationCallbacks[callbackId]; // Invoke the callback with an error to reject the promise
callback.method.call(callback.scope,{E:errData});}});connection.reconnecting(function(){if(connection.transport && connection.transport.name === "webSockets"){clearInvocationCallbacks(connection,"Connection started reconnecting before invocation result was received.");}});connection.disconnected(function(){clearInvocationCallbacks(connection,"Connection was disconnected before invocation result was received.");});};hubConnection.fn._maximizeClientHubInvocation = function(minClientHubInvocation){return {Hub:minClientHubInvocation.H,Method:minClientHubInvocation.M,Args:minClientHubInvocation.A,State:minClientHubInvocation.S};};hubConnection.fn._registerSubscribedHubs = function(){ /// <summary>
///     Sets the starting event to loop through the known hubs and register any new hubs 
///     that have been added to the proxy.
/// </summary>
var connection=this;if(!connection._subscribedToHubs){connection._subscribedToHubs = true;connection.starting(function(){ // Set the connection's data object with all the hub proxies with active subscriptions.
// These proxies will receive notifications from the server.
var subscribedHubs=[];$.each(connection.proxies,function(key){if(this.hasSubscriptions()){subscribedHubs.push({name:key});connection.log("Client subscribed to hub '" + key + "'.");}});if(subscribedHubs.length === 0){connection.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");}connection.data = connection.json.stringify(subscribedHubs);});}};hubConnection.fn.createHubProxy = function(hubName){ /// <summary>
///     Creates a new proxy object for the given hub connection that can be used to invoke
///     methods on server hubs and handle client method invocation requests from the server.
/// </summary>
/// <param name="hubName" type="String">
///     The name of the hub on the server to create the proxy for.
/// </param>
// Normalize the name to lowercase
hubName = hubName.toLowerCase();var proxy=this.proxies[hubName];if(!proxy){proxy = hubProxy(this,hubName);this.proxies[hubName] = proxy;}this._registerSubscribedHubs();return proxy;};hubConnection.fn.init.prototype = hubConnection.fn;$.hubConnection = hubConnection;})(window.jQuery,window); /* jquery.signalR.version.js */ // Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.md in the project root for license information.
/*global window:false */ /// <reference path="jquery.signalR.core.js" />
(function($,undefined){$.signalR.version = "2.0.3";})(window.jQuery); /// <reference path="jquery.signalR.version.js" />
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcmlwdHMvanF1ZXJ5LnNpZ25hbHItMi4wLjMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzthQVlBLEFBQUMsQ0FBQSxTQUFVLENBQUMsQ0FBRSxNQUFNLENBQUUsU0FBUyxDQUFFLENBQzdCLFlBQVksQ0FBQyxBQUViLElBQUksU0FBUyxDQUFHLENBQ1osUUFBUSxDQUFFLHFHQUFxRyxDQUMvRyxpQkFBaUIsQ0FBRSw4SEFBOEgsQ0FDakosZ0JBQWdCLENBQUUsbUNBQW1DLENBQ3JELG1CQUFtQixDQUFFLDhDQUE4QyxDQUNuRSx1QkFBdUIsQ0FBRSwwREFBMEQsQ0FDbkYsNkJBQTZCLENBQUUsbUNBQW1DLENBQ2xFLG9CQUFvQixDQUFFLHNIQUFzSCxDQUM1SSxVQUFVLENBQUUsY0FBYyxDQUMxQixXQUFXLENBQUUsaUNBQWlDLENBQzlDLGNBQWMsQ0FBRSw4QkFBOEIsQ0FDOUMsMEJBQTBCLENBQUUsZ0NBQWdDLENBQzVELGdCQUFnQixDQUFFLDZCQUE2QixDQUMvQyxlQUFlLENBQUUsbUJBQW1CLENBQ3BDLCtCQUErQixDQUFFLG1EQUFtRCxDQUNwRixnQkFBZ0IsQ0FBRSx3QkFBd0IsQ0FDMUMsMEJBQTBCLENBQUUseUZBQXlGLENBQ3JILHFCQUFxQixDQUFFLGdFQUFnRSxDQUN2RixxQkFBcUIsQ0FBRSxrRUFBa0UsQ0FDekYsc0JBQXNCLENBQUUsbUZBQW1GLENBQzlHLENBQUMsQUFFRixHQUFJLE9BQVEsQ0FBQyxBQUFDLEtBQUssVUFBVSxDQUFFO0FBRTNCLE1BQU0sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQ3ZDLEFBRUQsSUFBSSxPQUFPLENBQ1AsV0FBVyxDQUNYLFdBQVcsQ0FBSSxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsS0FBSyxVQUFVLEFBQUMsQ0FDekQsV0FBVyxDQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FDdkIsbUJBQW1CLENBQUcsdUJBQXVCLENBQzdDLE1BQU0sQ0FB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VSxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUMvRCxDQUFDLENBQUMsQ0FDTixDQUNKLENBQUMsQUFFRixhQUFhLENBQUMsRUFBRSxDQUFDLGNBQWMsR0FBRyxTQUFVLE9BQU8sQ0FBRTs7Ozs7Ozs7QUFVakQsT0FBTyxHQUFHLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxBQUVoQyxJQUFJLEtBQUssQ0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEFBQ2xDLEdBQUksQ0FBQyxLQUFLLENBQUUsQ0FDUixLQUFLLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBRSxPQUFPLENBQUMsQ0FBQyxBQUNoQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUNqQyxBQUVELElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLEFBRS9CLE9BQU8sS0FBSyxDQUFDLENBQ2hCLENBQUMsQUFFRixhQUFhLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDLEVBQUUsQ0FBQyxBQUVuRCxDQUFDLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQyxDQUVuQyxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBRSxNQUFNLENBQUMsQ0FBRTs7QUFNMUIsQUFBQyxDQUFBLFNBQVUsQ0FBQyxDQUFFLFNBQVMsQ0FBRSxDQUNyQixDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FDL0IsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBRSIsImZpbGUiOiJ1bmtub3duIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlc0NvbnRlbnQiOlsiLyoganF1ZXJ5LnNpZ25hbFIuY29yZS5qcyAqL1xyXG4vKmdsb2JhbCB3aW5kb3c6ZmFsc2UgKi9cclxuLyohXHJcbiAqIEFTUC5ORVQgU2lnbmFsUiBKYXZhU2NyaXB0IExpYnJhcnkgdjIuMC4zXHJcbiAqIGh0dHA6Ly9zaWduYWxyLm5ldC9cclxuICpcclxuICogQ29weXJpZ2h0IChDKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqL1xyXG5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNjcmlwdHMvanF1ZXJ5LTEuNi40LmpzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImpxdWVyeS5zaWduYWxSLnZlcnNpb24uanNcIiAvPlxyXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgdW5kZWZpbmVkKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgcmVzb3VyY2VzID0ge1xyXG4gICAgICAgIG5valF1ZXJ5OiBcImpRdWVyeSB3YXMgbm90IGZvdW5kLiBQbGVhc2UgZW5zdXJlIGpRdWVyeSBpcyByZWZlcmVuY2VkIGJlZm9yZSB0aGUgU2lnbmFsUiBjbGllbnQgSmF2YVNjcmlwdCBmaWxlLlwiLFxyXG4gICAgICAgIG5vVHJhbnNwb3J0T25Jbml0OiBcIk5vIHRyYW5zcG9ydCBjb3VsZCBiZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkuIFRyeSBzcGVjaWZ5aW5nIGEgZGlmZmVyZW50IHRyYW5zcG9ydCBvciBub25lIGF0IGFsbCBmb3IgYXV0byBpbml0aWFsaXphdGlvbi5cIixcclxuICAgICAgICBlcnJvck9uTmVnb3RpYXRlOiBcIkVycm9yIGR1cmluZyBuZWdvdGlhdGlvbiByZXF1ZXN0LlwiLFxyXG4gICAgICAgIHN0b3BwZWRXaGlsZUxvYWRpbmc6IFwiVGhlIGNvbm5lY3Rpb24gd2FzIHN0b3BwZWQgZHVyaW5nIHBhZ2UgbG9hZC5cIixcclxuICAgICAgICBzdG9wcGVkV2hpbGVOZWdvdGlhdGluZzogXCJUaGUgY29ubmVjdGlvbiB3YXMgc3RvcHBlZCBkdXJpbmcgdGhlIG5lZ290aWF0ZSByZXF1ZXN0LlwiLFxyXG4gICAgICAgIGVycm9yUGFyc2luZ05lZ290aWF0ZVJlc3BvbnNlOiBcIkVycm9yIHBhcnNpbmcgbmVnb3RpYXRlIHJlc3BvbnNlLlwiLFxyXG4gICAgICAgIHByb3RvY29sSW5jb21wYXRpYmxlOiBcIllvdSBhcmUgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBjbGllbnQgdGhhdCBpc24ndCBjb21wYXRpYmxlIHdpdGggdGhlIHNlcnZlci4gQ2xpZW50IHZlcnNpb24gezB9LCBzZXJ2ZXIgdmVyc2lvbiB7MX0uXCIsXHJcbiAgICAgICAgc2VuZEZhaWxlZDogXCJTZW5kIGZhaWxlZC5cIixcclxuICAgICAgICBwYXJzZUZhaWxlZDogXCJGYWlsZWQgYXQgcGFyc2luZyByZXNwb25zZTogezB9XCIsXHJcbiAgICAgICAgbG9uZ1BvbGxGYWlsZWQ6IFwiTG9uZyBwb2xsaW5nIHJlcXVlc3QgZmFpbGVkLlwiLFxyXG4gICAgICAgIGV2ZW50U291cmNlRmFpbGVkVG9Db25uZWN0OiBcIkV2ZW50U291cmNlIGZhaWxlZCB0byBjb25uZWN0LlwiLFxyXG4gICAgICAgIGV2ZW50U291cmNlRXJyb3I6IFwiRXJyb3IgcmFpc2VkIGJ5IEV2ZW50U291cmNlXCIsXHJcbiAgICAgICAgd2ViU29ja2V0Q2xvc2VkOiBcIldlYlNvY2tldCBjbG9zZWQuXCIsXHJcbiAgICAgICAgcGluZ1NlcnZlckZhaWxlZEludmFsaWRSZXNwb25zZTogXCJJbnZhbGlkIHBpbmcgcmVzcG9uc2Ugd2hlbiBwaW5naW5nIHNlcnZlcjogJ3swfScuXCIsXHJcbiAgICAgICAgcGluZ1NlcnZlckZhaWxlZDogXCJGYWlsZWQgdG8gcGluZyBzZXJ2ZXIuXCIsXHJcbiAgICAgICAgcGluZ1NlcnZlckZhaWxlZFN0YXR1c0NvZGU6IFwiRmFpbGVkIHRvIHBpbmcgc2VydmVyLiAgU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBjb2RlIHswfSwgc3RvcHBpbmcgdGhlIGNvbm5lY3Rpb24uXCIsXHJcbiAgICAgICAgcGluZ1NlcnZlckZhaWxlZFBhcnNlOiBcIkZhaWxlZCB0byBwYXJzZSBwaW5nIHNlcnZlciByZXNwb25zZSwgc3RvcHBpbmcgdGhlIGNvbm5lY3Rpb24uXCIsXHJcbiAgICAgICAgbm9Db25uZWN0aW9uVHJhbnNwb3J0OiBcIkNvbm5lY3Rpb24gaXMgaW4gYW4gaW52YWxpZCBzdGF0ZSwgdGhlcmUgaXMgbm8gdHJhbnNwb3J0IGFjdGl2ZS5cIixcclxuICAgICAgICB3ZWJTb2NrZXRzSW52YWxpZFN0YXRlOiBcIlRoZSBXZWIgU29ja2V0IHRyYW5zcG9ydCBpcyBpbiBhbiBpbnZhbGlkIHN0YXRlLCB0cmFuc2l0aW9uaW5nIGludG8gcmVjb25uZWN0aW5nLlwiXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0eXBlb2YgKCQpICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAvLyBubyBqUXVlcnkhXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc291cmNlcy5ub2pRdWVyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNpZ25hbFIsXHJcbiAgICAgICAgX2Nvbm5lY3Rpb24sXHJcbiAgICAgICAgX3BhZ2VMb2FkZWQgPSAod2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiksXHJcbiAgICAgICAgX3BhZ2VXaW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgX25lZ290aWF0ZUFib3J0VGV4dCA9IFwiX19OZWdvdGlhdGUgQWJvcnRlZF9fXCIsXHJcbiAgICAgICAgZXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvblN0YXJ0OiBcIm9uU3RhcnRcIixcclxuICAgICAgICAgICAgb25TdGFydGluZzogXCJvblN0YXJ0aW5nXCIsXHJcbiAgICAgICAgICAgIG9uUmVjZWl2ZWQ6IFwib25SZWNlaXZlZFwiLFxyXG4gICAgICAgICAgICBvbkVycm9yOiBcIm9uRXJyb3JcIixcclxuICAgICAgICAgICAgb25Db25uZWN0aW9uU2xvdzogXCJvbkNvbm5lY3Rpb25TbG93XCIsXHJcbiAgICAgICAgICAgIG9uUmVjb25uZWN0aW5nOiBcIm9uUmVjb25uZWN0aW5nXCIsXHJcbiAgICAgICAgICAgIG9uUmVjb25uZWN0OiBcIm9uUmVjb25uZWN0XCIsXHJcbiAgICAgICAgICAgIG9uU3RhdGVDaGFuZ2VkOiBcIm9uU3RhdGVDaGFuZ2VkXCIsXHJcbiAgICAgICAgICAgIG9uRGlzY29ubmVjdDogXCJvbkRpc2Nvbm5lY3RcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWpheERlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogdHJ1ZSxcclxuICAgICAgICAgICAgdGltZW91dDogbnVsbCxcclxuICAgICAgICAgICAgYXN5bmM6IHRydWUsXHJcbiAgICAgICAgICAgIGdsb2JhbDogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nID0gZnVuY3Rpb24gKG1zZywgbG9nZ2luZykge1xyXG4gICAgICAgICAgICBpZiAobG9nZ2luZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAod2luZG93LmNvbnNvbGUpID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbSA9IFwiW1wiICsgbmV3IERhdGUoKS50b1RpbWVTdHJpbmcoKSArIFwiXSBTaWduYWxSOiBcIiArIG1zZztcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlLmRlYnVnKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5kZWJ1ZyhtKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuY29uc29sZS5sb2cpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoYW5nZVN0YXRlID0gZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGV4cGVjdGVkU3RhdGUsIG5ld1N0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChleHBlY3RlZFN0YXRlID09PSBjb25uZWN0aW9uLnN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0YXRlID0gbmV3U3RhdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgJChjb25uZWN0aW9uKS50cmlnZ2VySGFuZGxlcihldmVudHMub25TdGF0ZUNoYW5nZWQsIFt7IG9sZFN0YXRlOiBleHBlY3RlZFN0YXRlLCBuZXdTdGF0ZTogbmV3U3RhdGUgfV0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpc0Rpc2Nvbm5lY3RpbmcgPSBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zdGF0ZSA9PT0gc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuZGlzY29ubmVjdGVkO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNvbmZpZ3VyZVN0b3BSZWNvbm5lY3RpbmdUaW1lb3V0ID0gZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIHN0b3BSZWNvbm5lY3RpbmdUaW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgb25SZWNvbm5lY3RUaW1lb3V0O1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBjb25uZWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gY29uZmlndXJlZCB0byBzdG9wIHJlY29ubmVjdGluZyBhZnRlciBhIHNwZWNpZmllZCB0aW1lb3V0LlxyXG4gICAgICAgICAgICAvLyBXaXRob3V0IHRoaXMgY2hlY2sgaWYgYSBjb25uZWN0aW9uIGlzIHN0b3BwZWQgdGhlbiBzdGFydGVkIGV2ZW50cyB3aWxsIGJlIGJvdW5kIG11bHRpcGxlIHRpbWVzLlxyXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uXy5jb25maWd1cmVkU3RvcFJlY29ubmVjdGluZ1RpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIG9uUmVjb25uZWN0VGltZW91dCA9IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJDb3VsZG4ndCByZWNvbm5lY3Qgd2l0aGluIHRoZSBjb25maWd1cmVkIHRpbWVvdXQgKFwiICsgY29ubmVjdGlvbi5kaXNjb25uZWN0VGltZW91dCArIFwibXMpLCBkaXNjb25uZWN0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0b3AoLyogYXN5bmMgKi8gZmFsc2UsIC8qIG5vdGlmeVNlcnZlciAqLyBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVjb25uZWN0aW5nKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3Qgc3RhdGUgY2hhbmdpbmcgaW4gYSBwcmV2aW91cyB1c2VyIGRlZmluZWQgZXZlbiBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLnJlY29ubmVjdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wUmVjb25uZWN0aW5nVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgb25SZWNvbm5lY3RUaW1lb3V0KGNvbm5lY3Rpb24pOyB9LCBjb25uZWN0aW9uLmRpc2Nvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0YXRlQ2hhbmdlZChmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm9sZFN0YXRlID09PSBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5yZWNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHBlbmRpbmcgcmVjb25uZWN0IHRpbWVvdXQgY2hlY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChzdG9wUmVjb25uZWN0aW5nVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLmNvbmZpZ3VyZWRTdG9wUmVjb25uZWN0aW5nVGltZW91dCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIHNpZ25hbFIgPSBmdW5jdGlvbiAodXJsLCBxcywgbG9nZ2luZykge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5DcmVhdGVzIGEgbmV3IFNpZ25hbFIgY29ubmVjdGlvbiBmb3IgdGhlIGdpdmVuIHVybDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1cmxcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIFVSTCBvZiB0aGUgbG9uZyBwb2xsaW5nIGVuZHBvaW50PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxc1wiIHR5cGU9XCJPYmplY3RcIj5cclxuICAgICAgICAvLy8gICAgIFtPcHRpb25hbF0gQ3VzdG9tIHF1ZXJ5c3RyaW5nIHBhcmFtZXRlcnMgdG8gYWRkIHRvIHRoZSBjb25uZWN0aW9uIFVSTC5cclxuICAgICAgICAvLy8gICAgIElmIGFuIG9iamVjdCwgZXZlcnkgbm9uLWZ1bmN0aW9uIG1lbWJlciB3aWxsIGJlIGFkZGVkIHRvIHRoZSBxdWVyeXN0cmluZy5cclxuICAgICAgICAvLy8gICAgIElmIGEgc3RyaW5nLCBpdCdzIGFkZGVkIHRvIHRoZSBRUyBhcyBzcGVjaWZpZWQuXHJcbiAgICAgICAgLy8vIDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibG9nZ2luZ1wiIHR5cGU9XCJCb29sZWFuXCI+XHJcbiAgICAgICAgLy8vICAgICBbT3B0aW9uYWxdIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgY29ubmVjdGlvbiBsb2dnaW5nIGlzIGVuYWJsZWQgdG8gdGhlIGJyb3dzZXJcclxuICAgICAgICAvLy8gICAgIGNvbnNvbGUvbG9nLiBEZWZhdWx0cyB0byBmYWxzZS5cclxuICAgICAgICAvLy8gPC9wYXJhbT5cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBzaWduYWxSLmZuLmluaXQodXJsLCBxcywgbG9nZ2luZyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNpZ25hbFIuXyA9IHtcclxuICAgICAgICBkZWZhdWx0Q29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsXHJcblxyXG4gICAgICAgIGllVmVyc2lvbjogKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIGFnZW50IGhhcyB0aGUgcGF0dGVybiBcIk1TSUUgKG9uZSBvciBtb3JlIG51bWJlcnMpLihvbmUgb3IgbW9yZSBudW1iZXJzKVwiO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IC9NU0lFIChbMC05XStcXC5bMC05XSspLy5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB3aW5kb3cucGFyc2VGbG9hdChtYXRjaGVzWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdW5kZWZpbmVkIHZhbHVlIG1lYW5zIG5vdCBJRVxyXG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcclxuICAgICAgICB9KSgpLFxyXG5cclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UsIHNvdXJjZSwgY29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGUuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbiAobWVzc2FnZSwgdHJhbnNwb3J0LCBzb3VyY2UsIGNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmVycm9yKG1lc3NhZ2UsIHNvdXJjZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIGUudHJhbnNwb3J0ID0gdHJhbnNwb3J0ID8gdHJhbnNwb3J0Lm5hbWUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGZvcm1hdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+VXNhZ2U6IGZvcm1hdChcIkhpIHswfSwgeW91IGFyZSB7MX0hXCIsIFwiRm9vXCIsIDEwMCkgPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICB2YXIgcyA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gcy5yZXBsYWNlKFwie1wiICsgaSArIFwifVwiLCBhcmd1bWVudHNbaSArIDFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBmaXJlZm94TWFqb3JWZXJzaW9uOiBmdW5jdGlvbiAodXNlckFnZW50KSB7XHJcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggdXNlciBhZ2VudHM6IGh0dHA6Ly91c2VyYWdlbnRzdHJpbmcuY29tL3BhZ2VzL0ZpcmVmb3gvXHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKC9GaXJlZm94XFwvKFxcZCspLyk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2hlcyB8fCAhbWF0Y2hlcy5sZW5ndGggfHwgbWF0Y2hlcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQobWF0Y2hlc1sxXSwgMTAgLyogcmFkaXggKi8pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNvbmZpZ3VyZVBpbmdJbnRlcnZhbDogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IGNvbm5lY3Rpb24uXy5jb25maWcsXHJcbiAgICAgICAgICAgICAgICBvbkZhaWwgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vbkVycm9yLCBbZXJyb3JdKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoY29uZmlnICYmICFjb25uZWN0aW9uLl8ucGluZ0ludGVydmFsSWQgJiYgY29uZmlnLnBpbmdJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLnBpbmdJbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljLnBpbmdTZXJ2ZXIoY29ubmVjdGlvbikuZmFpbChvbkZhaWwpO1xyXG4gICAgICAgICAgICAgICAgfSwgY29uZmlnLnBpbmdJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHNpZ25hbFIuZXZlbnRzID0gZXZlbnRzO1xyXG5cclxuICAgIHNpZ25hbFIucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xyXG5cclxuICAgIHNpZ25hbFIuYWpheERlZmF1bHRzID0gYWpheERlZmF1bHRzO1xyXG5cclxuICAgIHNpZ25hbFIuY2hhbmdlU3RhdGUgPSBjaGFuZ2VTdGF0ZTtcclxuXHJcbiAgICBzaWduYWxSLmlzRGlzY29ubmVjdGluZyA9IGlzRGlzY29ubmVjdGluZztcclxuXHJcbiAgICBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZSA9IHtcclxuICAgICAgICBjb25uZWN0aW5nOiAwLFxyXG4gICAgICAgIGNvbm5lY3RlZDogMSxcclxuICAgICAgICByZWNvbm5lY3Rpbmc6IDIsXHJcbiAgICAgICAgZGlzY29ubmVjdGVkOiA0XHJcbiAgICB9O1xyXG5cclxuICAgIHNpZ25hbFIuaHViID0ge1xyXG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBnZXQgcmVwbGFjZWQgd2l0aCB0aGUgcmVhbCBodWIgY29ubmVjdGlvbiBzdGFydCBtZXRob2Qgd2hlbiBodWJzIGlzIHJlZmVyZW5jZWQgY29ycmVjdGx5XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hbFI6IEVycm9yIGxvYWRpbmcgaHVicy4gRW5zdXJlIHlvdXIgaHVicyByZWZlcmVuY2UgaXMgY29ycmVjdCwgZS5nLiA8c2NyaXB0IHNyYz0nL3NpZ25hbHIvanMnPjwvc2NyaXB0Pi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfcGFnZVdpbmRvdy5sb2FkKGZ1bmN0aW9uICgpIHsgX3BhZ2VMb2FkZWQgPSB0cnVlOyB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZVRyYW5zcG9ydChyZXF1ZXN0ZWRUcmFuc3BvcnQsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+VmFsaWRhdGVzIHRoZSByZXF1ZXN0ZWQgdHJhbnNwb3J0IGJ5IGNyb3NzIGNoZWNraW5nIGl0IHdpdGggdGhlIHByZS1kZWZpbmVkIHNpZ25hbFIudHJhbnNwb3J0czwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJyZXF1ZXN0ZWRUcmFuc3BvcnRcIiB0eXBlPVwiT2JqZWN0XCI+VGhlIGRlc2lnbmF0ZWQgdHJhbnNwb3J0cyB0aGF0IHRoZSB1c2VyIGhhcyBzcGVjaWZpZWQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjb25uZWN0aW9uXCIgdHlwZT1cInNpZ25hbFJcIj5UaGUgY29ubmVjdGlvbiB0aGF0IHdpbGwgYmUgdXNpbmcgdGhlIHJlcXVlc3RlZCB0cmFuc3BvcnRzLiAgVXNlZCBmb3IgbG9nZ2luZyBwdXJwb3Nlcy48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwiT2JqZWN0XCIgLz5cclxuXHJcbiAgICAgICAgaWYgKCQuaXNBcnJheShyZXF1ZXN0ZWRUcmFuc3BvcnQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdHJhbnNwb3J0IGFycmF5IGFuZCByZW1vdmUgYW4gXCJpbnZhbGlkXCIgdHJhbnBvcnRzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSByZXF1ZXN0ZWRUcmFuc3BvcnQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc3BvcnQgPSByZXF1ZXN0ZWRUcmFuc3BvcnRbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoJC50eXBlKHRyYW5zcG9ydCkgIT09IFwic3RyaW5nXCIgfHwgIXNpZ25hbFIudHJhbnNwb3J0c1t0cmFuc3BvcnRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJJbnZhbGlkIHRyYW5zcG9ydDogXCIgKyB0cmFuc3BvcnQgKyBcIiwgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgdHJhbnNwb3J0cyBsaXN0LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUcmFuc3BvcnQuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgd2Ugc3RpbGwgaGF2ZSB0cmFuc3BvcnRzIGxlZnQsIGlmIHdlIGRvbnQgdGhlbiB3ZSBoYXZlIGludmFsaWQgdHJhbnNwb3J0c1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdGVkVHJhbnNwb3J0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJObyB0cmFuc3BvcnRzIHJlbWFpbiB3aXRoaW4gdGhlIHNwZWNpZmllZCB0cmFuc3BvcnQgYXJyYXkuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkVHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIXNpZ25hbFIudHJhbnNwb3J0c1tyZXF1ZXN0ZWRUcmFuc3BvcnRdICYmIHJlcXVlc3RlZFRyYW5zcG9ydCAhPT0gXCJhdXRvXCIpIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJJbnZhbGlkIHRyYW5zcG9ydDogXCIgKyByZXF1ZXN0ZWRUcmFuc3BvcnQudG9TdHJpbmcoKSArIFwiLlwiKTtcclxuICAgICAgICAgICAgcmVxdWVzdGVkVHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3RlZFRyYW5zcG9ydCA9PT0gXCJhdXRvXCIgJiYgc2lnbmFsUi5fLmllVmVyc2lvbiA8PSA4KSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGRvaW5nIGFuIGF1dG8gdHJhbnNwb3J0IGFuZCB3ZSdyZSBJRTggdGhlbiBmb3JjZSBsb25nUG9sbGluZywgIzE3NjRcclxuICAgICAgICAgICAgcmV0dXJuIFtcImxvbmdQb2xsaW5nXCJdO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0ZWRUcmFuc3BvcnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RGVmYXVsdFBvcnQocHJvdG9jb2wpIHtcclxuICAgICAgICBpZiAocHJvdG9jb2wgPT09IFwiaHR0cDpcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gODA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcm90b2NvbCA9PT0gXCJodHRwczpcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gNDQzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGREZWZhdWx0UG9ydChwcm90b2NvbCwgdXJsKSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHBvcnRzICBmcm9tIHVybC4gIFdlIGhhdmUgdG8gY2hlY2sgaWYgdGhlcmUncyBhIC8gb3IgZW5kIG9mIGxpbmVcclxuICAgICAgICAvLyBmb2xsb3dpbmcgdGhlIHBvcnQgaW4gb3JkZXIgdG8gYXZvaWQgcmVtb3ZpbmcgcG9ydHMgc3VjaCBhcyA4MDgwLlxyXG4gICAgICAgIGlmICh1cmwubWF0Y2goLzpcXGQrJC8pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybCArIFwiOlwiICsgZ2V0RGVmYXVsdFBvcnQocHJvdG9jb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBDb25uZWN0aW5nTWVzc2FnZUJ1ZmZlcihjb25uZWN0aW9uLCBkcmFpbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICBidWZmZXIgPSBbXTtcclxuXHJcbiAgICAgICAgdGhhdC50cnlCdWZmZXIgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSA9PT0gJC5zaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5jb25uZWN0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoYXQuZHJhaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIGNvbm5lY3RlZCB3aGVuIHdlIGRyYWluIChkbyBub3Qgd2FudCB0byBkcmFpbiB3aGlsZSBhIGNvbm5lY3Rpb24gaXMgbm90IGFjdGl2ZSlcclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09ICQuc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYnVmZmVyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkcmFpbkNhbGxiYWNrKGJ1ZmZlci5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoYXQuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2lnbmFsUi5mbiA9IHNpZ25hbFIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICh1cmwsIHFzLCBsb2dnaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciAkY29ubmVjdGlvbiA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICAgICAgdGhpcy5xcyA9IHFzO1xyXG4gICAgICAgICAgICB0aGlzLl8gPSB7XHJcbiAgICAgICAgICAgICAgICBrZWVwQWxpdmVEYXRhOiB7fSxcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RpbmdNZXNzYWdlQnVmZmVyOiBuZXcgQ29ubmVjdGluZ01lc3NhZ2VCdWZmZXIodGhpcywgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29ubmVjdGlvbi50cmlnZ2VySGFuZGxlcihldmVudHMub25SZWNlaXZlZCwgW21lc3NhZ2VdKTtcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgb25GYWlsZWRUaW1lb3V0SGFuZGxlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdE1lc3NhZ2VBdDogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgICAgICAgICAgICBsYXN0QWN0aXZlQXQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICAgICAgYmVhdEludGVydmFsOiA1MDAwLCAvLyBEZWZhdWx0IHZhbHVlLCB3aWxsIG9ubHkgYmUgb3ZlcnJpZGRlbiBpZiBrZWVwIGFsaXZlIGlzIGVuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBiZWF0SGFuZGxlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdG90YWxUcmFuc3BvcnRDb25uZWN0VGltZW91dDogMCAvLyBUaGlzIHdpbGwgYmUgdGhlIHN1bSBvZiB0aGUgVHJhbnNwb3J0Q29ubmVjdFRpbWVvdXQgc2VudCBpbiByZXNwb25zZSB0byBuZWdvdGlhdGUgYW5kIGNvbm5lY3Rpb24udHJhbnNwb3J0Q29ubmVjdFRpbWVvdXRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAobG9nZ2luZykgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dpbmcgPSBsb2dnaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgX3BhcnNlUmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3BvbnNlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5qc29uLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGpzb246IHdpbmRvdy5KU09OLFxyXG5cclxuICAgICAgICBpc0Nyb3NzRG9tYWluOiBmdW5jdGlvbiAodXJsLCBhZ2FpbnN0KSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5DaGVja3MgaWYgdXJsIGlzIGNyb3NzIGRvbWFpbjwvc3VtbWFyeT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidXJsXCIgdHlwZT1cIlN0cmluZ1wiPlRoZSBiYXNlIFVSTDwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFnYWluc3RcIiB0eXBlPVwiT2JqZWN0XCI+XHJcbiAgICAgICAgICAgIC8vLyAgICAgQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gY29tcGFyZSB0aGUgVVJMIGFnYWluc3QsIGlmIG5vdCBzcGVjaWZpZWQgaXQgd2lsbCBiZSBzZXQgdG8gd2luZG93LmxvY2F0aW9uLlxyXG4gICAgICAgICAgICAvLy8gICAgIElmIHNwZWNpZmllZCBpdCBtdXN0IGNvbnRhaW4gYSBwcm90b2NvbCBhbmQgYSBob3N0IHByb3BlcnR5LlxyXG4gICAgICAgICAgICAvLy8gPC9wYXJhbT5cclxuICAgICAgICAgICAgdmFyIGxpbms7XHJcblxyXG4gICAgICAgICAgICB1cmwgPSAkLnRyaW0odXJsKTtcclxuXHJcbiAgICAgICAgICAgIGFnYWluc3QgPSBhZ2FpbnN0IHx8IHdpbmRvdy5sb2NhdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcImh0dHBcIikgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIGFuY2hvciB0YWcuXHJcbiAgICAgICAgICAgIGxpbmsgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZW4gY2hlY2tpbmcgZm9yIGNyb3NzIGRvbWFpbiB3ZSBoYXZlIHRvIHNwZWNpYWwgY2FzZSBwb3J0IDgwIGJlY2F1c2UgdGhlIHdpbmRvdy5sb2NhdGlvbiB3aWxsIHJlbW92ZSB0aGUgXHJcbiAgICAgICAgICAgIHJldHVybiBsaW5rLnByb3RvY29sICsgYWRkRGVmYXVsdFBvcnQobGluay5wcm90b2NvbCwgbGluay5ob3N0KSAhPT0gYWdhaW5zdC5wcm90b2NvbCArIGFkZERlZmF1bHRQb3J0KGFnYWluc3QucHJvdG9jb2wsIGFnYWluc3QuaG9zdCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYWpheERhdGFUeXBlOiBcInRleHRcIixcclxuXHJcbiAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiLFxyXG5cclxuICAgICAgICBsb2dnaW5nOiBmYWxzZSxcclxuXHJcbiAgICAgICAgc3RhdGU6IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCxcclxuXHJcbiAgICAgICAgY2xpZW50UHJvdG9jb2w6IFwiMS4zXCIsXHJcblxyXG4gICAgICAgIHJlY29ubmVjdERlbGF5OiAyMDAwLFxyXG5cclxuICAgICAgICB0cmFuc3BvcnRDb25uZWN0VGltZW91dDogMCxcclxuXHJcbiAgICAgICAgZGlzY29ubmVjdFRpbWVvdXQ6IDMwMDAwLCAvLyBUaGlzIHNob3VsZCBiZSBzZXQgYnkgdGhlIHNlcnZlciBpbiByZXNwb25zZSB0byB0aGUgbmVnb3RpYXRlIHJlcXVlc3QgKDMwcyBkZWZhdWx0KVxyXG5cclxuICAgICAgICByZWNvbm5lY3RXaW5kb3c6IDMwMDAwLCAvLyBUaGlzIHNob3VsZCBiZSBzZXQgYnkgdGhlIHNlcnZlciBpbiByZXNwb25zZSB0byB0aGUgbmVnb3RpYXRlIHJlcXVlc3QgXHJcblxyXG4gICAgICAgIGtlZXBBbGl2ZVdhcm5BdDogMiAvIDMsIC8vIFdhcm4gdXNlciBvZiBzbG93IGNvbm5lY3Rpb24gaWYgd2UgYnJlYWNoIHRoZSBYJSBtYXJrIG9mIHRoZSBrZWVwIGFsaXZlIHRpbWVvdXRcclxuXHJcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChvcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+U3RhcnRzIHRoZSBjb25uZWN0aW9uPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvcHRpb25zXCIgdHlwZT1cIk9iamVjdFwiPk9wdGlvbnMgbWFwPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY2FsbGJhY2tcIiB0eXBlPVwiRnVuY3Rpb25cIj5BIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2hlbiB0aGUgY29ubmVjdGlvbiBoYXMgc3RhcnRlZDwvcGFyYW0+XHJcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwaW5nSW50ZXJ2YWw6IDMwMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICB3YWl0Rm9yUGFnZUxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgICAgICBqc29ucDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplLFxyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBjb25uZWN0aW9uLl9kZWZlcnJhbCB8fCAkLkRlZmVycmVkKCksIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSBpcyBhIHByZS1leGlzdGluZyBkZWZlcnJhbCB0aGF0J3MgYmVpbmcgYnVpbHQgb24sIGlmIHNvIHdlIHdhbnQgdG8ga2VlcCB1c2luZyBpdFxyXG4gICAgICAgICAgICAgICAgcGFyc2VyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gUGVyc2lzdCB0aGUgZGVmZXJyYWwgc28gdGhhdCBpZiBzdGFydCBpcyBjYWxsZWQgbXVsdGlwbGUgdGltZXMgdGhlIHNhbWUgZGVmZXJyYWwgaXMgdXNlZC5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fZGVmZXJyYWwgPSBkZWZlcnJlZDtcclxuXHJcbiAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5qc29uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBubyBKU09OIVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmFsUjogTm8gSlNPTiBwYXJzZXIgZm91bmQuIFBsZWFzZSBlbnN1cmUganNvbjIuanMgaXMgcmVmZXJlbmNlZCBiZWZvcmUgdGhlIFNpZ25hbFIuanMgZmlsZSBpZiB5b3UgbmVlZCB0byBzdXBwb3J0IGNsaWVudHMgd2l0aG91dCBuYXRpdmUgSlNPTiBwYXJzaW5nIHN1cHBvcnQsIGUuZy4gSUU8OC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkLnR5cGUob3B0aW9ucykgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBjYWxsaW5nIHdpdGggc2luZ2xlIGNhbGxiYWNrIHBhcmFtZXRlclxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQudHlwZShvcHRpb25zKSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgJC5leHRlbmQoY29uZmlnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmICgkLnR5cGUoY29uZmlnLmNhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjb25maWcuY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbmZpZy50cmFuc3BvcnQgPSB2YWxpZGF0ZVRyYW5zcG9ydChjb25maWcudHJhbnNwb3J0LCBjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB0cmFuc3BvcnQgaXMgaW52YWxpZCB0aHJvdyBhbiBlcnJvciBhbmQgYWJvcnQgc3RhcnRcclxuICAgICAgICAgICAgaWYgKCFjb25maWcudHJhbnNwb3J0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYWxSOiBJbnZhbGlkIHRyYW5zcG9ydChzKSBzcGVjaWZpZWQsIGFib3J0aW5nIHN0YXJ0LlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLmNvbmZpZyA9IGNvbmZpZztcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBzdGFydCBpcyBiZWluZyBjYWxsZWQgcHJpb3IgdG8gcGFnZSBsb2FkXHJcbiAgICAgICAgICAgIC8vIElmIHdhaXRGb3JQYWdlTG9hZCBpcyB0cnVlIHdlIHRoZW4gd2FudCB0byByZS1kaXJlY3QgZnVuY3Rpb24gY2FsbCB0byB0aGUgd2luZG93IGxvYWQgZXZlbnRcclxuICAgICAgICAgICAgaWYgKCFfcGFnZUxvYWRlZCAmJiBjb25maWcud2FpdEZvclBhZ2VMb2FkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8uZGVmZXJyZWRTdGFydEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zdGFydChvcHRpb25zLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgX3BhZ2VXaW5kb3cuYmluZChcImxvYWRcIiwgY29ubmVjdGlvbi5fLmRlZmVycmVkU3RhcnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IGNvbm5lY3RpbmcganVzdCByZXR1cm4gdGhlIHNhbWUgZGVmZXJyYWwgYXMgdGhlIG9yaWdpbmFsIGNvbm5lY3Rpb24gc3RhcnRcclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlU3RhdGUoY29ubmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RpbmcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UncmUgbm90IGNvbm5lY3Rpbmcgc28gdHJ5IGFuZCB0cmFuc2l0aW9uIGludG8gY29ubmVjdGluZy5cclxuICAgICAgICAgICAgICAgIC8vIElmIHdlIGZhaWwgdG8gdHJhbnNpdGlvbiB0aGVuIHdlJ3JlIGVpdGhlciBpbiBjb25uZWN0ZWQgb3IgcmVjb25uZWN0aW5nLlxyXG5cclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25maWd1cmVTdG9wUmVjb25uZWN0aW5nVGltZW91dChjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIGZ1bGwgdXJsXHJcbiAgICAgICAgICAgIHBhcnNlci5ocmVmID0gY29ubmVjdGlvbi51cmw7XHJcbiAgICAgICAgICAgIGlmICghcGFyc2VyLnByb3RvY29sIHx8IHBhcnNlci5wcm90b2NvbCA9PT0gXCI6XCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucHJvdG9jb2wgPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmhvc3QgPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaG9zdDtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uYmFzZVVybCA9IGNvbm5lY3Rpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBjb25uZWN0aW9uLmhvc3Q7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnByb3RvY29sID0gcGFyc2VyLnByb3RvY29sO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5ob3N0ID0gcGFyc2VyLmhvc3Q7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmJhc2VVcmwgPSBwYXJzZXIucHJvdG9jb2wgKyBcIi8vXCIgKyBwYXJzZXIuaG9zdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHRoZSB3ZWJzb2NrZXQgcHJvdG9jb2xcclxuICAgICAgICAgICAgY29ubmVjdGlvbi53c1Byb3RvY29sID0gY29ubmVjdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwczpcIiA/IFwid3NzOi8vXCIgOiBcIndzOi8vXCI7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBqc29ucCB3aXRoIG5vL2F1dG8gdHJhbnNwb3J0IGlzIHNwZWNpZmllZCwgdGhlbiBzZXQgdGhlIHRyYW5zcG9ydCB0byBsb25nIHBvbGxpbmdcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhhdCBpcyB0aGUgb25seSB0cmFuc3BvcnQgZm9yIHdoaWNoIGpzb25wIHJlYWxseSBtYWtlcyBzZW5zZS5cclxuICAgICAgICAgICAgLy8gU29tZSBkZXZlbG9wZXJzIG1pZ2h0IGFjdHVhbGx5IGNob29zZSB0byBzcGVjaWZ5IGpzb25wIGZvciBzYW1lIG9yaWdpbiByZXF1ZXN0c1xyXG4gICAgICAgICAgICAvLyBhcyBkZW1vbnN0cmF0ZWQgYnkgSXNzdWUgIzYyMy5cclxuICAgICAgICAgICAgaWYgKGNvbmZpZy50cmFuc3BvcnQgPT09IFwiYXV0b1wiICYmIGNvbmZpZy5qc29ucCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLnRyYW5zcG9ydCA9IFwibG9uZ1BvbGxpbmdcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHVybCBpcyBwcm90b2NvbCByZWxhdGl2ZSwgcHJlcGVuZCB0aGUgY3VycmVudCB3aW5kb3dzIHByb3RvY29sIHRvIHRoZSB1cmwuIFxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbi51cmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnVybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIGNvbm5lY3Rpb24udXJsO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJQcm90b2NvbCByZWxhdGl2ZSBVUkwgZGV0ZWN0ZWQsIG5vcm1hbGl6aW5nIGl0IHRvICdcIiArIGNvbm5lY3Rpb24udXJsICsgXCInLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDcm9zc0RvbWFpbihjb25uZWN0aW9uLnVybCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiQXV0byBkZXRlY3RlZCBjcm9zcyBkb21haW4gdXJsLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnRyYW5zcG9ydCA9PT0gXCJhdXRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBTdXBwb3J0IFhETSB3aXRoIGZvcmV2ZXJGcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy50cmFuc3BvcnQgPSBbXCJ3ZWJTb2NrZXRzXCIsIFwic2VydmVyU2VudEV2ZW50c1wiLCBcImxvbmdQb2xsaW5nXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGpzb25wIGlzIHRoZSBvbmx5IGNob2ljZSBmb3IgbmVnb3RpYXRpb24sIGFqYXhTZW5kIGFuZCBhamF4QWJvcnQuXHJcbiAgICAgICAgICAgICAgICAvLyBpLmUuIGlmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydHMgQ09SU1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgaXMsIGlnbm9yZSBhbnkgcHJlZmVyZW5jZSB0byB0aGUgY29udHJhcnksIGFuZCBzd2l0Y2ggdG8ganNvbnAuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5qc29ucCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5qc29ucCA9ICEkLnN1cHBvcnQuY29ycztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5qc29ucCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIlVzaW5nIGpzb25wIGJlY2F1c2UgdGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBDT1JTLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb250ZW50VHlwZSA9IHNpZ25hbFIuXy5kZWZhdWx0Q29udGVudFR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzID0gY29uZmlnLndpdGhDcmVkZW50aWFscztcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uYWpheERhdGFUeXBlID0gY29uZmlnLmpzb25wID8gXCJqc29ucFwiIDogXCJ0ZXh0XCI7XHJcblxyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uU3RhcnQsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJC50eXBlKGNhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICh0cmFuc3BvcnRzLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vVHJhbnNwb3J0RXJyb3IgPSBzaWduYWxSLl8uZXJyb3IocmVzb3VyY2VzLm5vVHJhbnNwb3J0T25Jbml0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4IHx8IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gdHJhbnNwb3J0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyB0cmFuc3BvcnQgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgICAgICAgICAgICAgICAgJChjb25uZWN0aW9uKS50cmlnZ2VySGFuZGxlcihldmVudHMub25FcnJvciwgW25vVHJhbnNwb3J0RXJyb3JdKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3Qobm9UcmFuc3BvcnRFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCB0aGUgY29ubmVjdGlvbiBpZiBpdCBoYXMgY29ubmVjdGVkIGFuZCBtb3ZlIGl0IGludG8gdGhlIGRpc2Nvbm5lY3RlZCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgY29ubmVjdGlvbiB3YXMgYWJvcnRlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0TmFtZSA9IHRyYW5zcG9ydHNbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydCA9IHNpZ25hbFIudHJhbnNwb3J0c1t0cmFuc3BvcnROYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvbkNvbXBsZXRlID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgdHJpZ2dlcmVkIG9uRmFpbGVkLCBvblN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25Db21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Db21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb24uXy5vbkZhaWxlZFRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LnN0b3AoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplKHRyYW5zcG9ydHMsIGluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLm9uRmFpbGVkVGltZW91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2codHJhbnNwb3J0Lm5hbWUgKyBcIiB0aW1lZCBvdXQgd2hlbiB0cnlpbmcgdG8gY29ubmVjdC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFpbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgY29ubmVjdGlvbi5fLnRvdGFsVHJhbnNwb3J0Q29ubmVjdFRpbWVvdXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuc3RhcnQoY29ubmVjdGlvbiwgZnVuY3Rpb24gKCkgeyAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggMTErIGRvZXNuJ3QgYWxsb3cgc3luYyBYSFIgd2l0aENyZWRlbnRpYWxzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3Qjd2l0aENyZWRlbnRpYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0ZpcmVmb3gxMU9yR3JlYXRlciA9IHNpZ25hbFIuXy5maXJlZm94TWFqb3JWZXJzaW9uKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSA+PSAxMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jQWJvcnQgPSAhIWNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzICYmIGlzRmlyZWZveDExT3JHcmVhdGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbm5lY3Rpb24gd2FzIGFib3J0ZWQgd2hpbGUgaW5pdGlhbGl6aW5nIHRyYW5zcG9ydHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uQ29tcGxldGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoY29ubmVjdGlvbi5fLm9uRmFpbGVkVGltZW91dEhhbmRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zcG9ydC5zdXBwb3J0c0tlZXBBbGl2ZSAmJiBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YS5hY3RpdmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljLm1vbml0b3JLZWVwQWxpdmUoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi50cmFuc3BvcnRzLl9sb2dpYy5zdGFydEhlYXJ0YmVhdChjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VkIHRvIGVuc3VyZSBsb3cgYWN0aXZpdHkgY2xpZW50cyBtYWludGFpbiB0aGVpciBhdXRoZW50aWNhdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11c3QgYmUgY29uZmlndXJlZCBvbmNlIGEgdHJhbnNwb3J0IGhhcyBiZWVuIGRlY2lkZWQgdG8gcGVyZm9ybSB2YWxpZCBwaW5nIHJlcXVlc3RzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5fLmNvbmZpZ3VyZVBpbmdJbnRlcnZhbChjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTdGF0ZShjb25uZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhaW4gYW55IGluY29taW5nIGJ1ZmZlcmVkIG1lc3NhZ2VzIChtZXNzYWdlcyB0aGF0IGNhbWUgaW4gcHJpb3IgdG8gY29ubmVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uXy5jb25uZWN0aW5nTWVzc2FnZUJ1ZmZlci5kcmFpbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uU3RhcnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpcmUgdGhlIHN0b3AgaGFuZGxlciBmb3Igd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYWdlV2luZG93LmJpbmQoXCJ1bmxvYWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiV2luZG93IHVubG9hZGluZywgc3RvcHBpbmcgdGhlIGNvbm5lY3Rpb24uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0b3AoYXN5bmNBYm9ydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaXJlZm94MTFPckdyZWF0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IGRvZXMgbm90IGZpcmUgY3Jvc3MtZG9tYWluIFhIUnMgaW4gdGhlIG5vcm1hbCB1bmxvYWQgaGFuZGxlciBvbiB0YWIgY2xvc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIzI0MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFnZVdpbmRvdy5iaW5kKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29ubmVjdGlvbi5zdG9wKCkgcnVucyBydW5zIGluIGJlZm9yZXVubG9hZCBhbmQgZmFpbHMsIGl0IHdpbGwgYWxzbyBmYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIHVubG9hZCB1bmxlc3MgY29ubmVjdGlvbi5zdG9wKCkgcnVucyBhZnRlciBhIHRpbWVvdXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcChhc3luY0Fib3J0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBvbkZhaWxlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyh0cmFuc3BvcnQubmFtZSArIFwiIHRyYW5zcG9ydCB0aHJldyAnXCIgKyBlcnJvci5tZXNzYWdlICsgXCInIHdoZW4gYXR0ZW1wdGluZyB0byBzdGFydC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBjb25uZWN0aW9uLnVybCArIFwiL25lZ290aWF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgb25GYWlsZWQgPSBmdW5jdGlvbiAoZXJyb3IsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gc2lnbmFsUi5fLmVycm9yKHJlc291cmNlcy5lcnJvck9uTmVnb3RpYXRlLCBlcnJvciwgY29ubmVjdGlvbi5fLm5lZ290aWF0ZVJlcXVlc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vbkVycm9yLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgdGhlIGNvbm5lY3Rpb24gaWYgbmVnb3RpYXRlIGZhaWxlZFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uU3RhcnRpbmcpO1xyXG5cclxuICAgICAgICAgICAgdXJsID0gc2lnbmFsUi50cmFuc3BvcnRzLl9sb2dpYy5wcmVwYXJlUXVlcnlTdHJpbmcoY29ubmVjdGlvbiwgdXJsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgY2xpZW50IHZlcnNpb24gdG8gdGhlIG5lZ290aWF0ZSByZXF1ZXN0LiAgV2UgdXRpbGl6ZSB0aGUgc2FtZSBhZGRRcyBtZXRob2QgaGVyZVxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IGl0IGNhbiBhcHBlbmQgdGhlIGNsaWVudFZlcnNpb24gYXBwcm9wcmlhdGVseSB0byB0aGUgVVJMXHJcbiAgICAgICAgICAgIHVybCA9IHNpZ25hbFIudHJhbnNwb3J0cy5fbG9naWMuYWRkUXModXJsLCB7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRQcm90b2NvbDogY29ubmVjdGlvbi5jbGllbnRQcm90b2NvbFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiTmVnb3RpYXRpbmcgd2l0aCAnXCIgKyB1cmwgKyBcIicuXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgYWpheCBuZWdvdGlhdGUgcmVxdWVzdCBvYmplY3Qgc28gd2UgY2FuIGFib3J0IGl0IGlmIHN0b3AgaXMgY2FsbGVkIHdoaWxlIHRoZSByZXF1ZXN0IGlzIGluIGZsaWdodC5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLm5lZ290aWF0ZVJlcXVlc3QgPSAkLmFqYXgoXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh7fSwgJC5zaWduYWxSLmFqYXhEZWZhdWx0cywge1xyXG4gICAgICAgICAgICAgICAgICAgIHhockZpZWxkczogeyB3aXRoQ3JlZGVudGlhbHM6IGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogY29ubmVjdGlvbi5jb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogY29ubmVjdGlvbi5hamF4RGF0YVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvciwgc3RhdHVzVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGNhdXNlIGFueSBlcnJvcnMgaWYgd2UncmUgYWJvcnRpbmcgb3VyIG93biBuZWdvdGlhdGUgcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c1RleHQgIT09IF9uZWdvdGlhdGVBYm9ydFRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFpbGVkKGVycm9yLCBjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVqZWN0aW9uIHdpbGwgbm9vcCBpZiB0aGUgZGVmZXJyZWQgaGFzIGFscmVhZHkgYmVlbiByZXNvbHZlZCBvciByZWplY3RlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChzaWduYWxSLl8uZXJyb3IocmVzb3VyY2VzLnN0b3BwZWRXaGlsZU5lZ290aWF0aW5nLCBudWxsIC8qIGVycm9yICovLCBjb25uZWN0aW9uLl8ubmVnb3RpYXRlUmVxdWVzdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmVEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2xFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zcG9ydHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBjb25uZWN0aW9uLl9wYXJzZVJlc3BvbnNlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZhaWxlZChzaWduYWxSLl8uZXJyb3IocmVzb3VyY2VzLmVycm9yUGFyc2luZ05lZ290aWF0ZVJlc3BvbnNlLCBlcnJvciksIGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmVEYXRhID0gY29ubmVjdGlvbi5fLmtlZXBBbGl2ZURhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uYXBwUmVsYXRpdmVVcmwgPSByZXMuVXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmlkID0gcmVzLkNvbm5lY3Rpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi50b2tlbiA9IHJlcy5Db25uZWN0aW9uVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ud2ViU29ja2V0U2VydmVyVXJsID0gcmVzLldlYlNvY2tldFNlcnZlclVybDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uY2UgdGhlIHNlcnZlciBoYXMgbGFiZWxlZCB0aGUgUGVyc2lzdGVudENvbm5lY3Rpb24gYXMgRGlzY29ubmVjdGVkLCB3ZSBzaG91bGQgc3RvcCBhdHRlbXB0aW5nIHRvIHJlY29ubmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciByZXMuRGlzY29ubmVjdFRpbWVvdXQgc2Vjb25kcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5kaXNjb25uZWN0VGltZW91dCA9IHJlcy5EaXNjb25uZWN0VGltZW91dCAqIDEwMDA7IC8vIGluIG1zXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIFRyYW5zcG9ydENvbm5lY3RUaW1lb3V0IGZyb20gdGhlIHJlc3BvbnNlIHRvIHRoZSB0cmFuc3BvcnRDb25uZWN0VGltZW91dCBmcm9tIHRoZSBjbGllbnQgdG8gY2FsY3VsYXRlIHRoZSB0b3RhbCB0aW1lb3V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uXy50b3RhbFRyYW5zcG9ydENvbm5lY3RUaW1lb3V0ID0gY29ubmVjdGlvbi50cmFuc3BvcnRDb25uZWN0VGltZW91dCArIHJlcy5UcmFuc3BvcnRDb25uZWN0VGltZW91dCAqIDEwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEga2VlcCBhbGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLktlZXBBbGl2ZVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBrZWVwIGFsaXZlIGRhdGEgYXMgYWN0aXZhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmVEYXRhLmFjdGl2YXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGltZW91dCB0byBkZXNpZ25hdGUgd2hlbiB0byBmb3JjZSB0aGUgY29ubmVjdGlvbiBpbnRvIHJlY29ubmVjdGluZyBjb252ZXJ0ZWQgdG8gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmVEYXRhLnRpbWVvdXQgPSByZXMuS2VlcEFsaXZlVGltZW91dCAqIDEwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGltZW91dCB0byBkZXNpZ25hdGUgd2hlbiB0byB3YXJuIHRoZSBkZXZlbG9wZXIgdGhhdCB0aGUgY29ubmVjdGlvbiBtYXkgYmUgZGVhZCBvciBpcyBub3QgcmVzcG9uZGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBBbGl2ZURhdGEudGltZW91dFdhcm5pbmcgPSBrZWVwQWxpdmVEYXRhLnRpbWVvdXQgKiBjb25uZWN0aW9uLmtlZXBBbGl2ZVdhcm5BdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgZnJlcXVlbmN5IGluIHdoaWNoIHdlIGNoZWNrIHRoZSBrZWVwIGFsaXZlLiAgSXQgbXVzdCBiZSBzaG9ydCBpbiBvcmRlciB0byBub3QgbWlzcy9waWNrIHVwIGFueSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8uYmVhdEludGVydmFsID0gKGtlZXBBbGl2ZURhdGEudGltZW91dCAtIGtlZXBBbGl2ZURhdGEudGltZW91dFdhcm5pbmcpIC8gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBBbGl2ZURhdGEuYWN0aXZhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVjb25uZWN0V2luZG93ID0gY29ubmVjdGlvbi5kaXNjb25uZWN0VGltZW91dCArIChrZWVwQWxpdmVEYXRhLnRpbWVvdXQgfHwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5Qcm90b2NvbFZlcnNpb24gfHwgcmVzLlByb3RvY29sVmVyc2lvbiAhPT0gY29ubmVjdGlvbi5jbGllbnRQcm90b2NvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2xFcnJvciA9IHNpZ25hbFIuXy5lcnJvcihzaWduYWxSLl8uZm9ybWF0KHJlc291cmNlcy5wcm90b2NvbEluY29tcGF0aWJsZSwgY29ubmVjdGlvbi5jbGllbnRQcm90b2NvbCwgcmVzLlByb3RvY29sVmVyc2lvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjb25uZWN0aW9uKS50cmlnZ2VySGFuZGxlcihldmVudHMub25FcnJvciwgW3Byb3RvY29sRXJyb3JdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChwcm90b2NvbEVycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChzaWduYWxSLnRyYW5zcG9ydHMsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoa2V5LmluZGV4T2YoXCJfXCIpID09PSAwKSB8fCAoa2V5ID09PSBcIndlYlNvY2tldHNcIiAmJiAhcmVzLlRyeVdlYlNvY2tldHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc3BvcnRzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0FycmF5KGNvbmZpZy50cmFuc3BvcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goY29uZmlnLnRyYW5zcG9ydCwgZnVuY3Rpb24gKF8sIHRyYW5zcG9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkodHJhbnNwb3J0LCBzdXBwb3J0ZWRUcmFuc3BvcnRzKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMucHVzaCh0cmFuc3BvcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy50cmFuc3BvcnQgPT09IFwiYXV0b1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzID0gc3VwcG9ydGVkVHJhbnNwb3J0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkLmluQXJyYXkoY29uZmlnLnRyYW5zcG9ydCwgc3VwcG9ydGVkVHJhbnNwb3J0cykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0cy5wdXNoKGNvbmZpZy50cmFuc3BvcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplKHRyYW5zcG9ydHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHN0YXJ0aW5nOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCBiZWZvcmUgYW55dGhpbmcgaXMgc2VudCBvdmVyIHRoZSBjb25uZWN0aW9uPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjYWxsYmFja1wiIHR5cGU9XCJGdW5jdGlvblwiPkEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZSBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gaXMgZnVsbHkgaW5zdGFudGlhdGVkLjwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwic2lnbmFsUlwiIC8+XHJcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gdGhpcztcclxuICAgICAgICAgICAgJChjb25uZWN0aW9uKS5iaW5kKGV2ZW50cy5vblN0YXJ0aW5nLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNlbmQ6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5TZW5kcyBkYXRhIG92ZXIgdGhlIGNvbm5lY3Rpb248L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImRhdGFcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIGRhdGEgdG8gc2VuZCBvdmVyIHRoZSBjb25uZWN0aW9uPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvbiBoYXNuJ3QgYmVlbiBzdGFydGVkIHlldFxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmFsUjogQ29ubmVjdGlvbiBtdXN0IGJlIHN0YXJ0ZWQgYmVmb3JlIGRhdGEgY2FuIGJlIHNlbnQuIENhbGwgLnN0YXJ0KCkgYmVmb3JlIC5zZW5kKClcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlID09PSBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5jb25uZWN0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uIGhhc24ndCBiZWVuIHN0YXJ0ZWQgeWV0XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYWxSOiBDb25uZWN0aW9uIGhhcyBub3QgYmVlbiBmdWxseSBpbml0aWFsaXplZC4gVXNlIC5zdGFydCgpLmRvbmUoKSBvciAuc3RhcnQoKS5mYWlsKCkgdG8gcnVuIGxvZ2ljIGFmdGVyIHRoZSBjb25uZWN0aW9uIGhhcyBzdGFydGVkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi50cmFuc3BvcnQuc2VuZChjb25uZWN0aW9uLCBkYXRhKTtcclxuICAgICAgICAgICAgLy8gUkVWSUVXOiBTaG91bGQgd2UgcmV0dXJuIGRlZmVycmVkIGhlcmU/XHJcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlY2VpdmVkOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCBhZnRlciBhbnl0aGluZyBpcyByZWNlaXZlZCBvdmVyIHRoZSBjb25uZWN0aW9uPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjYWxsYmFja1wiIHR5cGU9XCJGdW5jdGlvblwiPkEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aGVuIGFueSBkYXRhIGlzIHJlY2VpdmVkIG9uIHRoZSBjb25uZWN0aW9uPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uUmVjZWl2ZWQsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbm5lY3Rpb24sIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc3RhdGVDaGFuZ2VkOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBjb25uZWN0aW9uIHN0YXRlIGNoYW5nZXM8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+QSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlczwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwic2lnbmFsUlwiIC8+XHJcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gdGhpcztcclxuICAgICAgICAgICAgJChjb25uZWN0aW9uKS5iaW5kKGV2ZW50cy5vblN0YXRlQ2hhbmdlZCwgZnVuY3Rpb24gKGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29ubmVjdGlvbiwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgYWZ0ZXIgYW4gZXJyb3Igb2NjdXJzIHdpdGggdGhlIGNvbm5lY3Rpb248L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+QSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gYW4gZXJyb3Igb2NjdXJzIG9uIHRoZSBjb25uZWN0aW9uPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uRXJyb3IsIGZ1bmN0aW9uIChlLCBlcnJvckRhdGEsIHNlbmREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBwcmFjdGljZSAnZXJyb3JEYXRhJyBpcyB0aGUgU2lnbmFsUiBidWlsdCBlcnJvciBvYmplY3QuXHJcbiAgICAgICAgICAgICAgICAvLyBJbiBwcmFjdGljZSAnc2VuZERhdGEnIGlzIHVuZGVmaW5lZCBmb3IgYWxsIGVycm9yIGV2ZW50cyBleGNlcHQgdGhvc2UgdHJpZ2dlcmVkIGJ5XHJcbiAgICAgICAgICAgICAgICAvLyAnYWpheFNlbmQnIGFuZCAnd2ViU29ja2V0cy5zZW5kJy4nc2VuZERhdGEnIGlzIHRoZSBvcmlnaW5hbCBzZW5kIHBheWxvYWQuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbm5lY3Rpb24sIGVycm9yRGF0YSwgc2VuZERhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZGlzY29ubmVjdGVkOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBjbGllbnQgZGlzY29ubmVjdHM8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+QSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgYnJva2VuPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uRGlzY29ubmVjdCwgZnVuY3Rpb24gKGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjb25uZWN0aW9uU2xvdzogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgY2xpZW50IGRldGVjdHMgYSBzbG93IGNvbm5lY3Rpb248L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+QSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgc2xvdzwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwic2lnbmFsUlwiIC8+XHJcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gdGhpcztcclxuICAgICAgICAgICAgJChjb25uZWN0aW9uKS5iaW5kKGV2ZW50cy5vbkNvbm5lY3Rpb25TbG93LCBmdW5jdGlvbiAoZSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZWNvbm5lY3Rpbmc6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+QWRkcyBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGJlZ2lucyByZWNvbm5lY3Rpbmc8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+QSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGNvbm5lY3Rpb24gZW50ZXJzIGEgcmVjb25uZWN0aW5nIHN0YXRlPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uUmVjb25uZWN0aW5nLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlY29ubmVjdGVkOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCByZWNvbm5lY3RzPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjYWxsYmFja1wiIHR5cGU9XCJGdW5jdGlvblwiPkEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIHJlc3RvcmVkPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLmJpbmQoZXZlbnRzLm9uUmVjb25uZWN0LCBmdW5jdGlvbiAoZSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIChhc3luYywgbm90aWZ5U2VydmVyKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5TdG9wcyBsaXN0ZW5pbmc8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFzeW5jXCIgdHlwZT1cIkJvb2xlYW5cIj5XaGV0aGVyIG9yIG5vdCB0byBhc3luY2hyb25vdXNseSBhYm9ydCB0aGUgY29ubmVjdGlvbjwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5vdGlmeVNlcnZlclwiIHR5cGU9XCJCb29sZWFuXCI+V2hldGhlciB3ZSB3YW50IHRvIG5vdGlmeSB0aGUgc2VydmVyIHRoYXQgd2UgYXJlIGFib3J0aW5nIHRoZSBjb25uZWN0aW9uPC9wYXJhbT5cclxuICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJzaWduYWxSXCIgLz5cclxuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBkZWZlcnJhbCBiZWNhdXNlIHRoaXMgaXMgYWx3YXlzIGNsZWFuZWQgdXBcclxuICAgICAgICAgICAgICAgIGRlZmVycmFsID0gY29ubmVjdGlvbi5fZGVmZXJyYWw7XHJcblxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB3ZSd2ZSBib3VuZCBhIGxvYWQgZXZlbnQuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLl8uZGVmZXJyZWRTdGFydEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVuYmluZCB0aGUgZXZlbnQuXHJcbiAgICAgICAgICAgICAgICBfcGFnZVdpbmRvdy51bmJpbmQoXCJsb2FkXCIsIGNvbm5lY3Rpb24uXy5kZWZlcnJlZFN0YXJ0SGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjbGVhbiB1cCBwcml2YXRlIG5vbi10aW1lb3V0IGJhc2VkIHN0YXRlLlxyXG4gICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5fZGVmZXJyYWw7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLl8uY29uZmlnO1xyXG4gICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5fLmRlZmVycmVkU3RhcnRIYW5kbGVyO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBiZSBjaGVja2VkIGRlc3BpdGUgdGhlIGNvbm5lY3Rpb24gc3RhdGUgYmVjYXVzZSBhIGNvbm5lY3Rpb24gc3RhcnQgY2FuIGJlIGRlZmVycmVkIHVudGlsIHBhZ2UgbG9hZC5cclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgZGVmZXJyZWQgdGhlIHN0YXJ0IGR1ZSB0byBhIHBhZ2UgbG9hZCB3ZSBuZWVkIHRvIHVuYmluZCB0aGUgXCJvbkxvYWRcIiAtPiBzdGFydCBldmVudC5cclxuICAgICAgICAgICAgaWYgKCFfcGFnZUxvYWRlZCAmJiAoIWNvbm5lY3Rpb24uXy5jb25maWcgfHwgY29ubmVjdGlvbi5fLmNvbmZpZy53YWl0Rm9yUGFnZUxvYWQgPT09IHRydWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIlN0b3BwaW5nIGNvbm5lY3Rpb24gcHJpb3IgdG8gbmVnb3RpYXRlLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgZGVmZXJyYWwgd2Ugc2hvdWxkIHJlamVjdCBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmVycmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KHNpZ25hbFIuXy5lcnJvcihyZXNvdXJjZXMuc3RvcHBlZFdoaWxlTG9hZGluZykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNob3J0LWNpcmN1aXQgYmVjYXVzZSB0aGUgc3RhcnQgaGFzIG5vdCBiZWVuIGZ1bGx5IHN0YXJ0ZWQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlID09PSBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5kaXNjb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJTdG9wcGluZyBjb25uZWN0aW9uLlwiKTtcclxuXHJcbiAgICAgICAgICAgIGNoYW5nZVN0YXRlKGNvbm5lY3Rpb24sIGNvbm5lY3Rpb24uc3RhdGUsIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIG5vIG1hdHRlciB3aGF0XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoY29ubmVjdGlvbi5fLmJlYXRIYW5kbGUpO1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb24uXy5vbkZhaWxlZFRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChjb25uZWN0aW9uLl8ucGluZ0ludGVydmFsSWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24udHJhbnNwb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydC5zdG9wKGNvbm5lY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub3RpZnlTZXJ2ZXIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi50cmFuc3BvcnQuYWJvcnQoY29ubmVjdGlvbiwgYXN5bmMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnRyYW5zcG9ydC5zdXBwb3J0c0tlZXBBbGl2ZSAmJiBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YS5hY3RpdmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljLnN0b3BNb25pdG9yaW5nS2VlcEFsaXZlKGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uXy5uZWdvdGlhdGVSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbmVnb3RpYXRpb24gcmVxdWVzdCBoYXMgYWxyZWFkeSBjb21wbGV0ZWQgdGhpcyB3aWxsIG5vb3AuXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8ubmVnb3RpYXRlUmVxdWVzdC5hYm9ydChfbmVnb3RpYXRlQWJvcnRUZXh0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLl8ubmVnb3RpYXRlUmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgZGlzY29ubmVjdCBldmVudFxyXG4gICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vbkRpc2Nvbm5lY3QpO1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24ubWVzc2FnZUlkO1xyXG4gICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5ncm91cHNUb2tlbjtcclxuICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24uaWQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLl8ucGluZ0ludGVydmFsSWQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLl8ubGFzdE1lc3NhZ2VBdDtcclxuICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24uXy5sYXN0QWN0aXZlQXQ7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGVhciBvdXQgb3VyIG1lc3NhZ2UgYnVmZmVyXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uXy5jb25uZWN0aW5nTWVzc2FnZUJ1ZmZlci5jbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbG9nOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIGxvZyhtc2csIHRoaXMubG9nZ2luZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBzaWduYWxSLmZuLmluaXQucHJvdG90eXBlID0gc2lnbmFsUi5mbjtcclxuXHJcbiAgICBzaWduYWxSLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlJlaW5zdGF0ZXMgdGhlIG9yaWdpbmFsIHZhbHVlIG9mICQuY29ubmVjdGlvbiBhbmQgcmV0dXJucyB0aGUgc2lnbmFsUiBvYmplY3QgZm9yIG1hbnVhbCBhc3NpZ25tZW50PC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwic2lnbmFsUlwiIC8+XHJcbiAgICAgICAgaWYgKCQuY29ubmVjdGlvbiA9PT0gc2lnbmFsUikge1xyXG4gICAgICAgICAgICAkLmNvbm5lY3Rpb24gPSBfY29ubmVjdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNpZ25hbFI7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICgkLmNvbm5lY3Rpb24pIHtcclxuICAgICAgICBfY29ubmVjdGlvbiA9ICQuY29ubmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAkLmNvbm5lY3Rpb24gPSAkLnNpZ25hbFIgPSBzaWduYWxSO1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy5jb21tb24uanMgKi9cclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgT3BlbiBUZWNobm9sb2dpZXMsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gU2VlIExpY2Vuc2UubWQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuXHJcbi8qZ2xvYmFsIHdpbmRvdzpmYWxzZSAqL1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwianF1ZXJ5LnNpZ25hbFIuY29yZS5qc1wiIC8+XHJcblxyXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgdW5kZWZpbmVkKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgc2lnbmFsUiA9ICQuc2lnbmFsUixcclxuICAgICAgICBldmVudHMgPSAkLnNpZ25hbFIuZXZlbnRzLFxyXG4gICAgICAgIGNoYW5nZVN0YXRlID0gJC5zaWduYWxSLmNoYW5nZVN0YXRlLFxyXG4gICAgICAgIHRyYW5zcG9ydExvZ2ljO1xyXG5cclxuICAgIHNpZ25hbFIudHJhbnNwb3J0cyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGJlYXQoY29ubmVjdGlvbikge1xyXG4gICAgICAgIGlmIChjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YS5tb25pdG9yaW5nKSB7XHJcbiAgICAgICAgICAgIGNoZWNrSWZBbGl2ZShjb25uZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHdlIHN1Y2Nlc3NmdWxseSBtYXJrZWQgYWN0aXZlIGJlZm9yZSBjb250aW51aW5nIHRoZSBoZWFydGJlYXQuXHJcbiAgICAgICAgaWYgKHRyYW5zcG9ydExvZ2ljLm1hcmtBY3RpdmUoY29ubmVjdGlvbikpIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLmJlYXRIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBiZWF0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICB9LCBjb25uZWN0aW9uLl8uYmVhdEludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tJZkFsaXZlKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICB2YXIga2VlcEFsaXZlRGF0YSA9IGNvbm5lY3Rpb24uXy5rZWVwQWxpdmVEYXRhLFxyXG4gICAgICAgICAgICB0aW1lRWxhcHNlZDtcclxuXHJcbiAgICAgICAgLy8gT25seSBjaGVjayBpZiB3ZSdyZSBjb25uZWN0ZWRcclxuICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSA9PT0gc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRpbWVFbGFwc2VkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBjb25uZWN0aW9uLl8ubGFzdE1lc3NhZ2VBdDtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBrZWVwIGFsaXZlIGhhcyBjb21wbGV0ZWx5IHRpbWVkIG91dFxyXG4gICAgICAgICAgICBpZiAodGltZUVsYXBzZWQgPj0ga2VlcEFsaXZlRGF0YS50aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIktlZXAgYWxpdmUgdGltZWQgb3V0LiAgTm90aWZ5aW5nIHRyYW5zcG9ydCB0aGF0IGNvbm5lY3Rpb24gaGFzIGJlZW4gbG9zdC5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTm90aWZ5IHRyYW5zcG9ydCB0aGF0IHRoZSBjb25uZWN0aW9uIGhhcyBiZWVuIGxvc3RcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0Lmxvc3RDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVFbGFwc2VkID49IGtlZXBBbGl2ZURhdGEudGltZW91dFdhcm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdG8gYXNzdXJlIHRoYXQgdGhlIHVzZXIgb25seSBnZXRzIGEgc2luZ2xlIHdhcm5pbmdcclxuICAgICAgICAgICAgICAgIGlmICgha2VlcEFsaXZlRGF0YS51c2VyTm90aWZpZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIktlZXAgYWxpdmUgaGFzIGJlZW4gbWlzc2VkLCBjb25uZWN0aW9uIG1heSBiZSBkZWFkL3Nsb3cuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uQ29ubmVjdGlvblNsb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGtlZXBBbGl2ZURhdGEudXNlck5vdGlmaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGtlZXBBbGl2ZURhdGEudXNlck5vdGlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkQ29ubmVjdGlvbkRhdGEodXJsLCBjb25uZWN0aW9uRGF0YSkge1xyXG4gICAgICAgIHZhciBhcHBlbmRlciA9IHVybC5pbmRleE9mKFwiP1wiKSAhPT0gLTEgPyBcIiZcIiA6IFwiP1wiO1xyXG5cclxuICAgICAgICBpZiAoY29ubmVjdGlvbkRhdGEpIHtcclxuICAgICAgICAgICAgdXJsICs9IGFwcGVuZGVyICsgXCJjb25uZWN0aW9uRGF0YT1cIiArIHdpbmRvdy5lbmNvZGVVUklDb21wb25lbnQoY29ubmVjdGlvbkRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc3BvcnRMb2dpYyA9IHNpZ25hbFIudHJhbnNwb3J0cy5fbG9naWMgPSB7XHJcbiAgICAgICAgcGluZ1NlcnZlcjogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlBpbmdzIHRoZSBzZXJ2ZXI8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNvbm5lY3Rpb25cIiB0eXBlPVwic2lnbmFsclwiPkNvbm5lY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzZXJ2ZXIgcGluZzwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwic2lnbmFsUlwiIC8+XHJcbiAgICAgICAgICAgIHZhciB1cmwsIGRlZmVycmFsID0gJC5EZWZlcnJlZCgpLCB4aHI7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbi50cmFuc3BvcnQpIHtcclxuICAgICAgICAgICAgICAgIHVybCA9IGNvbm5lY3Rpb24udXJsICsgXCIvcGluZ1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIHVybCA9IHRyYW5zcG9ydExvZ2ljLmFkZFFzKHVybCwgY29ubmVjdGlvbi5xcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgeGhyID0gJC5hamF4KFxyXG4gICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKHt9LCAkLnNpZ25hbFIuYWpheERlZmF1bHRzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhockZpZWxkczogeyB3aXRoQ3JlZGVudGlhbHM6IGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogY29ubmVjdGlvbi5jb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBjb25uZWN0aW9uLmFqYXhEYXRhVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gY29ubmVjdGlvbi5fcGFyc2VSZXNwb25zZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxSLl8udHJhbnNwb3J0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxSLnJlc291cmNlcy5waW5nU2VydmVyRmFpbGVkUGFyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5SZXNwb25zZSA9PT0gXCJwb25nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZWplY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuXy50cmFuc3BvcnRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuXy5mb3JtYXQoc2lnbmFsUi5yZXNvdXJjZXMucGluZ1NlcnZlckZhaWxlZEludmFsaWRSZXNwb25zZSwgcmVzdWx0LnJlc3BvbnNlVGV4dCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgLyogZXJyb3IgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSB8fCBlcnJvci5zdGF0dXMgPT09IDQwMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5fLnRyYW5zcG9ydEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5fLmZvcm1hdChzaWduYWxSLnJlc291cmNlcy5waW5nU2VydmVyRmFpbGVkU3RhdHVzQ29kZSwgZXJyb3Iuc3RhdHVzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZWplY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuXy50cmFuc3BvcnRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIucmVzb3VyY2VzLnBpbmdTZXJ2ZXJGYWlsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuXy50cmFuc3BvcnRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5yZXNvdXJjZXMubm9Db25uZWN0aW9uVHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJhbC5wcm9taXNlKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcHJlcGFyZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgdXJsKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHRyYW5zcG9ydExvZ2ljLmFkZFFzKHVybCwgY29ubmVjdGlvbi5xcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYWRkQ29ubmVjdGlvbkRhdGEodXJsLCBjb25uZWN0aW9uLmRhdGEpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFkZFFzOiBmdW5jdGlvbiAodXJsLCBxcykge1xyXG4gICAgICAgICAgICB2YXIgYXBwZW5kZXIgPSB1cmwuaW5kZXhPZihcIj9cIikgIT09IC0xID8gXCImXCIgOiBcIj9cIixcclxuICAgICAgICAgICAgICAgIGZpcnN0Q2hhcjtcclxuXHJcbiAgICAgICAgICAgIGlmICghcXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHFzKSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybCArIGFwcGVuZGVyICsgJC5wYXJhbShxcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHFzKSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgZmlyc3RDaGFyID0gcXMuY2hhckF0KDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdENoYXIgPT09IFwiP1wiIHx8IGZpcnN0Q2hhciA9PT0gXCImXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybCArIGFwcGVuZGVyICsgcXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlF1ZXJ5IHN0cmluZyBwcm9wZXJ0eSBtdXN0IGJlIGVpdGhlciBhIHN0cmluZyBvciBvYmplY3QuXCIpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldFVybDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIHRyYW5zcG9ydCwgcmVjb25uZWN0aW5nLCBwb2xsKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5HZXRzIHRoZSB1cmwgZm9yIG1ha2luZyBhIEdFVCBiYXNlZCBjb25uZWN0IHJlcXVlc3Q8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIHZhciBiYXNlVXJsID0gdHJhbnNwb3J0ID09PSBcIndlYlNvY2tldHNcIiA/IFwiXCIgOiBjb25uZWN0aW9uLmJhc2VVcmwsXHJcbiAgICAgICAgICAgICAgICB1cmwgPSBiYXNlVXJsICsgY29ubmVjdGlvbi5hcHBSZWxhdGl2ZVVybCxcclxuICAgICAgICAgICAgICAgIHFzID0gXCJ0cmFuc3BvcnQ9XCIgKyB0cmFuc3BvcnQgKyBcIiZjb25uZWN0aW9uVG9rZW49XCIgKyB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KGNvbm5lY3Rpb24udG9rZW4pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uZ3JvdXBzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHFzICs9IFwiJmdyb3Vwc1Rva2VuPVwiICsgd2luZG93LmVuY29kZVVSSUNvbXBvbmVudChjb25uZWN0aW9uLmdyb3Vwc1Rva2VuKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFyZWNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgIHVybCArPSBcIi9jb25uZWN0XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9sbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvbmdQb2xsaW5nIHRyYW5zcG9ydCBzcGVjaWZpY1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCArPSBcIi9wb2xsXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCArPSBcIi9yZWNvbm5lY3RcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5tZXNzYWdlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBxcyArPSBcIiZtZXNzYWdlSWQ9XCIgKyB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KGNvbm5lY3Rpb24ubWVzc2FnZUlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cmwgKz0gXCI/XCIgKyBxcztcclxuICAgICAgICAgICAgdXJsID0gdHJhbnNwb3J0TG9naWMucHJlcGFyZVF1ZXJ5U3RyaW5nKGNvbm5lY3Rpb24sIHVybCk7XHJcbiAgICAgICAgICAgIHVybCArPSBcIiZ0aWQ9XCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbWF4aW1pemVQZXJzaXN0ZW50UmVzcG9uc2U6IGZ1bmN0aW9uIChtaW5QZXJzaXN0ZW50UmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VJZDogbWluUGVyc2lzdGVudFJlc3BvbnNlLkMsXHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlczogbWluUGVyc2lzdGVudFJlc3BvbnNlLk0sXHJcbiAgICAgICAgICAgICAgICBJbml0aWFsaXplZDogdHlwZW9mIChtaW5QZXJzaXN0ZW50UmVzcG9uc2UuUykgIT09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBEaXNjb25uZWN0OiB0eXBlb2YgKG1pblBlcnNpc3RlbnRSZXNwb25zZS5EKSAhPT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFNob3VsZFJlY29ubmVjdDogdHlwZW9mIChtaW5QZXJzaXN0ZW50UmVzcG9uc2UuVCkgIT09IFwidW5kZWZpbmVkXCIgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBMb25nUG9sbERlbGF5OiBtaW5QZXJzaXN0ZW50UmVzcG9uc2UuTCxcclxuICAgICAgICAgICAgICAgIEdyb3Vwc1Rva2VuOiBtaW5QZXJzaXN0ZW50UmVzcG9uc2UuR1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVwZGF0ZUdyb3VwczogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGdyb3Vwc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIGlmIChncm91cHNUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5ncm91cHNUb2tlbiA9IGdyb3Vwc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc3RyaW5naWZ5U2VuZDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAobWVzc2FnZSkgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIChtZXNzYWdlKSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBtZXNzYWdlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5qc29uLnN0cmluZ2lmeShtZXNzYWdlKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBhamF4U2VuZDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBheWxvYWQgPSB0cmFuc3BvcnRMb2dpYy5zdHJpbmdpZnlTZW5kKGNvbm5lY3Rpb24sIGRhdGEpLFxyXG4gICAgICAgICAgICAgICAgdXJsID0gY29ubmVjdGlvbi51cmwgKyBcIi9zZW5kXCIgKyBcIj90cmFuc3BvcnQ9XCIgKyBjb25uZWN0aW9uLnRyYW5zcG9ydC5uYW1lICsgXCImY29ubmVjdGlvblRva2VuPVwiICsgd2luZG93LmVuY29kZVVSSUNvbXBvbmVudChjb25uZWN0aW9uLnRva2VuKSxcclxuICAgICAgICAgICAgICAgIHhocixcclxuICAgICAgICAgICAgICAgIG9uRmFpbCA9IGZ1bmN0aW9uIChlcnJvciwgY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uRXJyb3IsIFtzaWduYWxSLl8udHJhbnNwb3J0RXJyb3Ioc2lnbmFsUi5yZXNvdXJjZXMuc2VuZEZhaWxlZCwgY29ubmVjdGlvbi50cmFuc3BvcnQsIGVycm9yLCB4aHIpLCBkYXRhXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdXJsID0gdHJhbnNwb3J0TG9naWMucHJlcGFyZVF1ZXJ5U3RyaW5nKGNvbm5lY3Rpb24sIHVybCk7XHJcblxyXG4gICAgICAgICAgICB4aHIgPSAkLmFqYXgoXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh7fSwgJC5zaWduYWxSLmFqYXhEZWZhdWx0cywge1xyXG4gICAgICAgICAgICAgICAgICAgIHhockZpZWxkczogeyB3aXRoQ3JlZGVudGlhbHM6IGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29ubmVjdGlvbi5hamF4RGF0YVR5cGUgPT09IFwianNvbnBcIiA/IFwiR0VUXCIgOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogc2lnbmFsUi5fLmRlZmF1bHRDb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogY29ubmVjdGlvbi5hamF4RGF0YVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGNvbm5lY3Rpb24uX3BhcnNlUmVzcG9uc2UocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFpbChlcnJvciwgY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLnRyaWdnZXJSZWNlaXZlZChjb25uZWN0aW9uLCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yLCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSBcImFib3J0XCIgfHwgdGV4dFN0YXR1cyA9PT0gXCJwYXJzZXJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcGFyc2VyZXJyb3IgaGFwcGVucyBmb3Igc2VuZHMgdGhhdCBkb24ndCByZXR1cm4gYW55IGRhdGEsIGFuZCBoZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3Qgd3JpdGUgdGhlIGpzb25wIGNhbGxiYWNrIHRvIHRoZSByZXNwb25zZS4gVGhpcyBpcyBoYXJkZXIgdG8gZml4IG9uIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGp1c3QgaGFjayBhcm91bmQgaXQgb24gdGhlIGNsaWVudCBmb3Igbm93LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZhaWwoZXJyb3IsIGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geGhyO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFqYXhBYm9ydDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGNvbm5lY3Rpb24udHJhbnNwb3J0KSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBc3luYyBieSBkZWZhdWx0IHVubGVzcyBleHBsaWNpdGx5IG92ZXJpZGRlblxyXG4gICAgICAgICAgICBhc3luYyA9IHR5cGVvZiBhc3luYyA9PT0gXCJ1bmRlZmluZWRcIiA/IHRydWUgOiBhc3luYztcclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBjb25uZWN0aW9uLnVybCArIFwiL2Fib3J0XCIgKyBcIj90cmFuc3BvcnQ9XCIgKyBjb25uZWN0aW9uLnRyYW5zcG9ydC5uYW1lICsgXCImY29ubmVjdGlvblRva2VuPVwiICsgd2luZG93LmVuY29kZVVSSUNvbXBvbmVudChjb25uZWN0aW9uLnRva2VuKTtcclxuICAgICAgICAgICAgdXJsID0gdHJhbnNwb3J0TG9naWMucHJlcGFyZVF1ZXJ5U3RyaW5nKGNvbm5lY3Rpb24sIHVybCk7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh7fSwgJC5zaWduYWxSLmFqYXhEZWZhdWx0cywge1xyXG4gICAgICAgICAgICAgICAgICAgIHhockZpZWxkczogeyB3aXRoQ3JlZGVudGlhbHM6IGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IGFzeW5jLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGNvbm5lY3Rpb24uY29udGVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IGNvbm5lY3Rpb24uYWpheERhdGFUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICkpO1xyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJGaXJlZCBhamF4IGFib3J0IGFzeW5jID0gXCIgKyBhc3luYyArIFwiLlwiKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0cnlJbml0aWFsaXplOiBmdW5jdGlvbiAocGVyc2lzdGVudFJlc3BvbnNlLCBvbkluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW50UmVzcG9uc2UuSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRyaWdnZXJSZWNlaXZlZDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLl8uY29ubmVjdGluZ01lc3NhZ2VCdWZmZXIudHJ5QnVmZmVyKGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vblJlY2VpdmVkLCBbZGF0YV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcHJvY2Vzc01lc3NhZ2VzOiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgbWluRGF0YSwgb25Jbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCBtZXNzYWdlIHRpbWUgc3RhbXBcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMubWFya0xhc3RNZXNzYWdlKGNvbm5lY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1pbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSB0cmFuc3BvcnRMb2dpYy5tYXhpbWl6ZVBlcnNpc3RlbnRSZXNwb25zZShtaW5EYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5EaXNjb25uZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJEaXNjb25uZWN0IGNvbW1hbmQgcmVjZWl2ZWQgZnJvbSBzZXJ2ZXIuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNjb25uZWN0ZWQgYnkgdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcChmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy51cGRhdGVHcm91cHMoY29ubmVjdGlvbiwgZGF0YS5Hcm91cHNUb2tlbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuTWVzc2FnZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5tZXNzYWdlSWQgPSBkYXRhLk1lc3NhZ2VJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5NZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLk1lc3NhZ2VzLCBmdW5jdGlvbiAoaW5kZXgsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMudHJpZ2dlclJlY2VpdmVkKGNvbm5lY3Rpb24sIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy50cnlJbml0aWFsaXplKGRhdGEsIG9uSW5pdGlhbGl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbW9uaXRvcktlZXBBbGl2ZTogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGtlZXBBbGl2ZURhdGEgPSBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmVuJ3QgaW5pdGlhdGVkIHRoZSBrZWVwIGFsaXZlIHRpbWVvdXRzIHRoZW4gd2UgbmVlZCB0b1xyXG4gICAgICAgICAgICBpZiAoIWtlZXBBbGl2ZURhdGEubW9uaXRvcmluZykge1xyXG4gICAgICAgICAgICAgICAga2VlcEFsaXZlRGF0YS5tb25pdG9yaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5tYXJrTGFzdE1lc3NhZ2UoY29ubmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZnVuY3Rpb24gc28gd2UgY2FuIHVuYmluZCBpdCBvbiBzdG9wXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YS5yZWNvbm5lY3RLZWVwQWxpdmVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBhIG5ldyBtZXNzYWdlIHNvIHRoYXQga2VlcCBhbGl2ZSBkb2Vzbid0IHRpbWUgb3V0IGNvbm5lY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMubWFya0xhc3RNZXNzYWdlKGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgS2VlcCBhbGl2ZSBvbiByZWNvbm5lY3RcclxuICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikuYmluZChldmVudHMub25SZWNvbm5lY3QsIGNvbm5lY3Rpb24uXy5rZWVwQWxpdmVEYXRhLnJlY29ubmVjdEtlZXBBbGl2ZVVwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJOb3cgbW9uaXRvcmluZyBrZWVwIGFsaXZlIHdpdGggYSB3YXJuaW5nIHRpbWVvdXQgb2YgXCIgKyBrZWVwQWxpdmVEYXRhLnRpbWVvdXRXYXJuaW5nICsgXCIgYW5kIGEgY29ubmVjdGlvbiBsb3N0IHRpbWVvdXQgb2YgXCIgKyBrZWVwQWxpdmVEYXRhLnRpbWVvdXQgKyBcIi5cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIlRyaWVkIHRvIG1vbml0b3Iga2VlcCBhbGl2ZSBidXQgaXQncyBhbHJlYWR5IGJlaW5nIG1vbml0b3JlZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdG9wTW9uaXRvcmluZ0tlZXBBbGl2ZTogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGtlZXBBbGl2ZURhdGEgPSBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9ubHkgYXR0ZW1wdCB0byBzdG9wIHRoZSBrZWVwIGFsaXZlIG1vbml0b3JpbmcgaWYgaXRzIGJlaW5nIG1vbml0b3JlZFxyXG4gICAgICAgICAgICBpZiAoa2VlcEFsaXZlRGF0YS5tb25pdG9yaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdG9wIG1vbml0b3JpbmdcclxuICAgICAgICAgICAgICAgIGtlZXBBbGl2ZURhdGEubW9uaXRvcmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdXBkYXRlS2VlcEFsaXZlIGZ1bmN0aW9uIGZyb20gdGhlIHJlY29ubmVjdCBldmVudFxyXG4gICAgICAgICAgICAgICAgJChjb25uZWN0aW9uKS51bmJpbmQoZXZlbnRzLm9uUmVjb25uZWN0LCBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YS5yZWNvbm5lY3RLZWVwQWxpdmVVcGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENsZWFyIGFsbCB0aGUga2VlcCBhbGl2ZSBkYXRhXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8ua2VlcEFsaXZlRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJTdG9wcGluZyB0aGUgbW9uaXRvcmluZyBvZiB0aGUga2VlcCBhbGl2ZS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdGFydEhlYXJ0YmVhdDogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLmxhc3RBY3RpdmVBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBiZWF0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG1hcmtMYXN0TWVzc2FnZTogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLmxhc3RNZXNzYWdlQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtYXJrQWN0aXZlOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBpZiAodHJhbnNwb3J0TG9naWMudmVyaWZ5TGFzdEFjdGl2ZShjb25uZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLmxhc3RBY3RpdmVBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpc0Nvbm5lY3RlZE9yUmVjb25uZWN0aW5nOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zdGF0ZSA9PT0gc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0YXRlID09PSBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5yZWNvbm5lY3Rpbmc7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZW5zdXJlUmVjb25uZWN0aW5nU3RhdGU6IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2VTdGF0ZShjb25uZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5jb25uZWN0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLnJlY29ubmVjdGluZykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uUmVjb25uZWN0aW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zdGF0ZSA9PT0gc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUucmVjb25uZWN0aW5nO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNsZWFyUmVjb25uZWN0VGltZW91dDogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24gJiYgY29ubmVjdGlvbi5fLnJlY29ubmVjdFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoY29ubmVjdGlvbi5fLnJlY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24uXy5yZWNvbm5lY3RUaW1lb3V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdmVyaWZ5TGFzdEFjdGl2ZTogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gY29ubmVjdGlvbi5fLmxhc3RBY3RpdmVBdCA+PSBjb25uZWN0aW9uLnJlY29ubmVjdFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJUaGVyZSBoYXMgbm90IGJlZW4gYW4gYWN0aXZlIHNlcnZlciBjb25uZWN0aW9uIGZvciBhbiBleHRlbmRlZCBwZXJpb2Qgb2YgdGltZS4gU3RvcHBpbmcgY29ubmVjdGlvbi5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVjb25uZWN0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgdHJhbnNwb3J0TmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gc2lnbmFsUi50cmFuc3BvcnRzW3RyYW5zcG9ydE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG9ubHkgc2V0IGEgcmVjb25uZWN0VGltZW91dCBpZiB3ZSBhcmUgY3VycmVudGx5IGNvbm5lY3RlZFxyXG4gICAgICAgICAgICAvLyBhbmQgYSByZWNvbm5lY3RUaW1lb3V0IGlzbid0IGFscmVhZHkgc2V0LlxyXG4gICAgICAgICAgICBpZiAodHJhbnNwb3J0TG9naWMuaXNDb25uZWN0ZWRPclJlY29ubmVjdGluZyhjb25uZWN0aW9uKSAmJiAhY29ubmVjdGlvbi5fLnJlY29ubmVjdFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gdmVyaWZ5IGJlZm9yZSB0aGUgc2V0VGltZW91dCBvY2N1cnMgYmVjYXVzZSBhbiBhcHBsaWNhdGlvbiBzbGVlcCBjb3VsZCBvY2N1ciBkdXJpbmcgdGhlIHNldFRpbWVvdXQgZHVyYXRpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zcG9ydExvZ2ljLnZlcmlmeUxhc3RBY3RpdmUoY29ubmVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLnJlY29ubmVjdFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFuc3BvcnRMb2dpYy52ZXJpZnlMYXN0QWN0aXZlKGNvbm5lY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydC5zdG9wKGNvbm5lY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNwb3J0TG9naWMuZW5zdXJlUmVjb25uZWN0aW5nU3RhdGUoY29ubmVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2codHJhbnNwb3J0TmFtZSArIFwiIHJlY29ubmVjdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydC5zdGFydChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBjb25uZWN0aW9uLnJlY29ubmVjdERlbGF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhhbmRsZVBhcnNlRmFpbHVyZTogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIHJlc3VsdCwgZXJyb3IsIG9uRmFpbGVkLCBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHRoZSBpbml0aWFsaXphdGlvbiBwaGFzZSB0cmlnZ2VyIG9uRmFpbGVkLCBvdGhlcndpc2Ugc3RvcCB0aGUgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiRmFpbGVkIHRvIHBhcnNlIHNlcnZlciByZXNwb25zZSB3aGlsZSBhdHRlbXB0aW5nIHRvIGNvbm5lY3QuXCIpO1xyXG4gICAgICAgICAgICAgICAgb25GYWlsZWQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoY29ubmVjdGlvbikudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uRXJyb3IsIFtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYWxSLl8udHJhbnNwb3J0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuXy5mb3JtYXQoc2lnbmFsUi5yZXNvdXJjZXMucGFyc2VGYWlsZWQsIHJlc3VsdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCldKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZm9yZXZlckZyYW1lOiB7XHJcbiAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICBjb25uZWN0aW9uczoge31cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy53ZWJTb2NrZXRzLmpzICovXHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IE9wZW4gVGVjaG5vbG9naWVzLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFNlZSBMaWNlbnNlLm1kIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcblxyXG4vKmdsb2JhbCB3aW5kb3c6ZmFsc2UgKi9cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImpxdWVyeS5zaWduYWxSLnRyYW5zcG9ydHMuY29tbW9uLmpzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoJCwgd2luZG93LCB1bmRlZmluZWQpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBzaWduYWxSID0gJC5zaWduYWxSLFxyXG4gICAgICAgIGV2ZW50cyA9ICQuc2lnbmFsUi5ldmVudHMsXHJcbiAgICAgICAgY2hhbmdlU3RhdGUgPSAkLnNpZ25hbFIuY2hhbmdlU3RhdGUsXHJcbiAgICAgICAgdHJhbnNwb3J0TG9naWMgPSBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljO1xyXG5cclxuICAgIHNpZ25hbFIudHJhbnNwb3J0cy53ZWJTb2NrZXRzID0ge1xyXG4gICAgICAgIG5hbWU6IFwid2ViU29ja2V0c1wiLFxyXG5cclxuICAgICAgICBzdXBwb3J0c0tlZXBBbGl2ZTogdHJ1ZSxcclxuXHJcbiAgICAgICAgc2VuZDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBheWxvYWQgPSB0cmFuc3BvcnRMb2dpYy5zdHJpbmdpZnlTZW5kKGNvbm5lY3Rpb24sIGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc29ja2V0LnNlbmQocGF5bG9hZCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vbkVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzaWduYWxSLl8udHJhbnNwb3J0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIucmVzb3VyY2VzLndlYlNvY2tldHNJbnZhbGlkU3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24udHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zb2NrZXRcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgb25TdWNjZXNzLCBvbkZhaWxlZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsLFxyXG4gICAgICAgICAgICAgICAgb3BlbmVkID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIHJlY29ubmVjdGluZyA9ICFvblN1Y2Nlc3MsXHJcbiAgICAgICAgICAgICAgICAkY29ubmVjdGlvbiA9ICQoY29ubmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5XZWJTb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIG9uRmFpbGVkKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLndlYlNvY2tldFNlcnZlclVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbm5lY3Rpb24ud2ViU29ja2V0U2VydmVyVXJsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBjb25uZWN0aW9uLndzUHJvdG9jb2wgKyBjb25uZWN0aW9uLmhvc3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdXJsICs9IHRyYW5zcG9ydExvZ2ljLmdldFVybChjb25uZWN0aW9uLCB0aGlzLm5hbWUsIHJlY29ubmVjdGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJDb25uZWN0aW5nIHRvIHdlYnNvY2tldCBlbmRwb2ludCAnXCIgKyB1cmwgKyBcIicuXCIpO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zb2NrZXQgPSBuZXcgd2luZG93LldlYlNvY2tldCh1cmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiV2Vic29ja2V0IG9wZW5lZC5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLmNsZWFyUmVjb25uZWN0VGltZW91dChjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZVN0YXRlKGNvbm5lY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLnJlY29ubmVjdGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29ubmVjdGlvbi50cmlnZ2VySGFuZGxlcihldmVudHMub25SZWNvbm5lY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIGEgc29ja2V0IGNsb3NlIGlmIHRoZSBjbG9zZSBpcyBmcm9tIHRoZSBjdXJyZW50IHNvY2tldC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTb21ldGltZXMgb24gZGlzY29ubmVjdCB0aGUgc2VydmVyIHdpbGwgcHVzaCBkb3duIGFuIG9uY2xvc2UgZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBhbiBleHBpcmVkIHNvY2tldC5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgPT09IGNvbm5lY3Rpb24uc29ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25GYWlsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZhaWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnJlY29ubmVjdChjb25uZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXZlbnQud2FzQ2xlYW4gIT09IFwidW5kZWZpbmVkXCIgJiYgZXZlbnQud2FzQ2xlYW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZGVhbGx5IHRoaXMgd291bGQgdXNlIHRoZSB3ZWJzb2NrZXQub25lcnJvciBoYW5kbGVyIChyYXRoZXIgdGhhbiBjaGVja2luZyB3YXNDbGVhbiBpbiBvbmNsb3NlKSBidXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEkgZm91bmQgaW4gc29tZSBjaXJjdW1zdGFuY2VzIENocm9tZSB3b24ndCBjYWxsIG9uZXJyb3IuIFRoaXMgaW1wbGVtZW50YXRpb24gc2VlbXMgdG8gd29yayBvbiBhbGwgYnJvd3NlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vbkVycm9yLCBbc2lnbmFsUi5fLnRyYW5zcG9ydEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIucmVzb3VyY2VzLndlYlNvY2tldENsb3NlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnRyYW5zcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiVW5jbGVhbiBkaXNjb25uZWN0IGZyb20gd2Vic29ja2V0OiBcIiArIGV2ZW50LnJlYXNvbiB8fCBcIltubyByZWFzb24gZ2l2ZW5dLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiV2Vic29ja2V0IGNsb3NlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVjb25uZWN0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBjb25uZWN0aW9uLl9wYXJzZVJlc3BvbnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuaGFuZGxlUGFyc2VGYWlsdXJlKGNvbm5lY3Rpb24sIGV2ZW50LmRhdGEsIGVycm9yLCBvbkZhaWxlZCwgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhLk0gaXMgUGVyc2lzdGVudFJlc3BvbnNlLk1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRW1wdHlPYmplY3QoZGF0YSkgfHwgZGF0YS5NKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5wcm9jZXNzTWVzc2FnZXMoY29ubmVjdGlvbiwgZGF0YSwgb25TdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB3ZWJzb2NrZXRzIHdlIG5lZWQgdG8gdHJpZ2dlciBvblJlY2VpdmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY2FsbGJhY2tzIHRvIG91dGdvaW5nIGh1YiBjYWxscy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLnRyaWdnZXJSZWNlaXZlZChjb25uZWN0aW9uLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZWNvbm5lY3Q6IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLnJlY29ubmVjdChjb25uZWN0aW9uLCB0aGlzLm5hbWUpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGxvc3RDb25uZWN0aW9uOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdChjb25uZWN0aW9uKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICAvLyBEb24ndCB0cmlnZ2VyIGEgcmVjb25uZWN0IGFmdGVyIHN0b3BwaW5nXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLmNsZWFyUmVjb25uZWN0VGltZW91dChjb25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJDbG9zaW5nIHRoZSBXZWJzb2NrZXQuXCIpO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zb2NrZXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc29ja2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFib3J0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgYXN5bmMpIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuYWpheEFib3J0KGNvbm5lY3Rpb24sIGFzeW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy5zZXJ2ZXJTZW50RXZlbnRzLmpzICovXHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IE9wZW4gVGVjaG5vbG9naWVzLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFNlZSBMaWNlbnNlLm1kIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcblxyXG4vKmdsb2JhbCB3aW5kb3c6ZmFsc2UgKi9cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImpxdWVyeS5zaWduYWxSLnRyYW5zcG9ydHMuY29tbW9uLmpzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoJCwgd2luZG93LCB1bmRlZmluZWQpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBzaWduYWxSID0gJC5zaWduYWxSLFxyXG4gICAgICAgIGV2ZW50cyA9ICQuc2lnbmFsUi5ldmVudHMsXHJcbiAgICAgICAgY2hhbmdlU3RhdGUgPSAkLnNpZ25hbFIuY2hhbmdlU3RhdGUsXHJcbiAgICAgICAgdHJhbnNwb3J0TG9naWMgPSBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljO1xyXG5cclxuICAgIHNpZ25hbFIudHJhbnNwb3J0cy5zZXJ2ZXJTZW50RXZlbnRzID0ge1xyXG4gICAgICAgIG5hbWU6IFwic2VydmVyU2VudEV2ZW50c1wiLFxyXG5cclxuICAgICAgICBzdXBwb3J0c0tlZXBBbGl2ZTogdHJ1ZSxcclxuXHJcbiAgICAgICAgdGltZU91dDogMzAwMCxcclxuXHJcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBvblN1Y2Nlc3MsIG9uRmFpbGVkKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIG9wZW5lZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgJGNvbm5lY3Rpb24gPSAkKGNvbm5lY3Rpb24pLFxyXG4gICAgICAgICAgICAgICAgcmVjb25uZWN0aW5nID0gIW9uU3VjY2VzcyxcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIHJlY29ubmVjdFRpbWVvdXQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5ldmVudFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJUaGUgY29ubmVjdGlvbiBhbHJlYWR5IGhhcyBhbiBldmVudCBzb3VyY2UuIFN0b3BwaW5nIGl0LlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5FdmVudFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uRmFpbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IFNTRS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXJsID0gdHJhbnNwb3J0TG9naWMuZ2V0VXJsKGNvbm5lY3Rpb24sIHRoaXMubmFtZSwgcmVjb25uZWN0aW5nKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkF0dGVtcHRpbmcgdG8gY29ubmVjdCB0byBTU0UgZW5kcG9pbnQgJ1wiICsgdXJsICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZXZlbnRTb3VyY2UgPSBuZXcgd2luZG93LkV2ZW50U291cmNlKHVybCwgeyB3aXRoQ3JlZGVudGlhbHM6IGNvbm5lY3Rpb24ud2l0aENyZWRlbnRpYWxzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkV2ZW50U291cmNlIGZhaWxlZCB0cnlpbmcgdG8gY29ubmVjdCB3aXRoIGVycm9yIFwiICsgZS5NZXNzYWdlICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uRmFpbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbm5lY3Rpb24gZmFpbGVkLCBjYWxsIHRoZSBmYWlsZWQgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICBvbkZhaWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29ubmVjdGlvbi50cmlnZ2VySGFuZGxlcihldmVudHMub25FcnJvciwgW3NpZ25hbFIuXy50cmFuc3BvcnRFcnJvcihzaWduYWxSLnJlc291cmNlcy5ldmVudFNvdXJjZUZhaWxlZFRvQ29ubmVjdCwgY29ubmVjdGlvbi50cmFuc3BvcnQsIGUpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29ubmVjdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIHJlY29ubmVjdGluZywgcmF0aGVyIHRoYW4gZG9pbmcgaW5pdGlhbCBjb25uZWN0LCB0aGVuIHRyeSByZWNvbm5lY3QgYWdhaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWNvbm5lY3QoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVjb25uZWN0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvbm5lY3RUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHJlY29ubmVjdGluZyBhbmQgdGhlIGV2ZW50IHNvdXJjZSBpcyBhdHRlbXB0aW5nIHRvIGNvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtlZXAgcmV0cnlpbmcuIFRoaXMgY2F1c2VzIGR1cGxpY2F0ZSBjb25uZWN0aW9ucyB0byBzcGF3bi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uZXZlbnRTb3VyY2UucmVhZHlTdGF0ZSAhPT0gd2luZG93LkV2ZW50U291cmNlLk9QRU4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHdlcmUgcmVjb25uZWN0aW5nLCByYXRoZXIgdGhhbiBkb2luZyBpbml0aWFsIGNvbm5lY3QsIHRoZW4gdHJ5IHJlY29ubmVjdCBhZ2FpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWNvbm5lY3QoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGhhdC50aW1lT3V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5ldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJFdmVudFNvdXJjZSBjb25uZWN0ZWQuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZWNvbm5lY3RUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5jbGVhclJlY29ubmVjdFRpbWVvdXQoY29ubmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wZW5lZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVuZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlU3RhdGUoY29ubmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5yZWNvbm5lY3RpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29ubmVjdGlvbi50cmlnZ2VySGFuZGxlcihldmVudHMub25SZWNvbm5lY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5ldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9jZXNzIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhID09PSBcImluaXRpYWxpemVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICByZXMgPSBjb25uZWN0aW9uLl9wYXJzZVJlc3BvbnNlKGUuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5oYW5kbGVQYXJzZUZhaWx1cmUoY29ubmVjdGlvbiwgZS5kYXRhLCBlcnJvciwgb25GYWlsZWQsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5wcm9jZXNzTWVzc2FnZXMoY29ubmVjdGlvbiwgcmVzLCBvblN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmV2ZW50U291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBoYW5kbGUgYW4gZXJyb3IgaWYgdGhlIGVycm9yIGlzIGZyb20gdGhlIGN1cnJlbnQgRXZlbnQgU291cmNlLlxyXG4gICAgICAgICAgICAgICAgLy8gU29tZXRpbWVzIG9uIGRpc2Nvbm5lY3QgdGhlIHNlcnZlciB3aWxsIHB1c2ggZG93biBhbiBlcnJvciBldmVudFxyXG4gICAgICAgICAgICAgICAgLy8gdG8gYW4gZXhwaXJlZCBFdmVudCBTb3VyY2UuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcyAhPT0gY29ubmVjdGlvbi5ldmVudFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wZW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkZhaWxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZhaWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiRXZlbnRTb3VyY2UgcmVhZHlTdGF0ZTogXCIgKyBjb25uZWN0aW9uLmV2ZW50U291cmNlLnJlYWR5U3RhdGUgKyBcIi5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUuZXZlbnRQaGFzZSA9PT0gd2luZG93LkV2ZW50U291cmNlLkNMT1NFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSB0aGUgRXZlbnRTb3VyY2UncyBuYXRpdmUgcmVjb25uZWN0IGZ1bmN0aW9uIGFzIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9lc24ndCBhbGxvdyB1cyB0byBjaGFuZ2UgdGhlIFVSTCB3aGVuIHJlY29ubmVjdGluZy4gV2UgbmVlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGNoYW5nZSB0aGUgVVJMIHRvIG5vdCBpbmNsdWRlIHRoZSAvY29ubmVjdCBzdWZmaXgsIGFuZCBwYXNzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxhc3QgbWVzc2FnZSBpZCB3ZSByZWNlaXZlZC5cclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkV2ZW50U291cmNlIHJlY29ubmVjdGluZyBkdWUgdG8gdGhlIHNlcnZlciBjb25uZWN0aW9uIGVuZGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWNvbm5lY3QoY29ubmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb24gZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkV2ZW50U291cmNlIGVycm9yLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkY29ubmVjdGlvbi50cmlnZ2VySGFuZGxlcihldmVudHMub25FcnJvciwgW3NpZ25hbFIuXy50cmFuc3BvcnRFcnJvcihzaWduYWxSLnJlc291cmNlcy5ldmVudFNvdXJjZUVycm9yLCBjb25uZWN0aW9uLnRyYW5zcG9ydCwgZSldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlY29ubmVjdDogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMucmVjb25uZWN0KGNvbm5lY3Rpb24sIHRoaXMubmFtZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbG9zdENvbm5lY3Rpb246IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNlbmQ6IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLmFqYXhTZW5kKGNvbm5lY3Rpb24sIGRhdGEpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIERvbid0IHRyaWdnZXIgYSByZWNvbm5lY3QgYWZ0ZXIgc3RvcHBpbmdcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuY2xlYXJSZWNvbm5lY3RUaW1lb3V0KGNvbm5lY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24gJiYgY29ubmVjdGlvbi5ldmVudFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJFdmVudFNvdXJjZSBjYWxsaW5nIGNsb3NlKCkuXCIpO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5ldmVudFNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5ldmVudFNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5ldmVudFNvdXJjZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFib3J0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgYXN5bmMpIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuYWpheEFib3J0KGNvbm5lY3Rpb24sIGFzeW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy5mb3JldmVyRnJhbWUuanMgKi9cclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgT3BlbiBUZWNobm9sb2dpZXMsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gU2VlIExpY2Vuc2UubWQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuXHJcbi8qZ2xvYmFsIHdpbmRvdzpmYWxzZSAqL1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwianF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy5jb21tb24uanNcIiAvPlxyXG5cclxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIHVuZGVmaW5lZCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHNpZ25hbFIgPSAkLnNpZ25hbFIsXHJcbiAgICAgICAgZXZlbnRzID0gJC5zaWduYWxSLmV2ZW50cyxcclxuICAgICAgICBjaGFuZ2VTdGF0ZSA9ICQuc2lnbmFsUi5jaGFuZ2VTdGF0ZSxcclxuICAgICAgICB0cmFuc3BvcnRMb2dpYyA9IHNpZ25hbFIudHJhbnNwb3J0cy5fbG9naWMsXHJcbiAgICAgICAgY3JlYXRlRnJhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmcmFtZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4gICAgICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDowO2hlaWdodDowO3Zpc2liaWxpdHk6aGlkZGVuO1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZyYW1lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gVXNlZCB0byBwcmV2ZW50IGluZmluaXRlIGxvYWRpbmcgaWNvbiBzcGlucyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBpZVxyXG4gICAgICAgIC8vIFdlIGJ1aWxkIHRoaXMgb2JqZWN0IGluc2lkZSBhIGNsb3N1cmUgc28gd2UgZG9uJ3QgcG9sbHV0ZSB0aGUgcmVzdCBvZiAgIFxyXG4gICAgICAgIC8vIHRoZSBmb3JldmVyRnJhbWUgdHJhbnNwb3J0IHdpdGggdW5uZWNlc3NhcnkgZnVuY3Rpb25zL3V0aWxpdGllcy5cclxuICAgICAgICBsb2FkUHJldmVudGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxvYWRpbmdGaXhJbnRlcnZhbElkID0gbnVsbCxcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdGaXhJbnRlcnZhbCA9IDEwMDAsXHJcbiAgICAgICAgICAgICAgICBhdHRhY2hlZFRvID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBhZGRpdGlvbmFsIGlmcmFtZSByZW1vdmFsIHByb2NlZHVyZXMgZnJvbSBuZXdlciBicm93c2Vyc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWduYWxSLl8uaWVWZXJzaW9uIDw9IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBldmVyIHdhbnQgdG8gc2V0IHRoZSBpbnRlcnZhbCBvbmUgdGltZSwgc28gb24gdGhlIGZpcnN0IGF0dGFjaGVkVG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFjaGVkVG8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZGVzdHJveSBpZnJhbWUgZXZlcnkgMyBzZWNvbmRzIHRvIHByZXZlbnQgbG9hZGluZyBpY29uLCBzdXBlciBoYWNreVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0ZpeEludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wRnJhbWUgPSBjcmVhdGVGcmFtZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wRnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXBGcmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBsb2FkaW5nRml4SW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hlZFRvKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgY2xlYXIgdGhlIGludGVydmFsIGlmIHRoZXJlJ3Mgb25seSBvbmUgbW9yZSBvYmplY3QgdGhhdCB0aGUgbG9hZFByZXZlbnRlciBpcyBhdHRhY2hlZFRvXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFjaGVkVG8gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwobG9hZGluZ0ZpeEludGVydmFsSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFjaGVkVG8gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaGVkVG8tLTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICBzaWduYWxSLnRyYW5zcG9ydHMuZm9yZXZlckZyYW1lID0ge1xyXG4gICAgICAgIG5hbWU6IFwiZm9yZXZlckZyYW1lXCIsXHJcblxyXG4gICAgICAgIHN1cHBvcnRzS2VlcEFsaXZlOiB0cnVlLFxyXG5cclxuICAgICAgICAvLyBBZGRlZCBhcyBhIHZhbHVlIGhlcmUgc28gd2UgY2FuIGNyZWF0ZSB0ZXN0cyB0byB2ZXJpZnkgZnVuY3Rpb25hbGl0eVxyXG4gICAgICAgIGlmcmFtZUNsZWFyVGhyZXNob2xkOiA1MCxcclxuXHJcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBvblN1Y2Nlc3MsIG9uRmFpbGVkKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGZyYW1lSWQgPSAodHJhbnNwb3J0TG9naWMuZm9yZXZlckZyYW1lLmNvdW50ICs9IDEpLFxyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgZnJhbWUgPSBjcmVhdGVGcmFtZSgpLFxyXG4gICAgICAgICAgICAgICAgZnJhbWVMb2FkSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkZvcmV2ZXIgZnJhbWUgaWZyYW1lIGZpbmlzaGVkIGxvYWRpbmcgYW5kIGlzIG5vIGxvbmdlciByZWNlaXZpbmcgbWVzc2FnZXMuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVjb25uZWN0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuRXZlbnRTb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIFNTRSwgZG9uJ3QgdXNlIEZvcmV2ZXIgRnJhbWVcclxuICAgICAgICAgICAgICAgIGlmIChvbkZhaWxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiVGhpcyBicm93c2VyIHN1cHBvcnRzIFNTRSwgc2tpcHBpbmcgRm9yZXZlciBGcmFtZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwiZGF0YS1zaWduYWxyLWNvbm5lY3Rpb24taWRcIiwgY29ubmVjdGlvbi5pZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBTdGFydCBwcmV2ZW50aW5nIGxvYWRpbmcgaWNvblxyXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgb25seSBwZXJmb3JtIHdvcmsgaWYgdGhlIGxvYWRQcmV2ZW50ZXIgaXMgbm90IGF0dGFjaGVkIHRvIGFub3RoZXIgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgbG9hZFByZXZlbnRlci5wcmV2ZW50KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBCdWlsZCB0aGUgdXJsXHJcbiAgICAgICAgICAgIHVybCA9IHRyYW5zcG9ydExvZ2ljLmdldFVybChjb25uZWN0aW9uLCB0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICB1cmwgKz0gXCImZnJhbWVJZD1cIiArIGZyYW1lSWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgYm9keSBwcmlvciB0byBzZXR0aW5nIFVSTCB0byBhdm9pZCBjYWNoaW5nIGlzc3Vlcy5cclxuICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnJhbWUpO1xyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJCaW5kaW5nIHRvIGlmcmFtZSdzIGxvYWQgZXZlbnQuXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZyYW1lLmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIGZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZyYW1lTG9hZEhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmcmFtZS5hdHRhY2hFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWUuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIiwgZnJhbWVMb2FkSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYW1lLnNyYyA9IHVybDtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuZm9yZXZlckZyYW1lLmNvbm5lY3Rpb25zW2ZyYW1lSWRdID0gY29ubmVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uZnJhbWUgPSBmcmFtZTtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5mcmFtZUlkID0gZnJhbWVJZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiSWZyYW1lIHRyYW5zcG9ydCBzdGFydGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZWNvbm5lY3Q6IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gdmVyaWZ5IGNvbm5lY3Rpb24gc3RhdGUgYW5kIHZlcmlmeSBiZWZvcmUgdGhlIHNldFRpbWVvdXQgb2NjdXJzIGJlY2F1c2UgYW4gYXBwbGljYXRpb24gc2xlZXAgY291bGQgb2NjdXIgZHVyaW5nIHRoZSBzZXRUaW1lb3V0IGR1cmF0aW9uLlxyXG4gICAgICAgICAgICBpZiAodHJhbnNwb3J0TG9naWMuaXNDb25uZWN0ZWRPclJlY29ubmVjdGluZyhjb25uZWN0aW9uKSAmJiB0cmFuc3BvcnRMb2dpYy52ZXJpZnlMYXN0QWN0aXZlKGNvbm5lY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgd2UncmUgb2sgdG8gcmVjb25uZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNwb3J0TG9naWMudmVyaWZ5TGFzdEFjdGl2ZShjb25uZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5mcmFtZSAmJiB0cmFuc3BvcnRMb2dpYy5lbnN1cmVSZWNvbm5lY3RpbmdTdGF0ZShjb25uZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBjb25uZWN0aW9uLmZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gdHJhbnNwb3J0TG9naWMuZ2V0VXJsKGNvbm5lY3Rpb24sIHRoYXQubmFtZSwgdHJ1ZSkgKyBcIiZmcmFtZUlkPVwiICsgY29ubmVjdGlvbi5mcmFtZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIlVwZGF0aW5nIGlmcmFtZSBzcmMgdG8gJ1wiICsgc3JjICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuc3JjID0gc3JjO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGNvbm5lY3Rpb24ucmVjb25uZWN0RGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbG9zdENvbm5lY3Rpb246IGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0KGNvbm5lY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNlbmQ6IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydExvZ2ljLmFqYXhTZW5kKGNvbm5lY3Rpb24sIGRhdGEpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlY2VpdmU6IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBjdyxcclxuICAgICAgICAgICAgICAgIGJvZHk7XHJcblxyXG4gICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5wcm9jZXNzTWVzc2FnZXMoY29ubmVjdGlvbiwgZGF0YSwgY29ubmVjdGlvbi5vblN1Y2Nlc3MpO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IGNvbm5lY3Rpb24gc3RvcHBpbmcgZnJvbSBhIGNhbGxiYWNrIHRyaWdnZXIgd2l0aGluIHRoZSBwcm9jZXNzTWVzc2FnZXMgYWJvdmUuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlID09PSAkLnNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSBzY3JpcHQgJiBkaXYgZWxlbWVudHNcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZnJhbWVNZXNzYWdlQ291bnQgPSAoY29ubmVjdGlvbi5mcmFtZU1lc3NhZ2VDb3VudCB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5mcmFtZU1lc3NhZ2VDb3VudCA+IHNpZ25hbFIudHJhbnNwb3J0cy5mb3JldmVyRnJhbWUuaWZyYW1lQ2xlYXJUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmZyYW1lTWVzc2FnZUNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjdyA9IGNvbm5lY3Rpb24uZnJhbWUuY29udGVudFdpbmRvdyB8fCBjb25uZWN0aW9uLmZyYW1lLmNvbnRlbnREb2N1bWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3cgJiYgY3cuZG9jdW1lbnQgJiYgY3cuZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gY3cuZG9jdW1lbnQuYm9keTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgdGhlIGNoaWxkIGVsZW1lbnRzIGZyb20gdGhlIGlmcmFtZSdzIGJvZHkgdG8gY29uc2VydmVyIG1lbW9yeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYm9keS5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGJvZHkuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgY3cgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gU3RvcCBhdHRlbXB0aW5nIHRvIHByZXZlbnQgbG9hZGluZyBpY29uXHJcbiAgICAgICAgICAgIGxvYWRQcmV2ZW50ZXIuY2FuY2VsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5mcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uZnJhbWUuc3RvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZnJhbWUuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdyA9IGNvbm5lY3Rpb24uZnJhbWUuY29udGVudFdpbmRvdyB8fCBjb25uZWN0aW9uLmZyYW1lLmNvbnRlbnREb2N1bWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN3LmRvY3VtZW50ICYmIGN3LmRvY3VtZW50LmV4ZWNDb21tYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdy5kb2N1bWVudC5leGVjQ29tbWFuZChcIlN0b3BcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJFcnJvciBvY2N1cmVkIHdoZW4gc3RvcHBpbmcgZm9yZXZlckZyYW1lIHRyYW5zcG9ydC4gTWVzc2FnZSA9IFwiICsgZS5tZXNzYWdlICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGlmcmFtZSBpcyB3aGVyZSB3ZSBsZWZ0IGl0XHJcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5mcmFtZS5wYXJlbnROb2RlID09PSB3aW5kb3cuZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbm5lY3Rpb24uZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFuc3BvcnRMb2dpYy5mb3JldmVyRnJhbWUuY29ubmVjdGlvbnNbY29ubmVjdGlvbi5mcmFtZUlkXTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZnJhbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5mcmFtZUlkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLmZyYW1lO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24uZnJhbWVJZDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLm9uU3VjY2VzcztcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLmZyYW1lTWVzc2FnZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJTdG9wcGluZyBmb3JldmVyIGZyYW1lLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFib3J0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgYXN5bmMpIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuYWpheEFib3J0KGNvbm5lY3Rpb24sIGFzeW5jKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRDb25uZWN0aW9uOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydExvZ2ljLmZvcmV2ZXJGcmFtZS5jb25uZWN0aW9uc1tpZF07XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc3RhcnRlZDogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZVN0YXRlKGNvbm5lY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5yZWNvbm5lY3RpbmcsXHJcbiAgICAgICAgICAgICAgICBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5jb25uZWN0ZWQpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIG9uU3VjY2VzcyBoYW5kbGVyIHdlIGFzc3VtZSB0aGlzIGlzIGEgcmVjb25uZWN0XHJcbiAgICAgICAgICAgICAgICAkKGNvbm5lY3Rpb24pLnRyaWdnZXJIYW5kbGVyKGV2ZW50cy5vblJlY29ubmVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIudHJhbnNwb3J0cy5sb25nUG9sbGluZy5qcyAqL1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBPcGVuIFRlY2hub2xvZ2llcywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBTZWUgTGljZW5zZS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG5cclxuLypnbG9iYWwgd2luZG93OmZhbHNlICovXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJqcXVlcnkuc2lnbmFsUi50cmFuc3BvcnRzLmNvbW1vbi5qc1wiIC8+XHJcblxyXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgdW5kZWZpbmVkKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgc2lnbmFsUiA9ICQuc2lnbmFsUixcclxuICAgICAgICBldmVudHMgPSAkLnNpZ25hbFIuZXZlbnRzLFxyXG4gICAgICAgIGNoYW5nZVN0YXRlID0gJC5zaWduYWxSLmNoYW5nZVN0YXRlLFxyXG4gICAgICAgIGlzRGlzY29ubmVjdGluZyA9ICQuc2lnbmFsUi5pc0Rpc2Nvbm5lY3RpbmcsXHJcbiAgICAgICAgdHJhbnNwb3J0TG9naWMgPSBzaWduYWxSLnRyYW5zcG9ydHMuX2xvZ2ljO1xyXG5cclxuICAgIHNpZ25hbFIudHJhbnNwb3J0cy5sb25nUG9sbGluZyA9IHtcclxuICAgICAgICBuYW1lOiBcImxvbmdQb2xsaW5nXCIsXHJcblxyXG4gICAgICAgIHN1cHBvcnRzS2VlcEFsaXZlOiBmYWxzZSxcclxuXHJcbiAgICAgICAgcmVjb25uZWN0RGVsYXk6IDMwMDAsXHJcblxyXG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgb25TdWNjZXNzLCBvbkZhaWxlZCkge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+U3RhcnRzIHRoZSBsb25nIHBvbGxpbmcgY29ubmVjdGlvbjwvc3VtbWFyeT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY29ubmVjdGlvblwiIHR5cGU9XCJzaWduYWxSXCI+VGhlIFNpZ25hbFIgY29ubmVjdGlvbiB0byBzdGFydDwvcGFyYW0+XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGZpcmVDb25uZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcmVDb25uZWN0ID0gJC5ub29wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkxvbmdQb2xsaW5nIGNvbm5lY3RlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgb25GYWlsZWQgdG8gbnVsbCBiZWNhdXNlIGl0IHNob3VsZG4ndCBiZSBjYWxsZWQgYWdhaW5cclxuICAgICAgICAgICAgICAgICAgICBvbkZhaWxlZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHJ5RmFpbENvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRmFpbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFpbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmFpbGVkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJMb25nUG9sbGluZyBmYWlsZWQgdG8gY29ubmVjdC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHByaXZhdGVEYXRhID0gY29ubmVjdGlvbi5fLFxyXG4gICAgICAgICAgICAgICAgcmVjb25uZWN0RXJyb3JzID0gMCxcclxuICAgICAgICAgICAgICAgIGZpcmVSZWNvbm5lY3RlZCA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQocHJpdmF0ZURhdGEucmVjb25uZWN0VGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICBwcml2YXRlRGF0YS5yZWNvbm5lY3RUaW1lb3V0SWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlU3RhdGUoaW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLnJlY29ubmVjdGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWNjZXNzZnVsbHkgcmVjb25uZWN0ZWQhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZyhcIlJhaXNpbmcgdGhlIHJlY29ubmVjdCBldmVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChpbnN0YW5jZSkudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uUmVjb25uZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gMSBob3VyXHJcbiAgICAgICAgICAgICAgICBtYXhGaXJlUmVjb25uZWN0ZWRUaW1lb3V0ID0gMzYwMDAwMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnBvbGxYaHIpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiUG9sbGluZyB4aHIgcmVxdWVzdHMgYWxyZWFkeSBleGlzdHMsIGFib3J0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25uZWN0aW9uLm1lc3NhZ2VJZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBwcml2YXRlRGF0YS5yZWNvbm5lY3RUaW1lb3V0SWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgcHJpdmF0ZURhdGEucG9sbFRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIChmdW5jdGlvbiBwb2xsKGluc3RhbmNlLCByYWlzZVJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlSWQgPSBpbnN0YW5jZS5tZXNzYWdlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3QgPSAobWVzc2FnZUlkID09PSBudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0aW5nID0gIWNvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxpbmcgPSAhcmFpc2VSZWNvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRyYW5zcG9ydExvZ2ljLmdldFVybChpbnN0YW5jZSwgdGhhdC5uYW1lLCByZWNvbm5lY3RpbmcsIHBvbGxpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBkaXNjb25uZWN0ZWQgZHVyaW5nIHRoZSB0aW1lIHdlJ3ZlIHRyaWVkIHRvIHJlLWluc3RhbnRpYXRlIHRoZSBwb2xsIHRoZW4gc3RvcC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXNjb25uZWN0aW5nKGluc3RhbmNlKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIk9wZW5pbmcgbG9uZyBwb2xsaW5nIHJlcXVlc3QgdG8gJ1wiICsgdXJsICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5wb2xsWGhyID0gJC5hamF4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCh7fSwgJC5zaWduYWxSLmFqYXhEZWZhdWx0cywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7IHdpdGhDcmVkZW50aWFsczogY29ubmVjdGlvbi53aXRoQ3JlZGVudGlhbHMgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBjb25uZWN0aW9uLmFqYXhEYXRhVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBjb25uZWN0aW9uLmNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW5EYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJlY29ubmVjdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJMb25nIHBvbGwgY29tcGxldGUuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBvdXIgcmVjb25uZWN0IGVycm9ycyBzbyBpZiB3ZSB0cmFuc2l0aW9uIGludG8gYSByZWNvbm5lY3Rpbmcgc3RhdGUgYWdhaW4gd2UgdHJpZ2dlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY29ubmVjdGVkIHF1aWNrbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbm5lY3RFcnJvcnMgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EYXRhID0gY29ubmVjdGlvbi5fcGFyc2VSZXNwb25zZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuaGFuZGxlUGFyc2VGYWlsdXJlKGluc3RhbmNlLCByZXN1bHQsIGVycm9yLCB0cnlGYWlsQ29ubmVjdCwgaW5zdGFuY2UucG9sbFhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgY3VycmVudGx5IGEgdGltZW91dCB0byB0cmlnZ2VyIHJlY29ubmVjdCwgZmlyZSBpdCBub3cgYmVmb3JlIHByb2Nlc3NpbmcgbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpdmF0ZURhdGEucmVjb25uZWN0VGltZW91dElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVSZWNvbm5lY3RlZChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWluRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdHJhbnNwb3J0TG9naWMubWF4aW1pemVQZXJzaXN0ZW50UmVzcG9uc2UobWluRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5wcm9jZXNzTWVzc2FnZXMoaW5zdGFuY2UsIG1pbkRhdGEsIGZpcmVDb25uZWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC50eXBlKGRhdGEuTG9uZ1BvbGxEZWxheSkgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBkYXRhLkxvbmdQb2xsRGVsYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLkRpc2Nvbm5lY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGlzY29ubmVjdGluZyhpbnN0YW5jZSkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkUmVjb25uZWN0ID0gZGF0YSAmJiBkYXRhLlNob3VsZFJlY29ubmVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVjb25uZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gaW50byB0aGUgcmVjb25uZWN0aW5nIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgdGhlbiB0aGF0IG1lYW5zIHRoYXQgdGhlIHVzZXIgdHJhbnNpdGlvbmVkIHRoZSBjb25uZWN0aW9uIGludG8gYSBpbnZhbGlkIHN0YXRlIGluIHByb2Nlc3NNZXNzYWdlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFuc3BvcnRMb2dpYy5lbnN1cmVSZWNvbm5lY3RpbmdTdGF0ZShpbnN0YW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmV2ZXIgd2FudCB0byBwYXNzIGEgcmFpc2VSZWNvbm5lY3QgZmxhZyBhZnRlciBhIHN1Y2Nlc3NmdWwgcG9sbC4gIFRoaXMgaXMgaGFuZGxlZCB2aWEgdGhlIGVycm9yIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlRGF0YS5wb2xsVGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sbChpbnN0YW5jZSwgc2hvdWxkUmVjb25uZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGwoaW5zdGFuY2UsIHNob3VsZFJlY29ubmVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHRyeWluZyB0byB0cmlnZ2VyIHJlY29ubmVjdCwgY29ubmVjdGlvbiBpcyBpbiBhbiBlcnJvciBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIG5vdCBpbiB0aGUgcmVjb25uZWN0IHN0YXRlIHRoaXMgd2lsbCBub29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChwcml2YXRlRGF0YS5yZWNvbm5lY3RUaW1lb3V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGVEYXRhLnJlY29ubmVjdFRpbWVvdXRJZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSBcImFib3J0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJBYm9ydGVkIHhociByZXF1ZXN0LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0cnlGYWlsQ29ubmVjdCgpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNyZW1lbnQgb3VyIHJlY29ubmVjdCBlcnJvcnMsIHdlIGFzc3VtZSBhbGwgZXJyb3JzIHRvIGJlIHJlY29ubmVjdCBlcnJvcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gdGhlIGNhc2UgdGhhdCBpdCdzIG91ciBmaXJzdCBlcnJvciB0aGlzIHdpbGwgY2F1c2UgUmVjb25uZWN0IHRvIGJlIGZpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIDEgc2Vjb25kIGR1ZSB0byByZWNvbm5lY3RFcnJvcnMgYmVpbmcgPSAxLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbm5lY3RFcnJvcnMrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlICE9PSBzaWduYWxSLmNvbm5lY3Rpb25TdGF0ZS5yZWNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiQW4gZXJyb3Igb2NjdXJyZWQgdXNpbmcgbG9uZ1BvbGxpbmcuIFN0YXR1cyA9IFwiICsgdGV4dFN0YXR1cyArIFwiLiAgUmVzcG9uc2UgPSBcIiArIGRhdGEucmVzcG9uc2VUZXh0ICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChpbnN0YW5jZSkudHJpZ2dlckhhbmRsZXIoZXZlbnRzLm9uRXJyb3IsIFtzaWduYWxSLl8udHJhbnNwb3J0RXJyb3Ioc2lnbmFsUi5yZXNvdXJjZXMubG9uZ1BvbGxGYWlsZWQsIGNvbm5lY3Rpb24udHJhbnNwb3J0LCBkYXRhLCBpbnN0YW5jZS5wb2xsWGhyKV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBjaGVjayB0aGUgc3RhdGUgaGVyZSB0byB2ZXJpZnkgdGhhdCB3ZSdyZSBub3QgaW4gYW4gaW52YWxpZCBzdGF0ZSBwcmlvciB0byB2ZXJpZnlpbmcgUmVjb25uZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBub3QgaW4gY29ubmVjdGVkIG9yIHJlY29ubmVjdGluZyB0aGVuIHRoZSBuZXh0IGVuc3VyZVJlY29ubmVjdGluZ1N0YXRlIGNoZWNrIHdpbGwgZmFpbCBhbmQgd2lsbCByZXR1cm4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlZm9yZSB3ZSBkb24ndCB3YW50IHRvIGNoYW5nZSB0aGF0IGZhaWx1cmUgY29kZSBwYXRoLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbm5lY3Rpb24uc3RhdGUgPT09IHNpZ25hbFIuY29ubmVjdGlvblN0YXRlLmNvbm5lY3RlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zdGF0ZSA9PT0gc2lnbmFsUi5jb25uZWN0aW9uU3RhdGUucmVjb25uZWN0aW5nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRyYW5zcG9ydExvZ2ljLnZlcmlmeUxhc3RBY3RpdmUoY29ubmVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBpbnRvIHRoZSByZWNvbm5lY3Rpbmcgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyB0aGVuIHRoYXQgbWVhbnMgdGhhdCB0aGUgdXNlciB0cmFuc2l0aW9uZWQgdGhlIGNvbm5lY3Rpb24gaW50byB0aGUgZGlzY29ubmVjdGVkIG9yIGNvbm5lY3Rpbmcgc3RhdGUgd2l0aGluIHRoZSBhYm92ZSBlcnJvciBoYW5kbGVyIHRyaWdnZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNwb3J0TG9naWMuZW5zdXJlUmVjb25uZWN0aW5nU3RhdGUoaW5zdGFuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGwgcG9sbCB3aXRoIHRoZSByYWlzZVJlY29ubmVjdCBmbGFnIGFzIHRydWUgYWZ0ZXIgdGhlIHJlY29ubmVjdCBkZWxheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlRGF0YS5wb2xsVGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9sbChpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoYXQucmVjb25uZWN0RGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG9ubHkgZXZlciBwYXNzIGFmdGVyIGFuIGVycm9yIGhhcyBvY2N1cmVkIHZpYSB0aGUgcG9sbCBhamF4IHByb2NlZHVyZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVjb25uZWN0aW5nICYmIHJhaXNlUmVjb25uZWN0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHdhaXQgdG8gcmVjb25uZWN0IGRlcGVuZGluZyBvbiBob3cgbWFueSB0aW1lcyB3ZSd2ZSBmYWlsZWQgdG8gcmVjb25uZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGVzc2VudGlhbGx5IGEgaGV1cmlzdGljIHRoYXQgd2lsbCBleHBvbmVudGlhbGx5IGluY3JlYXNlIGluIHdhaXQgdGltZSBiZWZvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyByZWNvbm5lY3RlZC4gIFRoaXMgZGVwZW5kcyBvbiB0aGUgXCJlcnJvclwiIGhhbmRsZXIgb2YgUG9sbCB0byBjYW5jZWwgdGhpcyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGltZW91dCBpZiBpdCB0cmlnZ2VycyBiZWZvcmUgdGhlIFJlY29ubmVjdGVkIGV2ZW50IGZpcmVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgTWF0aC5taW4gYXQgdGhlIGVuZCBpcyB0byBlbnN1cmUgdGhhdCB0aGUgcmVjb25uZWN0IHRpbWVvdXQgZG9lcyBub3Qgb3ZlcmZsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGVEYXRhLnJlY29ubmVjdFRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZmlyZVJlY29ubmVjdGVkKGluc3RhbmNlKTsgfSwgTWF0aC5taW4oMTAwMCAqIChNYXRoLnBvdygyLCByZWNvbm5lY3RFcnJvcnMpIC0gMSksIG1heEZpcmVSZWNvbm5lY3RlZFRpbWVvdXQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KGNvbm5lY3Rpb24pKTtcclxuICAgICAgICAgICAgfSwgMjUwKTsgLy8gSGF2ZSB0byBkZWxheSBpbml0aWFsIHBvbGwgc28gQ2hyb21lIGRvZXNuJ3Qgc2hvdyBsb2FkZXIgc3Bpbm5lciBpbiB0YWJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBsb3N0Q29ubmVjdGlvbjogZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9zdCBDb25uZWN0aW9uIG5vdCBoYW5kbGVkIGZvciBMb25nUG9sbGluZ1wiKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzZW5kOiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgZGF0YSkge1xyXG4gICAgICAgICAgICB0cmFuc3BvcnRMb2dpYy5hamF4U2VuZChjb25uZWN0aW9uLCBkYXRhKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+U3RvcHMgdGhlIGxvbmcgcG9sbGluZyBjb25uZWN0aW9uPC9zdW1tYXJ5PlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjb25uZWN0aW9uXCIgdHlwZT1cInNpZ25hbFJcIj5UaGUgU2lnbmFsUiBjb25uZWN0aW9uIHRvIHN0b3A8L3BhcmFtPlxyXG5cclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChjb25uZWN0aW9uLl8ucG9sbFRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoY29ubmVjdGlvbi5fLnJlY29ubmVjdFRpbWVvdXRJZCk7XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5fLnBvbGxUaW1lb3V0SWQ7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjb25uZWN0aW9uLl8ucmVjb25uZWN0VGltZW91dElkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24ucG9sbFhocikge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5wb2xsWGhyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnBvbGxYaHIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24ucG9sbFhocjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFib3J0OiBmdW5jdGlvbiAoY29ubmVjdGlvbiwgYXN5bmMpIHtcclxuICAgICAgICAgICAgdHJhbnNwb3J0TG9naWMuYWpheEFib3J0KGNvbm5lY3Rpb24sIGFzeW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpKTtcclxuLyoganF1ZXJ5LnNpZ25hbFIuaHVicy5qcyAqL1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBPcGVuIFRlY2hub2xvZ2llcywgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBTZWUgTGljZW5zZS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG5cclxuLypnbG9iYWwgd2luZG93OmZhbHNlICovXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJqcXVlcnkuc2lnbmFsUi5jb3JlLmpzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoJCwgd2luZG93LCB1bmRlZmluZWQpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBldmVudE5hbWVzcGFjZSA9IFwiLmh1YlByb3h5XCIsXHJcbiAgICAgICAgc2lnbmFsUiA9ICQuc2lnbmFsUjtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlRXZlbnROYW1lKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50ICsgZXZlbnROYW1lc3BhY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXF1aXZhbGVudCB0byBBcnJheS5wcm90b3R5cGUubWFwXHJcbiAgICBmdW5jdGlvbiBtYXAoYXJyLCBmdW4sIHRoaXNwKSB7XHJcbiAgICAgICAgdmFyIGksXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFyci5sZW5ndGgsXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBmdW4uY2FsbCh0aGlzcCwgYXJyW2ldLCBpLCBhcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QXJnVmFsdWUoYSkge1xyXG4gICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24oYSkgPyBudWxsIDogKCQudHlwZShhKSA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYXNNZW1iZXJzKG9iaikge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbnkgcHJvcGVydGllcyBpbiBvdXIgY2FsbGJhY2sgbWFwIHRoZW4gd2UgaGF2ZSBjYWxsYmFja3MgYW5kIGNhbiBleGl0IHRoZSBsb29wIHZpYSByZXR1cm5cclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsZWFySW52b2NhdGlvbkNhbGxiYWNrcyhjb25uZWN0aW9uLCBlcnJvcikge1xyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNvbm5lY3Rpb25cIiB0eXBlPVwiaHViQ29ubmVjdGlvblwiIC8+XHJcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IGNvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tzLFxyXG4gICAgICAgICAgICBjYWxsYmFjaztcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaGFzTWVtYmVycyhjYWxsYmFja3MpKSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKFwiQ2xlYXJpbmcgaHViIGludm9jYXRpb24gY2FsbGJhY2tzIHdpdGggZXJyb3I6IFwiICsgZXJyb3IgKyBcIi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFJlc2V0IHRoZSBjYWxsYmFjayBjYWNoZSBub3cgYXMgd2UgaGF2ZSBhIGxvY2FsIHZhciByZWZlcmVuY2luZyBpdFxyXG4gICAgICAgIGNvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tJZCA9IDA7XHJcbiAgICAgICAgZGVsZXRlIGNvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tzO1xyXG4gICAgICAgIGNvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tzID0ge307XHJcblxyXG4gICAgICAgIC8vIExvb3Agb3ZlciB0aGUgY2FsbGJhY2tzIGFuZCBpbnZva2UgdGhlbS5cclxuICAgICAgICAvLyBXZSBkbyB0aGlzIHVzaW5nIGEgbG9jYWwgdmFyIHJlZmVyZW5jZSBhbmQgKmFmdGVyKiB3ZSd2ZSBjbGVhcmVkIHRoZSBjYWNoZVxyXG4gICAgICAgIC8vIHNvIHRoYXQgaWYgYSBmYWlsIGNhbGxiYWNrIGl0c2VsZiB0cmllcyB0byBpbnZva2UgYW5vdGhlciBtZXRob2Qgd2UgZG9uJ3QgXHJcbiAgICAgICAgLy8gZW5kIHVwIHdpdGggaXRzIGNhbGxiYWNrIGluIHRoZSBsaXN0IHdlJ3JlIGxvb3Bpbmcgb3Zlci5cclxuICAgICAgICBmb3IgKHZhciBjYWxsYmFja0lkIGluIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrc1tjYWxsYmFja0lkXTtcclxuICAgICAgICAgICAgY2FsbGJhY2subWV0aG9kLmNhbGwoY2FsbGJhY2suc2NvcGUsIHsgRTogZXJyb3IgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGh1YlByb3h5XHJcbiAgICBmdW5jdGlvbiBodWJQcm94eShodWJDb25uZWN0aW9uLCBodWJOYW1lKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIG5ldyBwcm94eSBvYmplY3QgZm9yIHRoZSBnaXZlbiBodWIgY29ubmVjdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGludm9rZVxyXG4gICAgICAgIC8vLyAgICAgbWV0aG9kcyBvbiBzZXJ2ZXIgaHVicyBhbmQgaGFuZGxlIGNsaWVudCBtZXRob2QgaW52b2NhdGlvbiByZXF1ZXN0cyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICByZXR1cm4gbmV3IGh1YlByb3h5LmZuLmluaXQoaHViQ29ubmVjdGlvbiwgaHViTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaHViUHJveHkuZm4gPSBodWJQcm94eS5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGNvbm5lY3Rpb24sIGh1Yk5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmh1Yk5hbWUgPSBodWJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLl8gPSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hcDoge31cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBoYXNTdWJzY3JpcHRpb25zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXNNZW1iZXJzKHRoaXMuXy5jYWxsYmFja01hcCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb246IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5XaXJlcyB1cCBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBhIGludm9jYXRpb24gcmVxdWVzdCBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaHViLjwvc3VtbWFyeT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZXZlbnROYW1lXCIgdHlwZT1cIlN0cmluZ1wiPlRoZSBuYW1lIG9mIHRoZSBodWIgZXZlbnQgdG8gcmVnaXN0ZXIgdGhlIGNhbGxiYWNrIGZvci48L3BhcmFtPlxyXG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjYWxsYmFja1wiIHR5cGU9XCJGdW5jdGlvblwiPlRoZSBjYWxsYmFjayB0byBiZSBpbnZva2VkLjwvcGFyYW0+XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFwID0gdGhhdC5fLmNhbGxiYWNrTWFwO1xyXG5cclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBldmVudCBuYW1lIHRvIGxvd2VyY2FzZVxyXG4gICAgICAgICAgICBldmVudE5hbWUgPSBldmVudE5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vdCBhbiBldmVudCByZWdpc3RlcmVkIGZvciB0aGlzIGNhbGxiYWNrIHlldCB3ZSB3YW50IHRvIGNyZWF0ZSBpdHMgZXZlbnQgc3BhY2UgaW4gdGhlIGNhbGxiYWNrIG1hcC5cclxuICAgICAgICAgICAgaWYgKCFjYWxsYmFja01hcFtldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hcFtldmVudE5hbWVdID0ge307XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE1hcCB0aGUgY2FsbGJhY2sgdG8gb3VyIGVuY29tcGFzc2VkIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIGNhbGxiYWNrTWFwW2V2ZW50TmFtZV1bY2FsbGJhY2tdID0gZnVuY3Rpb24gKGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoYXQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJCh0aGF0KS5iaW5kKG1ha2VFdmVudE5hbWUoZXZlbnROYW1lKSwgY2FsbGJhY2tNYXBbZXZlbnROYW1lXVtjYWxsYmFja10pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb2ZmOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+UmVtb3ZlcyB0aGUgY2FsbGJhY2sgaW52b2NhdGlvbiByZXF1ZXN0IGZyb20gdGhlIHNlcnZlciBodWIgZm9yIHRoZSBnaXZlbiBldmVudCBuYW1lLjwvc3VtbWFyeT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZXZlbnROYW1lXCIgdHlwZT1cIlN0cmluZ1wiPlRoZSBuYW1lIG9mIHRoZSBodWIgZXZlbnQgdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2sgZm9yLjwvcGFyYW0+XHJcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNhbGxiYWNrXCIgdHlwZT1cIkZ1bmN0aW9uXCI+VGhlIGNhbGxiYWNrIHRvIGJlIGludm9rZWQuPC9wYXJhbT5cclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYXAgPSB0aGF0Ll8uY2FsbGJhY2tNYXAsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja1NwYWNlO1xyXG5cclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBldmVudCBuYW1lIHRvIGxvd2VyY2FzZVxyXG4gICAgICAgICAgICBldmVudE5hbWUgPSBldmVudE5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrU3BhY2UgPSBjYWxsYmFja01hcFtldmVudE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW4gZXZlbnQgc3BhY2UgdG8gdW5iaW5kXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFja1NwYWNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHVuYmluZCBpZiB0aGVyZSdzIGFuIGV2ZW50IGJvdW5kIHdpdGggZXZlbnROYW1lIGFuZCBhIGNhbGxiYWNrIHdpdGggdGhlIHNwZWNpZmllZCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrU3BhY2VbY2FsbGJhY2tdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGF0KS51bmJpbmQobWFrZUV2ZW50TmFtZShldmVudE5hbWUpLCBjYWxsYmFja1NwYWNlW2NhbGxiYWNrXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY2FsbGJhY2sgZnJvbSB0aGUgY2FsbGJhY2sgbWFwXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhbGxiYWNrU3BhY2VbY2FsbGJhY2tdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IG1lbWJlcnMgbGVmdCBvbiB0aGUgZXZlbnQsIGlmIG5vdCB3ZSBuZWVkIHRvIGRlc3Ryb3kgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNNZW1iZXJzKGNhbGxiYWNrU3BhY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjYWxsYmFja01hcFtldmVudE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNhbGxiYWNrKSB7IC8vIENoZWNrIGlmIHdlJ3JlIHJlbW92aW5nIHRoZSB3aG9sZSBldmVudCBhbmQgd2UgZGlkbid0IGVycm9yIGJlY2F1c2Ugb2YgYW4gaW52YWxpZCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhhdCkudW5iaW5kKG1ha2VFdmVudE5hbWUoZXZlbnROYW1lKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjYWxsYmFja01hcFtldmVudE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbnZva2U6IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5JbnZva2VzIGEgc2VydmVyIGh1YiBtZXRob2Qgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzLjwvc3VtbWFyeT5cclxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibWV0aG9kTmFtZVwiIHR5cGU9XCJTdHJpbmdcIj5UaGUgbmFtZSBvZiB0aGUgc2VydmVyIGh1YiBtZXRob2QuPC9wYXJhbT5cclxuXHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSB0aGF0LmNvbm5lY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBhcmdzID0gJC5tYWtlQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKSxcclxuICAgICAgICAgICAgICAgIGFyZ1ZhbHVlcyA9IG1hcChhcmdzLCBnZXRBcmdWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICBkYXRhID0geyBIOiB0aGF0Lmh1Yk5hbWUsIE06IG1ldGhvZE5hbWUsIEE6IGFyZ1ZhbHVlcywgSTogY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja0lkIH0sXHJcbiAgICAgICAgICAgICAgICBkID0gJC5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiAobWluUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoYXQuX21heGltaXplSHViUmVzcG9uc2UobWluUmVzdWx0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBodWIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCh0aGF0LnN0YXRlLCByZXN1bHQuU3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciBodWIgbWV0aG9kIHRocmV3IGFuIGV4Y2VwdGlvbiwgbG9nIGl0ICYgcmVqZWN0IHRoZSBkZWZlcnJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LlN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKHJlc3VsdC5FcnJvciArIFwiXFxuXCIgKyByZXN1bHQuU3RhY2tUcmFjZSArIFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0LkVycm9yRGF0YSBpcyBvbmx5IHNldCBpZiBhIEh1YkV4Y2VwdGlvbiB3YXMgdGhyb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHJlc3VsdC5Jc0h1YkV4Y2VwdGlvbiA/IFwiSHViRXhjZXB0aW9uXCIgOiBcIkV4Y2VwdGlvblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHNpZ25hbFIuXy5lcnJvcihyZXN1bHQuRXJyb3IsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmRhdGEgPSByZXN1bHQuRXJyb3JEYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2codGhhdC5odWJOYW1lICsgXCIuXCIgKyBtZXRob2ROYW1lICsgXCIgZmFpbGVkIHRvIGV4ZWN1dGUuIEVycm9yOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdFdpdGgodGhhdCwgW2Vycm9yXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIGludm9jYXRpb24gc3VjY2VlZGVkLCByZXNvbHZlIHRoZSBkZWZlcnJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkludm9rZWQgXCIgKyB0aGF0Lmh1Yk5hbWUgKyBcIi5cIiArIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmVXaXRoKHRoYXQsIFtyZXN1bHQuUmVzdWx0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tzW2Nvbm5lY3Rpb24uXy5pbnZvY2F0aW9uQ2FsbGJhY2tJZC50b1N0cmluZygpXSA9IHsgc2NvcGU6IHRoYXQsIG1ldGhvZDogY2FsbGJhY2sgfTtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja0lkICs9IDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdCh0aGF0LnN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5TID0gdGhhdC5zdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJJbnZva2luZyBcIiArIHRoYXQuaHViTmFtZSArIFwiLlwiICsgbWV0aG9kTmFtZSk7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZChkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkLnByb21pc2UoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBfbWF4aW1pemVIdWJSZXNwb25zZTogZnVuY3Rpb24gKG1pbkh1YlJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBTdGF0ZTogbWluSHViUmVzcG9uc2UuUyxcclxuICAgICAgICAgICAgICAgIFJlc3VsdDogbWluSHViUmVzcG9uc2UuUixcclxuICAgICAgICAgICAgICAgIElkOiBtaW5IdWJSZXNwb25zZS5JLFxyXG4gICAgICAgICAgICAgICAgSXNIdWJFeGNlcHRpb246IG1pbkh1YlJlc3BvbnNlLkgsXHJcbiAgICAgICAgICAgICAgICBFcnJvcjogbWluSHViUmVzcG9uc2UuRSxcclxuICAgICAgICAgICAgICAgIFN0YWNrVHJhY2U6IG1pbkh1YlJlc3BvbnNlLlQsXHJcbiAgICAgICAgICAgICAgICBFcnJvckRhdGE6IG1pbkh1YlJlc3BvbnNlLkRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGh1YlByb3h5LmZuLmluaXQucHJvdG90eXBlID0gaHViUHJveHkuZm47XHJcblxyXG4gICAgLy8gaHViQ29ubmVjdGlvblxyXG4gICAgZnVuY3Rpb24gaHViQ29ubmVjdGlvbih1cmwsIG9wdGlvbnMpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+Q3JlYXRlcyBhIG5ldyBodWIgY29ubmVjdGlvbi48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidXJsXCIgdHlwZT1cIlN0cmluZ1wiPltPcHRpb25hbF0gVGhlIGh1YiByb3V0ZSB1cmwsIGRlZmF1bHRzIHRvIFwiL3NpZ25hbHJcIi48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9wdGlvbnNcIiB0eXBlPVwiT2JqZWN0XCI+W09wdGlvbmFsXSBTZXR0aW5ncyB0byB1c2Ugd2hlbiBjcmVhdGluZyB0aGUgaHViQ29ubmVjdGlvbi48L3BhcmFtPlxyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgcXM6IG51bGwsXHJcbiAgICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICB1c2VEZWZhdWx0UGF0aDogdHJ1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKCF1cmwgfHwgc2V0dGluZ3MudXNlRGVmYXVsdFBhdGgpIHtcclxuICAgICAgICAgICAgdXJsID0gKHVybCB8fCBcIlwiKSArIFwiL3NpZ25hbHJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBodWJDb25uZWN0aW9uLmZuLmluaXQodXJsLCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgaHViQ29ubmVjdGlvbi5mbiA9IGh1YkNvbm5lY3Rpb24ucHJvdG90eXBlID0gJC5jb25uZWN0aW9uKCk7XHJcblxyXG4gICAgaHViQ29ubmVjdGlvbi5mbi5pbml0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgIHFzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbG9nZ2luZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB1c2VEZWZhdWx0UGF0aDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb25uZWN0aW9uID0gdGhpcztcclxuXHJcbiAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBDYWxsIHRoZSBiYXNlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgJC5zaWduYWxSLmZuLmluaXQuY2FsbChjb25uZWN0aW9uLCB1cmwsIHNldHRpbmdzLnFzLCBzZXR0aW5ncy5sb2dnaW5nKTtcclxuXHJcbiAgICAgICAgLy8gT2JqZWN0IHRvIHN0b3JlIGh1YiBwcm94aWVzIGZvciB0aGlzIGNvbm5lY3Rpb25cclxuICAgICAgICBjb25uZWN0aW9uLnByb3hpZXMgPSB7fTtcclxuXHJcbiAgICAgICAgY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja0lkID0gMDtcclxuICAgICAgICBjb25uZWN0aW9uLl8uaW52b2NhdGlvbkNhbGxiYWNrcyA9IHt9O1xyXG5cclxuICAgICAgICAvLyBXaXJlIHVwIHRoZSByZWNlaXZlZCBoYW5kbGVyXHJcbiAgICAgICAgY29ubmVjdGlvbi5yZWNlaXZlZChmdW5jdGlvbiAobWluRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSwgcHJveHksIGRhdGFDYWxsYmFja0lkLCBjYWxsYmFjaywgaHViTmFtZSwgZXZlbnROYW1lO1xyXG4gICAgICAgICAgICBpZiAoIW1pbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAobWluRGF0YS5JKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgcmVjZWl2ZWQgdGhlIHJldHVybiB2YWx1ZSBmcm9tIGEgc2VydmVyIG1ldGhvZCBpbnZvY2F0aW9uLCBsb29rIHVwIGNhbGxiYWNrIGJ5IGlkIGFuZCBjYWxsIGl0XHJcbiAgICAgICAgICAgICAgICBkYXRhQ2FsbGJhY2tJZCA9IG1pbkRhdGEuSS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjb25uZWN0aW9uLl8uaW52b2NhdGlvbkNhbGxiYWNrc1tkYXRhQ2FsbGJhY2tJZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIGNhbGxiYWNrIGZyb20gdGhlIHByb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja3NbZGF0YUNhbGxiYWNrSWRdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja3NbZGF0YUNhbGxiYWNrSWRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnZva2UgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2subWV0aG9kLmNhbGwoY2FsbGJhY2suc2NvcGUsIG1pbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuX21heGltaXplQ2xpZW50SHViSW52b2NhdGlvbihtaW5EYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSByZWNlaXZlZCBhIGNsaWVudCBpbnZvY2F0aW9uIHJlcXVlc3QsIGkuZS4gYnJvYWRjYXN0IGZyb20gc2VydmVyIGh1YlxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5sb2coXCJUcmlnZ2VyaW5nIGNsaWVudCBodWIgZXZlbnQgJ1wiICsgZGF0YS5NZXRob2QgKyBcIicgb24gaHViICdcIiArIGRhdGEuSHViICsgXCInLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgdGhlIG5hbWVzIHRvIGxvd2VyY2FzZVxyXG4gICAgICAgICAgICAgICAgaHViTmFtZSA9IGRhdGEuSHViLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudE5hbWUgPSBkYXRhLk1ldGhvZC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGxvY2FsIGludm9jYXRpb24gZXZlbnRcclxuICAgICAgICAgICAgICAgIHByb3h5ID0gdGhpcy5wcm94aWVzW2h1Yk5hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgaHViIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZChwcm94eS5zdGF0ZSwgZGF0YS5TdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAkKHByb3h5KS50cmlnZ2VySGFuZGxlcihtYWtlRXZlbnROYW1lKGV2ZW50TmFtZSksIFtkYXRhLkFyZ3NdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25uZWN0aW9uLmVycm9yKGZ1bmN0aW9uIChlcnJEYXRhLCBvcmlnRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tJZCwgY2FsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW9yaWdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBvcmlnaW5hbCBkYXRhIHBhc3NlZCBzbyB0aGlzIGlzIG5vdCBhIHNlbmQgZXJyb3JcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2tJZCA9IG9yaWdEYXRhLkk7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja3NbY2FsbGJhY2tJZF07XHJcblxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBpcyBhIGNhbGxiYWNrIGJvdW5kIChjb3VsZCBoYXZlIGJlZW4gY2xlYXJlZClcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLl8uaW52b2NhdGlvbkNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29ubmVjdGlvbi5fLmludm9jYXRpb25DYWxsYmFja3NbY2FsbGJhY2tJZF07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIGFuIGVycm9yIHRvIHJlamVjdCB0aGUgcHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2subWV0aG9kLmNhbGwoY2FsbGJhY2suc2NvcGUsIHsgRTogZXJyRGF0YSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25uZWN0aW9uLnJlY29ubmVjdGluZyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnRyYW5zcG9ydCAmJiBjb25uZWN0aW9uLnRyYW5zcG9ydC5uYW1lID09PSBcIndlYlNvY2tldHNcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnZvY2F0aW9uQ2FsbGJhY2tzKGNvbm5lY3Rpb24sIFwiQ29ubmVjdGlvbiBzdGFydGVkIHJlY29ubmVjdGluZyBiZWZvcmUgaW52b2NhdGlvbiByZXN1bHQgd2FzIHJlY2VpdmVkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25uZWN0aW9uLmRpc2Nvbm5lY3RlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW52b2NhdGlvbkNhbGxiYWNrcyhjb25uZWN0aW9uLCBcIkNvbm5lY3Rpb24gd2FzIGRpc2Nvbm5lY3RlZCBiZWZvcmUgaW52b2NhdGlvbiByZXN1bHQgd2FzIHJlY2VpdmVkLlwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgaHViQ29ubmVjdGlvbi5mbi5fbWF4aW1pemVDbGllbnRIdWJJbnZvY2F0aW9uID0gZnVuY3Rpb24gKG1pbkNsaWVudEh1Ykludm9jYXRpb24pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBIdWI6IG1pbkNsaWVudEh1Ykludm9jYXRpb24uSCxcclxuICAgICAgICAgICAgTWV0aG9kOiBtaW5DbGllbnRIdWJJbnZvY2F0aW9uLk0sXHJcbiAgICAgICAgICAgIEFyZ3M6IG1pbkNsaWVudEh1Ykludm9jYXRpb24uQSxcclxuICAgICAgICAgICAgU3RhdGU6IG1pbkNsaWVudEh1Ykludm9jYXRpb24uU1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGh1YkNvbm5lY3Rpb24uZm4uX3JlZ2lzdGVyU3Vic2NyaWJlZEh1YnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgU2V0cyB0aGUgc3RhcnRpbmcgZXZlbnQgdG8gbG9vcCB0aHJvdWdoIHRoZSBrbm93biBodWJzIGFuZCByZWdpc3RlciBhbnkgbmV3IGh1YnMgXHJcbiAgICAgICAgLy8vICAgICB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgcHJveHkuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5fc3Vic2NyaWJlZFRvSHVicykge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLl9zdWJzY3JpYmVkVG9IdWJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5zdGFydGluZyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGNvbm5lY3Rpb24ncyBkYXRhIG9iamVjdCB3aXRoIGFsbCB0aGUgaHViIHByb3hpZXMgd2l0aCBhY3RpdmUgc3Vic2NyaXB0aW9ucy5cclxuICAgICAgICAgICAgICAgIC8vIFRoZXNlIHByb3hpZXMgd2lsbCByZWNlaXZlIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnNjcmliZWRIdWJzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGNvbm5lY3Rpb24ucHJveGllcywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1N1YnNjcmlwdGlvbnMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVkSHVicy5wdXNoKHsgbmFtZToga2V5IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIkNsaWVudCBzdWJzY3JpYmVkIHRvIGh1YiAnXCIgKyBrZXkgKyBcIicuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVkSHVicy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmxvZyhcIk5vIGh1YnMgaGF2ZSBiZWVuIHN1YnNjcmliZWQgdG8uICBUaGUgY2xpZW50IHdpbGwgbm90IHJlY2VpdmUgZGF0YSBmcm9tIGh1YnMuICBUbyBmaXgsIGRlY2xhcmUgYXQgbGVhc3Qgb25lIGNsaWVudCBzaWRlIGZ1bmN0aW9uIHByaW9yIHRvIGNvbm5lY3Rpb24gc3RhcnQgZm9yIGVhY2ggaHViIHlvdSB3aXNoIHRvIHN1YnNjcmliZSB0by5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5kYXRhID0gY29ubmVjdGlvbi5qc29uLnN0cmluZ2lmeShzdWJzY3JpYmVkSHVicyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaHViQ29ubmVjdGlvbi5mbi5jcmVhdGVIdWJQcm94eSA9IGZ1bmN0aW9uIChodWJOYW1lKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIG5ldyBwcm94eSBvYmplY3QgZm9yIHRoZSBnaXZlbiBodWIgY29ubmVjdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGludm9rZVxyXG4gICAgICAgIC8vLyAgICAgbWV0aG9kcyBvbiBzZXJ2ZXIgaHVicyBhbmQgaGFuZGxlIGNsaWVudCBtZXRob2QgaW52b2NhdGlvbiByZXF1ZXN0cyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJodWJOYW1lXCIgdHlwZT1cIlN0cmluZ1wiPlxyXG4gICAgICAgIC8vLyAgICAgVGhlIG5hbWUgb2YgdGhlIGh1YiBvbiB0aGUgc2VydmVyIHRvIGNyZWF0ZSB0aGUgcHJveHkgZm9yLlxyXG4gICAgICAgIC8vLyA8L3BhcmFtPlxyXG5cclxuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIG5hbWUgdG8gbG93ZXJjYXNlXHJcbiAgICAgICAgaHViTmFtZSA9IGh1Yk5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgdmFyIHByb3h5ID0gdGhpcy5wcm94aWVzW2h1Yk5hbWVdO1xyXG4gICAgICAgIGlmICghcHJveHkpIHtcclxuICAgICAgICAgICAgcHJveHkgPSBodWJQcm94eSh0aGlzLCBodWJOYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5wcm94aWVzW2h1Yk5hbWVdID0gcHJveHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZWdpc3RlclN1YnNjcmliZWRIdWJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm94eTtcclxuICAgIH07XHJcblxyXG4gICAgaHViQ29ubmVjdGlvbi5mbi5pbml0LnByb3RvdHlwZSA9IGh1YkNvbm5lY3Rpb24uZm47XHJcblxyXG4gICAgJC5odWJDb25uZWN0aW9uID0gaHViQ29ubmVjdGlvbjtcclxuXHJcbn0od2luZG93LmpRdWVyeSwgd2luZG93KSk7XHJcbi8qIGpxdWVyeS5zaWduYWxSLnZlcnNpb24uanMgKi9cclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgT3BlbiBUZWNobm9sb2dpZXMsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gU2VlIExpY2Vuc2UubWQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuXHJcbi8qZ2xvYmFsIHdpbmRvdzpmYWxzZSAqL1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwianF1ZXJ5LnNpZ25hbFIuY29yZS5qc1wiIC8+XHJcbihmdW5jdGlvbiAoJCwgdW5kZWZpbmVkKSB7XHJcbiAgICAkLnNpZ25hbFIudmVyc2lvbiA9IFwiMi4wLjNcIjtcclxufSh3aW5kb3cualF1ZXJ5KSk7XHJcbiJdfQ==